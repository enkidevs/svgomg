{"version":3,"sources":["node_modules/browser-pack/_prelude.js","node_modules/events/events.js","node_modules/regenerator-runtime/runtime.js","src/js/page/gzip.js","src/js/page/index.js","src/js/page/load-scripts.js","src/js/page/main-controller.js","src/js/page/prism.js","src/js/page/results-cache.js","src/js/page/svg-file.js","src/js/page/svgo.js","src/js/page/ui/bg-fill.js","src/js/page/ui/changelog.js","src/js/page/ui/code-output.js","src/js/page/ui/copy-button.js","src/js/page/ui/download-button.js","src/js/page/ui/enki-code-output.js","src/js/page/ui/enki-topic-code-output.js","src/js/page/ui/file-drop.js","src/js/page/ui/main-menu.js","src/js/page/ui/main-ui.js","src/js/page/ui/material-slider.js","src/js/page/ui/output.js","src/js/page/ui/pan-zoom.js","src/js/page/ui/preloader.js","src/js/page/ui/results-container.js","src/js/page/ui/results.js","src/js/page/ui/ripple.js","src/js/page/ui/settings.js","src/js/page/ui/spinner.js","src/js/page/ui/svg-output.js","src/js/page/ui/toasts.js","src/js/page/ui/view-toggler.js","src/js/page/utils.js","src/js/page/worker-messenger.js","src/js/utils/indexeddouchbag.js","src/js/utils/storage.js"],"names":[],"mappings":"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","file":"page.js","sourcesContent":["(function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a=typeof require==\"function\"&&require;if(!u&&a)return a(o,!0);if(i)return i(o,!0);var f=new Error(\"Cannot find module '\"+o+\"'\");throw f.code=\"MODULE_NOT_FOUND\",f}var l=n[o]={exports:{}};t[o][0].call(l.exports,function(e){var n=t[o][1][e];return s(n?n:e)},l,l.exports,e,t,n,r)}return n[o].exports}var i=typeof require==\"function\"&&require;for(var o=0;o<r.length;o++)s(r[o]);return s})","// Copyright Joyent, Inc. and other Node contributors.\n//\n// Permission is hereby granted, free of charge, to any person obtaining a\n// copy of this software and associated documentation files (the\n// \"Software\"), to deal in the Software without restriction, including\n// without limitation the rights to use, copy, modify, merge, publish,\n// distribute, sublicense, and/or sell copies of the Software, and to permit\n// persons to whom the Software is furnished to do so, subject to the\n// following conditions:\n//\n// The above copyright notice and this permission notice shall be included\n// in all copies or substantial portions of the Software.\n//\n// THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS\n// OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF\n// MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN\n// NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM,\n// DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR\n// OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE\n// USE OR OTHER DEALINGS IN THE SOFTWARE.\n\nfunction EventEmitter() {\n  this._events = this._events || {};\n  this._maxListeners = this._maxListeners || undefined;\n}\nmodule.exports = EventEmitter;\n\n// Backwards-compat with node 0.10.x\nEventEmitter.EventEmitter = EventEmitter;\n\nEventEmitter.prototype._events = undefined;\nEventEmitter.prototype._maxListeners = undefined;\n\n// By default EventEmitters will print a warning if more than 10 listeners are\n// added to it. This is a useful default which helps finding memory leaks.\nEventEmitter.defaultMaxListeners = 10;\n\n// Obviously not all Emitters should be limited to 10. This function allows\n// that to be increased. Set to zero for unlimited.\nEventEmitter.prototype.setMaxListeners = function(n) {\n  if (!isNumber(n) || n < 0 || isNaN(n))\n    throw TypeError('n must be a positive number');\n  this._maxListeners = n;\n  return this;\n};\n\nEventEmitter.prototype.emit = function(type) {\n  var er, handler, len, args, i, listeners;\n\n  if (!this._events)\n    this._events = {};\n\n  // If there is no 'error' event listener then throw.\n  if (type === 'error') {\n    if (!this._events.error ||\n        (isObject(this._events.error) && !this._events.error.length)) {\n      er = arguments[1];\n      if (er instanceof Error) {\n        throw er; // Unhandled 'error' event\n      } else {\n        // At least give some kind of context to the user\n        var err = new Error('Uncaught, unspecified \"error\" event. (' + er + ')');\n        err.context = er;\n        throw err;\n      }\n    }\n  }\n\n  handler = this._events[type];\n\n  if (isUndefined(handler))\n    return false;\n\n  if (isFunction(handler)) {\n    switch (arguments.length) {\n      // fast cases\n      case 1:\n        handler.call(this);\n        break;\n      case 2:\n        handler.call(this, arguments[1]);\n        break;\n      case 3:\n        handler.call(this, arguments[1], arguments[2]);\n        break;\n      // slower\n      default:\n        args = Array.prototype.slice.call(arguments, 1);\n        handler.apply(this, args);\n    }\n  } else if (isObject(handler)) {\n    args = Array.prototype.slice.call(arguments, 1);\n    listeners = handler.slice();\n    len = listeners.length;\n    for (i = 0; i < len; i++)\n      listeners[i].apply(this, args);\n  }\n\n  return true;\n};\n\nEventEmitter.prototype.addListener = function(type, listener) {\n  var m;\n\n  if (!isFunction(listener))\n    throw TypeError('listener must be a function');\n\n  if (!this._events)\n    this._events = {};\n\n  // To avoid recursion in the case that type === \"newListener\"! Before\n  // adding it to the listeners, first emit \"newListener\".\n  if (this._events.newListener)\n    this.emit('newListener', type,\n              isFunction(listener.listener) ?\n              listener.listener : listener);\n\n  if (!this._events[type])\n    // Optimize the case of one listener. Don't need the extra array object.\n    this._events[type] = listener;\n  else if (isObject(this._events[type]))\n    // If we've already got an array, just append.\n    this._events[type].push(listener);\n  else\n    // Adding the second element, need to change to array.\n    this._events[type] = [this._events[type], listener];\n\n  // Check for listener leak\n  if (isObject(this._events[type]) && !this._events[type].warned) {\n    if (!isUndefined(this._maxListeners)) {\n      m = this._maxListeners;\n    } else {\n      m = EventEmitter.defaultMaxListeners;\n    }\n\n    if (m && m > 0 && this._events[type].length > m) {\n      this._events[type].warned = true;\n      console.error('(node) warning: possible EventEmitter memory ' +\n                    'leak detected. %d listeners added. ' +\n                    'Use emitter.setMaxListeners() to increase limit.',\n                    this._events[type].length);\n      if (typeof console.trace === 'function') {\n        // not supported in IE 10\n        console.trace();\n      }\n    }\n  }\n\n  return this;\n};\n\nEventEmitter.prototype.on = EventEmitter.prototype.addListener;\n\nEventEmitter.prototype.once = function(type, listener) {\n  if (!isFunction(listener))\n    throw TypeError('listener must be a function');\n\n  var fired = false;\n\n  function g() {\n    this.removeListener(type, g);\n\n    if (!fired) {\n      fired = true;\n      listener.apply(this, arguments);\n    }\n  }\n\n  g.listener = listener;\n  this.on(type, g);\n\n  return this;\n};\n\n// emits a 'removeListener' event iff the listener was removed\nEventEmitter.prototype.removeListener = function(type, listener) {\n  var list, position, length, i;\n\n  if (!isFunction(listener))\n    throw TypeError('listener must be a function');\n\n  if (!this._events || !this._events[type])\n    return this;\n\n  list = this._events[type];\n  length = list.length;\n  position = -1;\n\n  if (list === listener ||\n      (isFunction(list.listener) && list.listener === listener)) {\n    delete this._events[type];\n    if (this._events.removeListener)\n      this.emit('removeListener', type, listener);\n\n  } else if (isObject(list)) {\n    for (i = length; i-- > 0;) {\n      if (list[i] === listener ||\n          (list[i].listener && list[i].listener === listener)) {\n        position = i;\n        break;\n      }\n    }\n\n    if (position < 0)\n      return this;\n\n    if (list.length === 1) {\n      list.length = 0;\n      delete this._events[type];\n    } else {\n      list.splice(position, 1);\n    }\n\n    if (this._events.removeListener)\n      this.emit('removeListener', type, listener);\n  }\n\n  return this;\n};\n\nEventEmitter.prototype.removeAllListeners = function(type) {\n  var key, listeners;\n\n  if (!this._events)\n    return this;\n\n  // not listening for removeListener, no need to emit\n  if (!this._events.removeListener) {\n    if (arguments.length === 0)\n      this._events = {};\n    else if (this._events[type])\n      delete this._events[type];\n    return this;\n  }\n\n  // emit removeListener for all listeners on all events\n  if (arguments.length === 0) {\n    for (key in this._events) {\n      if (key === 'removeListener') continue;\n      this.removeAllListeners(key);\n    }\n    this.removeAllListeners('removeListener');\n    this._events = {};\n    return this;\n  }\n\n  listeners = this._events[type];\n\n  if (isFunction(listeners)) {\n    this.removeListener(type, listeners);\n  } else if (listeners) {\n    // LIFO order\n    while (listeners.length)\n      this.removeListener(type, listeners[listeners.length - 1]);\n  }\n  delete this._events[type];\n\n  return this;\n};\n\nEventEmitter.prototype.listeners = function(type) {\n  var ret;\n  if (!this._events || !this._events[type])\n    ret = [];\n  else if (isFunction(this._events[type]))\n    ret = [this._events[type]];\n  else\n    ret = this._events[type].slice();\n  return ret;\n};\n\nEventEmitter.prototype.listenerCount = function(type) {\n  if (this._events) {\n    var evlistener = this._events[type];\n\n    if (isFunction(evlistener))\n      return 1;\n    else if (evlistener)\n      return evlistener.length;\n  }\n  return 0;\n};\n\nEventEmitter.listenerCount = function(emitter, type) {\n  return emitter.listenerCount(type);\n};\n\nfunction isFunction(arg) {\n  return typeof arg === 'function';\n}\n\nfunction isNumber(arg) {\n  return typeof arg === 'number';\n}\n\nfunction isObject(arg) {\n  return typeof arg === 'object' && arg !== null;\n}\n\nfunction isUndefined(arg) {\n  return arg === void 0;\n}\n","/**\n * Copyright (c) 2014, Facebook, Inc.\n * All rights reserved.\n *\n * This source code is licensed under the BSD-style license found in the\n * https://raw.github.com/facebook/regenerator/master/LICENSE file. An\n * additional grant of patent rights can be found in the PATENTS file in\n * the same directory.\n */\n\n!(function(global) {\n  \"use strict\";\n\n  var Op = Object.prototype;\n  var hasOwn = Op.hasOwnProperty;\n  var undefined; // More compressible than void 0.\n  var $Symbol = typeof Symbol === \"function\" ? Symbol : {};\n  var iteratorSymbol = $Symbol.iterator || \"@@iterator\";\n  var asyncIteratorSymbol = $Symbol.asyncIterator || \"@@asyncIterator\";\n  var toStringTagSymbol = $Symbol.toStringTag || \"@@toStringTag\";\n\n  var inModule = typeof module === \"object\";\n  var runtime = global.regeneratorRuntime;\n  if (runtime) {\n    if (inModule) {\n      // If regeneratorRuntime is defined globally and we're in a module,\n      // make the exports object identical to regeneratorRuntime.\n      module.exports = runtime;\n    }\n    // Don't bother evaluating the rest of this file if the runtime was\n    // already defined globally.\n    return;\n  }\n\n  // Define the runtime globally (as expected by generated code) as either\n  // module.exports (if we're in a module) or a new, empty object.\n  runtime = global.regeneratorRuntime = inModule ? module.exports : {};\n\n  function wrap(innerFn, outerFn, self, tryLocsList) {\n    // If outerFn provided and outerFn.prototype is a Generator, then outerFn.prototype instanceof Generator.\n    var protoGenerator = outerFn && outerFn.prototype instanceof Generator ? outerFn : Generator;\n    var generator = Object.create(protoGenerator.prototype);\n    var context = new Context(tryLocsList || []);\n\n    // The ._invoke method unifies the implementations of the .next,\n    // .throw, and .return methods.\n    generator._invoke = makeInvokeMethod(innerFn, self, context);\n\n    return generator;\n  }\n  runtime.wrap = wrap;\n\n  // Try/catch helper to minimize deoptimizations. Returns a completion\n  // record like context.tryEntries[i].completion. This interface could\n  // have been (and was previously) designed to take a closure to be\n  // invoked without arguments, but in all the cases we care about we\n  // already have an existing method we want to call, so there's no need\n  // to create a new function object. We can even get away with assuming\n  // the method takes exactly one argument, since that happens to be true\n  // in every case, so we don't have to touch the arguments object. The\n  // only additional allocation required is the completion record, which\n  // has a stable shape and so hopefully should be cheap to allocate.\n  function tryCatch(fn, obj, arg) {\n    try {\n      return { type: \"normal\", arg: fn.call(obj, arg) };\n    } catch (err) {\n      return { type: \"throw\", arg: err };\n    }\n  }\n\n  var GenStateSuspendedStart = \"suspendedStart\";\n  var GenStateSuspendedYield = \"suspendedYield\";\n  var GenStateExecuting = \"executing\";\n  var GenStateCompleted = \"completed\";\n\n  // Returning this object from the innerFn has the same effect as\n  // breaking out of the dispatch switch statement.\n  var ContinueSentinel = {};\n\n  // Dummy constructor functions that we use as the .constructor and\n  // .constructor.prototype properties for functions that return Generator\n  // objects. For full spec compliance, you may wish to configure your\n  // minifier not to mangle the names of these two functions.\n  function Generator() {}\n  function GeneratorFunction() {}\n  function GeneratorFunctionPrototype() {}\n\n  // This is a polyfill for %IteratorPrototype% for environments that\n  // don't natively support it.\n  var IteratorPrototype = {};\n  IteratorPrototype[iteratorSymbol] = function () {\n    return this;\n  };\n\n  var getProto = Object.getPrototypeOf;\n  var NativeIteratorPrototype = getProto && getProto(getProto(values([])));\n  if (NativeIteratorPrototype &&\n      NativeIteratorPrototype !== Op &&\n      hasOwn.call(NativeIteratorPrototype, iteratorSymbol)) {\n    // This environment has a native %IteratorPrototype%; use it instead\n    // of the polyfill.\n    IteratorPrototype = NativeIteratorPrototype;\n  }\n\n  var Gp = GeneratorFunctionPrototype.prototype =\n    Generator.prototype = Object.create(IteratorPrototype);\n  GeneratorFunction.prototype = Gp.constructor = GeneratorFunctionPrototype;\n  GeneratorFunctionPrototype.constructor = GeneratorFunction;\n  GeneratorFunctionPrototype[toStringTagSymbol] =\n    GeneratorFunction.displayName = \"GeneratorFunction\";\n\n  // Helper for defining the .next, .throw, and .return methods of the\n  // Iterator interface in terms of a single ._invoke method.\n  function defineIteratorMethods(prototype) {\n    [\"next\", \"throw\", \"return\"].forEach(function(method) {\n      prototype[method] = function(arg) {\n        return this._invoke(method, arg);\n      };\n    });\n  }\n\n  runtime.isGeneratorFunction = function(genFun) {\n    var ctor = typeof genFun === \"function\" && genFun.constructor;\n    return ctor\n      ? ctor === GeneratorFunction ||\n        // For the native GeneratorFunction constructor, the best we can\n        // do is to check its .name property.\n        (ctor.displayName || ctor.name) === \"GeneratorFunction\"\n      : false;\n  };\n\n  runtime.mark = function(genFun) {\n    if (Object.setPrototypeOf) {\n      Object.setPrototypeOf(genFun, GeneratorFunctionPrototype);\n    } else {\n      genFun.__proto__ = GeneratorFunctionPrototype;\n      if (!(toStringTagSymbol in genFun)) {\n        genFun[toStringTagSymbol] = \"GeneratorFunction\";\n      }\n    }\n    genFun.prototype = Object.create(Gp);\n    return genFun;\n  };\n\n  // Within the body of any async function, `await x` is transformed to\n  // `yield regeneratorRuntime.awrap(x)`, so that the runtime can test\n  // `hasOwn.call(value, \"__await\")` to determine if the yielded value is\n  // meant to be awaited.\n  runtime.awrap = function(arg) {\n    return { __await: arg };\n  };\n\n  function AsyncIterator(generator) {\n    function invoke(method, arg, resolve, reject) {\n      var record = tryCatch(generator[method], generator, arg);\n      if (record.type === \"throw\") {\n        reject(record.arg);\n      } else {\n        var result = record.arg;\n        var value = result.value;\n        if (value &&\n            typeof value === \"object\" &&\n            hasOwn.call(value, \"__await\")) {\n          return Promise.resolve(value.__await).then(function(value) {\n            invoke(\"next\", value, resolve, reject);\n          }, function(err) {\n            invoke(\"throw\", err, resolve, reject);\n          });\n        }\n\n        return Promise.resolve(value).then(function(unwrapped) {\n          // When a yielded Promise is resolved, its final value becomes\n          // the .value of the Promise<{value,done}> result for the\n          // current iteration. If the Promise is rejected, however, the\n          // result for this iteration will be rejected with the same\n          // reason. Note that rejections of yielded Promises are not\n          // thrown back into the generator function, as is the case\n          // when an awaited Promise is rejected. This difference in\n          // behavior between yield and await is important, because it\n          // allows the consumer to decide what to do with the yielded\n          // rejection (swallow it and continue, manually .throw it back\n          // into the generator, abandon iteration, whatever). With\n          // await, by contrast, there is no opportunity to examine the\n          // rejection reason outside the generator function, so the\n          // only option is to throw it from the await expression, and\n          // let the generator function handle the exception.\n          result.value = unwrapped;\n          resolve(result);\n        }, reject);\n      }\n    }\n\n    if (typeof global.process === \"object\" && global.process.domain) {\n      invoke = global.process.domain.bind(invoke);\n    }\n\n    var previousPromise;\n\n    function enqueue(method, arg) {\n      function callInvokeWithMethodAndArg() {\n        return new Promise(function(resolve, reject) {\n          invoke(method, arg, resolve, reject);\n        });\n      }\n\n      return previousPromise =\n        // If enqueue has been called before, then we want to wait until\n        // all previous Promises have been resolved before calling invoke,\n        // so that results are always delivered in the correct order. If\n        // enqueue has not been called before, then it is important to\n        // call invoke immediately, without waiting on a callback to fire,\n        // so that the async generator function has the opportunity to do\n        // any necessary setup in a predictable way. This predictability\n        // is why the Promise constructor synchronously invokes its\n        // executor callback, and why async functions synchronously\n        // execute code before the first await. Since we implement simple\n        // async functions in terms of async generators, it is especially\n        // important to get this right, even though it requires care.\n        previousPromise ? previousPromise.then(\n          callInvokeWithMethodAndArg,\n          // Avoid propagating failures to Promises returned by later\n          // invocations of the iterator.\n          callInvokeWithMethodAndArg\n        ) : callInvokeWithMethodAndArg();\n    }\n\n    // Define the unified helper method that is used to implement .next,\n    // .throw, and .return (see defineIteratorMethods).\n    this._invoke = enqueue;\n  }\n\n  defineIteratorMethods(AsyncIterator.prototype);\n  AsyncIterator.prototype[asyncIteratorSymbol] = function () {\n    return this;\n  };\n  runtime.AsyncIterator = AsyncIterator;\n\n  // Note that simple async functions are implemented on top of\n  // AsyncIterator objects; they just return a Promise for the value of\n  // the final result produced by the iterator.\n  runtime.async = function(innerFn, outerFn, self, tryLocsList) {\n    var iter = new AsyncIterator(\n      wrap(innerFn, outerFn, self, tryLocsList)\n    );\n\n    return runtime.isGeneratorFunction(outerFn)\n      ? iter // If outerFn is a generator, return the full iterator.\n      : iter.next().then(function(result) {\n          return result.done ? result.value : iter.next();\n        });\n  };\n\n  function makeInvokeMethod(innerFn, self, context) {\n    var state = GenStateSuspendedStart;\n\n    return function invoke(method, arg) {\n      if (state === GenStateExecuting) {\n        throw new Error(\"Generator is already running\");\n      }\n\n      if (state === GenStateCompleted) {\n        if (method === \"throw\") {\n          throw arg;\n        }\n\n        // Be forgiving, per 25.3.3.3.3 of the spec:\n        // https://people.mozilla.org/~jorendorff/es6-draft.html#sec-generatorresume\n        return doneResult();\n      }\n\n      context.method = method;\n      context.arg = arg;\n\n      while (true) {\n        var delegate = context.delegate;\n        if (delegate) {\n          var delegateResult = maybeInvokeDelegate(delegate, context);\n          if (delegateResult) {\n            if (delegateResult === ContinueSentinel) continue;\n            return delegateResult;\n          }\n        }\n\n        if (context.method === \"next\") {\n          // Setting context._sent for legacy support of Babel's\n          // function.sent implementation.\n          context.sent = context._sent = context.arg;\n\n        } else if (context.method === \"throw\") {\n          if (state === GenStateSuspendedStart) {\n            state = GenStateCompleted;\n            throw context.arg;\n          }\n\n          context.dispatchException(context.arg);\n\n        } else if (context.method === \"return\") {\n          context.abrupt(\"return\", context.arg);\n        }\n\n        state = GenStateExecuting;\n\n        var record = tryCatch(innerFn, self, context);\n        if (record.type === \"normal\") {\n          // If an exception is thrown from innerFn, we leave state ===\n          // GenStateExecuting and loop back for another invocation.\n          state = context.done\n            ? GenStateCompleted\n            : GenStateSuspendedYield;\n\n          if (record.arg === ContinueSentinel) {\n            continue;\n          }\n\n          return {\n            value: record.arg,\n            done: context.done\n          };\n\n        } else if (record.type === \"throw\") {\n          state = GenStateCompleted;\n          // Dispatch the exception by looping back around to the\n          // context.dispatchException(context.arg) call above.\n          context.method = \"throw\";\n          context.arg = record.arg;\n        }\n      }\n    };\n  }\n\n  // Call delegate.iterator[context.method](context.arg) and handle the\n  // result, either by returning a { value, done } result from the\n  // delegate iterator, or by modifying context.method and context.arg,\n  // setting context.delegate to null, and returning the ContinueSentinel.\n  function maybeInvokeDelegate(delegate, context) {\n    var method = delegate.iterator[context.method];\n    if (method === undefined) {\n      // A .throw or .return when the delegate iterator has no .throw\n      // method always terminates the yield* loop.\n      context.delegate = null;\n\n      if (context.method === \"throw\") {\n        if (delegate.iterator.return) {\n          // If the delegate iterator has a return method, give it a\n          // chance to clean up.\n          context.method = \"return\";\n          context.arg = undefined;\n          maybeInvokeDelegate(delegate, context);\n\n          if (context.method === \"throw\") {\n            // If maybeInvokeDelegate(context) changed context.method from\n            // \"return\" to \"throw\", let that override the TypeError below.\n            return ContinueSentinel;\n          }\n        }\n\n        context.method = \"throw\";\n        context.arg = new TypeError(\n          \"The iterator does not provide a 'throw' method\");\n      }\n\n      return ContinueSentinel;\n    }\n\n    var record = tryCatch(method, delegate.iterator, context.arg);\n\n    if (record.type === \"throw\") {\n      context.method = \"throw\";\n      context.arg = record.arg;\n      context.delegate = null;\n      return ContinueSentinel;\n    }\n\n    var info = record.arg;\n\n    if (! info) {\n      context.method = \"throw\";\n      context.arg = new TypeError(\"iterator result is not an object\");\n      context.delegate = null;\n      return ContinueSentinel;\n    }\n\n    if (info.done) {\n      // Assign the result of the finished delegate to the temporary\n      // variable specified by delegate.resultName (see delegateYield).\n      context[delegate.resultName] = info.value;\n\n      // Resume execution at the desired location (see delegateYield).\n      context.next = delegate.nextLoc;\n\n      // If context.method was \"throw\" but the delegate handled the\n      // exception, let the outer generator proceed normally. If\n      // context.method was \"next\", forget context.arg since it has been\n      // \"consumed\" by the delegate iterator. If context.method was\n      // \"return\", allow the original .return call to continue in the\n      // outer generator.\n      if (context.method !== \"return\") {\n        context.method = \"next\";\n        context.arg = undefined;\n      }\n\n    } else {\n      // Re-yield the result returned by the delegate method.\n      return info;\n    }\n\n    // The delegate iterator is finished, so forget it and continue with\n    // the outer generator.\n    context.delegate = null;\n    return ContinueSentinel;\n  }\n\n  // Define Generator.prototype.{next,throw,return} in terms of the\n  // unified ._invoke helper method.\n  defineIteratorMethods(Gp);\n\n  Gp[toStringTagSymbol] = \"Generator\";\n\n  // A Generator should always return itself as the iterator object when the\n  // @@iterator function is called on it. Some browsers' implementations of the\n  // iterator prototype chain incorrectly implement this, causing the Generator\n  // object to not be returned from this call. This ensures that doesn't happen.\n  // See https://github.com/facebook/regenerator/issues/274 for more details.\n  Gp[iteratorSymbol] = function() {\n    return this;\n  };\n\n  Gp.toString = function() {\n    return \"[object Generator]\";\n  };\n\n  function pushTryEntry(locs) {\n    var entry = { tryLoc: locs[0] };\n\n    if (1 in locs) {\n      entry.catchLoc = locs[1];\n    }\n\n    if (2 in locs) {\n      entry.finallyLoc = locs[2];\n      entry.afterLoc = locs[3];\n    }\n\n    this.tryEntries.push(entry);\n  }\n\n  function resetTryEntry(entry) {\n    var record = entry.completion || {};\n    record.type = \"normal\";\n    delete record.arg;\n    entry.completion = record;\n  }\n\n  function Context(tryLocsList) {\n    // The root entry object (effectively a try statement without a catch\n    // or a finally block) gives us a place to store values thrown from\n    // locations where there is no enclosing try statement.\n    this.tryEntries = [{ tryLoc: \"root\" }];\n    tryLocsList.forEach(pushTryEntry, this);\n    this.reset(true);\n  }\n\n  runtime.keys = function(object) {\n    var keys = [];\n    for (var key in object) {\n      keys.push(key);\n    }\n    keys.reverse();\n\n    // Rather than returning an object with a next method, we keep\n    // things simple and return the next function itself.\n    return function next() {\n      while (keys.length) {\n        var key = keys.pop();\n        if (key in object) {\n          next.value = key;\n          next.done = false;\n          return next;\n        }\n      }\n\n      // To avoid creating an additional object, we just hang the .value\n      // and .done properties off the next function object itself. This\n      // also ensures that the minifier will not anonymize the function.\n      next.done = true;\n      return next;\n    };\n  };\n\n  function values(iterable) {\n    if (iterable) {\n      var iteratorMethod = iterable[iteratorSymbol];\n      if (iteratorMethod) {\n        return iteratorMethod.call(iterable);\n      }\n\n      if (typeof iterable.next === \"function\") {\n        return iterable;\n      }\n\n      if (!isNaN(iterable.length)) {\n        var i = -1, next = function next() {\n          while (++i < iterable.length) {\n            if (hasOwn.call(iterable, i)) {\n              next.value = iterable[i];\n              next.done = false;\n              return next;\n            }\n          }\n\n          next.value = undefined;\n          next.done = true;\n\n          return next;\n        };\n\n        return next.next = next;\n      }\n    }\n\n    // Return an iterator with no values.\n    return { next: doneResult };\n  }\n  runtime.values = values;\n\n  function doneResult() {\n    return { value: undefined, done: true };\n  }\n\n  Context.prototype = {\n    constructor: Context,\n\n    reset: function(skipTempReset) {\n      this.prev = 0;\n      this.next = 0;\n      // Resetting context._sent for legacy support of Babel's\n      // function.sent implementation.\n      this.sent = this._sent = undefined;\n      this.done = false;\n      this.delegate = null;\n\n      this.method = \"next\";\n      this.arg = undefined;\n\n      this.tryEntries.forEach(resetTryEntry);\n\n      if (!skipTempReset) {\n        for (var name in this) {\n          // Not sure about the optimal order of these conditions:\n          if (name.charAt(0) === \"t\" &&\n              hasOwn.call(this, name) &&\n              !isNaN(+name.slice(1))) {\n            this[name] = undefined;\n          }\n        }\n      }\n    },\n\n    stop: function() {\n      this.done = true;\n\n      var rootEntry = this.tryEntries[0];\n      var rootRecord = rootEntry.completion;\n      if (rootRecord.type === \"throw\") {\n        throw rootRecord.arg;\n      }\n\n      return this.rval;\n    },\n\n    dispatchException: function(exception) {\n      if (this.done) {\n        throw exception;\n      }\n\n      var context = this;\n      function handle(loc, caught) {\n        record.type = \"throw\";\n        record.arg = exception;\n        context.next = loc;\n\n        if (caught) {\n          // If the dispatched exception was caught by a catch block,\n          // then let that catch block handle the exception normally.\n          context.method = \"next\";\n          context.arg = undefined;\n        }\n\n        return !! caught;\n      }\n\n      for (var i = this.tryEntries.length - 1; i >= 0; --i) {\n        var entry = this.tryEntries[i];\n        var record = entry.completion;\n\n        if (entry.tryLoc === \"root\") {\n          // Exception thrown outside of any try block that could handle\n          // it, so set the completion value of the entire function to\n          // throw the exception.\n          return handle(\"end\");\n        }\n\n        if (entry.tryLoc <= this.prev) {\n          var hasCatch = hasOwn.call(entry, \"catchLoc\");\n          var hasFinally = hasOwn.call(entry, \"finallyLoc\");\n\n          if (hasCatch && hasFinally) {\n            if (this.prev < entry.catchLoc) {\n              return handle(entry.catchLoc, true);\n            } else if (this.prev < entry.finallyLoc) {\n              return handle(entry.finallyLoc);\n            }\n\n          } else if (hasCatch) {\n            if (this.prev < entry.catchLoc) {\n              return handle(entry.catchLoc, true);\n            }\n\n          } else if (hasFinally) {\n            if (this.prev < entry.finallyLoc) {\n              return handle(entry.finallyLoc);\n            }\n\n          } else {\n            throw new Error(\"try statement without catch or finally\");\n          }\n        }\n      }\n    },\n\n    abrupt: function(type, arg) {\n      for (var i = this.tryEntries.length - 1; i >= 0; --i) {\n        var entry = this.tryEntries[i];\n        if (entry.tryLoc <= this.prev &&\n            hasOwn.call(entry, \"finallyLoc\") &&\n            this.prev < entry.finallyLoc) {\n          var finallyEntry = entry;\n          break;\n        }\n      }\n\n      if (finallyEntry &&\n          (type === \"break\" ||\n           type === \"continue\") &&\n          finallyEntry.tryLoc <= arg &&\n          arg <= finallyEntry.finallyLoc) {\n        // Ignore the finally entry if control is not jumping to a\n        // location outside the try/catch block.\n        finallyEntry = null;\n      }\n\n      var record = finallyEntry ? finallyEntry.completion : {};\n      record.type = type;\n      record.arg = arg;\n\n      if (finallyEntry) {\n        this.method = \"next\";\n        this.next = finallyEntry.finallyLoc;\n        return ContinueSentinel;\n      }\n\n      return this.complete(record);\n    },\n\n    complete: function(record, afterLoc) {\n      if (record.type === \"throw\") {\n        throw record.arg;\n      }\n\n      if (record.type === \"break\" ||\n          record.type === \"continue\") {\n        this.next = record.arg;\n      } else if (record.type === \"return\") {\n        this.rval = this.arg = record.arg;\n        this.method = \"return\";\n        this.next = \"end\";\n      } else if (record.type === \"normal\" && afterLoc) {\n        this.next = afterLoc;\n      }\n\n      return ContinueSentinel;\n    },\n\n    finish: function(finallyLoc) {\n      for (var i = this.tryEntries.length - 1; i >= 0; --i) {\n        var entry = this.tryEntries[i];\n        if (entry.finallyLoc === finallyLoc) {\n          this.complete(entry.completion, entry.afterLoc);\n          resetTryEntry(entry);\n          return ContinueSentinel;\n        }\n      }\n    },\n\n    \"catch\": function(tryLoc) {\n      for (var i = this.tryEntries.length - 1; i >= 0; --i) {\n        var entry = this.tryEntries[i];\n        if (entry.tryLoc === tryLoc) {\n          var record = entry.completion;\n          if (record.type === \"throw\") {\n            var thrown = record.arg;\n            resetTryEntry(entry);\n          }\n          return thrown;\n        }\n      }\n\n      // The context.catch method must only be called with a location\n      // argument that corresponds to a known catch block.\n      throw new Error(\"illegal catch attempt\");\n    },\n\n    delegateYield: function(iterable, resultName, nextLoc) {\n      this.delegate = {\n        iterator: values(iterable),\n        resultName: resultName,\n        nextLoc: nextLoc\n      };\n\n      if (this.method === \"next\") {\n        // Deliberately forget the last sent value so that we don't\n        // accidentally pass it on to the delegate.\n        this.arg = undefined;\n      }\n\n      return ContinueSentinel;\n    }\n  };\n})(\n  // Among the various tricks for obtaining a reference to the global\n  // object, this seems to be the most reliable technique that does not\n  // use indirect eval (which violates Content Security Policy).\n  typeof global === \"object\" ? global :\n  typeof window === \"object\" ? window :\n  typeof self === \"object\" ? self : this\n);\n","\"use strict\";\n\nclass Gzip extends require('./worker-messenger') {\n  constructor() {\n    super('js/gzip-worker.js');\n  }\n\n  compress(svgData) {\n    return this._requestResponse({\n      data: svgData\n    });\n  }\n}\n\nmodule.exports = Gzip;","'use strict';\nvar loadScripts = require(\"./load-scripts\");\nvar polyfillsNeeded = [];\n\nif (!window.Promise) { // IE :(\n  polyfillsNeeded.push('js/promise-polyfill.js');\n}\n\n// I'm sure user-agent sniffing will be fiiiiine\nif (/(iPhone|iPad);/.test(navigator.userAgent)) {\n  polyfillsNeeded.push('js/fastclick.js');\n}\n\nloadScripts(polyfillsNeeded, function() {\n  require('regenerator-runtime/runtime');\n  require('./utils').trackFocusMethod();\n  new (require('./main-controller'));\n}, function() {\n  console.error(\"Failed to load polyfills\");\n});\n","\"use strict\";\n\n// This is in its own file rather than utils.js because it's used for loading polyfills,\n// and promises, is one of the things that gets polyfilled, hence the callbacks\nmodule.exports = function loadScript(urls, yeyCallback, neyCallback) {\n  var count = urls.length;\n  var errored = false;\n\n  if (urls.length == 0) return yeyCallback();\n\n  urls.forEach(url => {\n    var script = document.createElement('script');\n    script.onload = function() {\n      if (errored) return;\n      if (!--count) yeyCallback();\n    };\n    script.onerror = function() {\n      if (errored) return;\n      neyCallback();\n      errored = true;\n    };\n    script.src = url;\n    document.head.insertBefore(script, document.head.firstChild);\n  });\n};","\"use strict\";\n\nvar utils = require('./utils');\nvar svgo = new (require('./svgo'));\nvar storage = require('../utils/storage');\n\nvar SvgFile = require('./svg-file');\n\nclass MainController {\n  constructor() {\n    this._container = null;\n\n    // ui components\n    this._mainUi = null;\n    this._outputUi = new (require('./ui/output'));\n    this._downloadButtonUi = new (require('./ui/download-button'));\n    this._copyButtonUi = new (require('./ui/copy-button'));\n    this._bgFillUi = new (require('./ui/bg-fill'));\n    this._resultsUi = new (require('./ui/results'));\n    this._settingsUi = new (require('./ui/settings'));\n    this._mainMenuUi = new (require('./ui/main-menu'));\n    this._toastsUi = new (require('./ui/toasts'));\n    this._dropUi = new (require('./ui/file-drop'));\n    this._preloaderUi = new (require('./ui/preloader'));\n    this._changelogUi = new (require('./ui/changelog'))(self.version);\n    this._resultsContainerUi = new (require('./ui/results-container'))(this._resultsUi);\n    this._viewTogglerUi = new (require('./ui/view-toggler'));\n\n    // ui events\n    this._settingsUi.on('change', _ => this._onSettingsChange());\n    this._mainMenuUi.on('svgDataLoad', e => this._onInputChange(e));\n    this._dropUi.on('svgDataLoad', e => this._onInputChange(e));\n    this._mainMenuUi.on('error', ({error}) => this._handleError(error));\n    this._viewTogglerUi.on('change', e => this._onViewSelectionChange(e));\n\n    // state\n    this._inputFilename = 'image.svg';\n    this._inputSvg = null;\n    this._cache = new (require('./results-cache'))(10);\n    this._latestCompressJobId = 0;\n    this._userHasInteracted = false;\n    this._reloading = false;\n\n    if ('serviceWorker' in navigator) {\n      navigator.serviceWorker.register('sw.js', {\n        scope: './'\n      }).then(registration => {\n        registration.addEventListener('updatefound', _ => this._onUpdateFound(registration));\n      });\n    }\n\n    // tell the user about the latest update\n    storage.get('last-seen-version').then(lastSeenVersion => {\n      if (lastSeenVersion) {\n        this._changelogUi.showLogFrom(lastSeenVersion);\n      }\n      storage.set('last-seen-version', self.version);\n    });\n\n    utils.domReady.then(_ => {\n      this._container = document.querySelector('.app-output');\n\n      // elements for intro anim\n      this._mainUi = new (require('./ui/main-ui'))(\n        document.querySelector('.toolbar'),\n        document.querySelector('.action-button-container'),\n        this._outputUi.container,\n        this._settingsUi.container\n      );\n\n      const actionContainer = document.querySelector('.action-button-container');\n      const minorActionContainer = document.querySelector('.minor-action-container');\n\n      minorActionContainer.appendChild(this._bgFillUi.container);\n\n      if (document.queryCommandSupported && document.queryCommandSupported('copy')) {\n        minorActionContainer.appendChild(this._copyButtonUi.container);\n      }\n\n      actionContainer.appendChild(this._downloadButtonUi.container);\n      document.querySelector('.output').appendChild(this._outputUi.container);\n      this._container.appendChild(this._toastsUi.container);\n      this._container.appendChild(this._dropUi.container);\n      document.querySelector('.menu-extra').appendChild(this._changelogUi.container);\n\n      // load previous settings\n      this._loadSettings();\n\n      // someone managed to hit the preloader, aww\n      if (this._preloaderUi.activated) {\n        this._toastsUi.show(\"Ready now!\", {\n          duration: 3000\n        });\n      }\n\n      /*\n      // for testing\n      async _ => {\n        this._onInputChange({\n          data: await utils.get('test-svgs/car-lite.svg'),\n          filename: 'car.svg'\n        });\n      }();\n      */\n    });\n  }\n\n  _onViewSelectionChange(event) {\n    this._outputUi.set(event.value);\n  }\n\n  _onUpdateFound(registration) {\n    var newWorker = registration.installing;\n\n    registration.installing.addEventListener('statechange', async _ => {\n      if (this._reloading) return;\n\n      // the very first activation!\n      // tell the user stuff works offline\n      if (newWorker.state == 'activated' && !navigator.serviceWorker.controller) {\n        this._toastsUi.show(\"Ready to work offline\", {\n          duration: 5000\n        });\n        return;\n      }\n\n      if (newWorker.state == 'activated' && navigator.serviceWorker.controller) {\n        // if the user hasn't interacted yet, do a sneaky reload\n        if (!this._userHasInteracted) {\n          this._reloading = true;\n          location.reload();\n          return;\n        }\n\n        // otherwise, show the user an alert\n        var toast = this._toastsUi.show(\"Update available\", {\n          buttons: ['reload', 'dismiss']\n        });\n\n        var answer = await toast.answer;\n\n        if (answer == 'reload') {\n          this._reloading = true;\n          location.reload();\n        }\n      }\n    });\n  }\n\n  _onSettingsChange() {\n    var settings = this._settingsUi.getSettings();\n    this._saveSettings(settings);\n    this._compressSvg(settings);\n  }\n\n  async _onInputChange(event) {\n    var settings = this._settingsUi.getSettings();\n    this._userHasInteracted = true;\n\n    try {\n      this._inputSvg = await svgo.load(event.data);\n      this._inputFilename = event.filename;\n    }\n    catch(e) {\n      e.message = \"Load failed: \" + e.message;\n      this._mainMenuUi.stopSpinner();\n      this._handleError(e);\n      return;\n    }\n\n    this._cache.purge();\n\n    var firstItteration = true;\n\n    const compressed = () => {\n      if (firstItteration) {\n        this._outputUi.reset();\n        this._mainUi.activate();\n        this._mainMenuUi.allowHide = true;\n        this._mainMenuUi.hide();\n        firstItteration = false;\n      }\n    }\n\n    this._compressSvg(settings, _ => compressed());\n\n    if (firstItteration) {\n      compressed();\n    }\n  }\n\n  _handleError(e) {\n    this._toastsUi.show(e.message);\n    console.error(e);\n  }\n\n  async _loadSettings() {\n    var settings = await storage.get('settings');\n    if (settings) this._settingsUi.setSettings(settings);\n  }\n\n  _saveSettings(settings) {\n    const copy = Object.assign({}, settings);\n    // doesn't make sense to retain the \"show original\" option\n    delete copy.original;\n    storage.set('settings', copy);\n  }\n\n  async _compressSvg(settings, itterationCallback = function(){}) {\n    var thisJobId = this._latestCompressJobId = Math.random();\n\n    await svgo.abortCurrent();\n\n    if (thisJobId != this._latestCompressJobId) {\n      // while we've been waiting, there's been a newer call\n      // to _compressSvg, we don't need to do anything\n      return;\n    }\n\n    if (settings.original) {\n      this._updateForFile(this._inputSvg, {\n        gzip: settings.gzip\n      });\n      return;\n    }\n\n    var cacheMatch = this._cache.match(settings.fingerprint);\n\n    if (cacheMatch) {\n      this._updateForFile(cacheMatch, {\n        compareToFile: this._inputSvg,\n        gzip: settings.gzip\n      });\n      return;\n    }\n\n    this._downloadButtonUi.working();\n\n    try {\n      var finalResultFile = await svgo.process(settings, resultFile => {\n        itterationCallback(resultFile);\n        this._updateForFile(resultFile, {\n          compareToFile: this._inputSvg,\n          gzip: settings.gzip\n        });\n      });\n      this._cache.add(settings.fingerprint, finalResultFile);\n    }\n    catch(e) {\n      if (e.message != \"abort\") { // TODO: should really be switching on error type\n        e.message = \"Minifying error: \" + e.message;\n        this._handleError(e);\n      }\n    }\n\n    this._downloadButtonUi.done();\n  }\n\n  async _updateForFile(svgFile, {compareToFile, gzip}) {\n    this._outputUi.update(svgFile);\n    this._downloadButtonUi.setDownload(this._inputFilename, svgFile);\n    this._copyButtonUi.setSVG(svgFile);\n\n    this._resultsUi.update({\n      comparisonSize: compareToFile && (await compareToFile.size({ compress: gzip })),\n      size: await svgFile.size({ compress: gzip })\n    });\n  }\n}\n\nmodule.exports = MainController;\n","\"use strict\";\n\nclass Prism extends require('./worker-messenger') {\n  constructor() {\n    super('js/prism-worker.js');\n  }\n\n  highlight(svgData) {\n    return this._requestResponse({\n      data: svgData\n    });\n  }\n}\n\nmodule.exports = Prism;","\"use strict\";\n\nclass ResultsCache {\n  constructor(size) {\n    this._size = size;\n    this.purge();\n  }\n\n  purge() {\n    this._fingerprints = [];\n    this._files = [];\n    this._index = 0;\n  }\n\n  add(fingerprint, file) {\n    var oldItem = this._files[this._index];\n\n    if (oldItem) {\n      // gc blob url\n      oldItem.release();\n    }\n\n    this._fingerprints[this._index] = fingerprint;\n    this._files[this._index] = file;\n\n    this._index = (this._index + 1) % this._size;\n  }\n\n  match(fingerprint) {\n    return this._files[this._fingerprints.indexOf(fingerprint)];\n  }\n}\n\nmodule.exports = ResultsCache;","\"use strict\";\n\nvar gzip = new (require('./gzip'));\n\nclass SvgFile {\n  constructor(text, width, height) {\n    this.text = text;\n    this._compressedSize = null;\n    this._url = '';\n    this._blob = null;\n    this.width = width;\n    this.height = height;\n  }\n\n  async size({ compress }) {\n    if (!compress) {\n      return this.text.length;\n    }\n\n    if (!this._compressedSize) {\n      this._compressedSize = gzip.compress(this.text)\n        .then(r => r.byteLength);\n    }\n\n    return this._compressedSize;\n  }\n\n  _create() {\n    // IE GCs blobs once they're out of reference, even if they\n    // have an object url, so we have to keep in in reference.\n    this._blob = new Blob([this.text], {type: \"image/svg+xml\"});\n    this._url = URL.createObjectURL(this._blob);\n  }\n\n  get blob() {\n    if (!this._blob) this._create();\n    return this._blob;\n  }\n\n  get url() {\n    if (!this._url) this._create();\n    return this._url;\n  }\n\n  release() {\n    if (!this._url) {\n      return;\n    }\n\n    this._blob = null;\n    URL.revokeObjectURL(this._url);\n  }\n}\n\nmodule.exports = SvgFile;","\"use strict\";\n\nvar SvgFile = require('./svg-file');\n\nclass Svgo extends require('./worker-messenger') {\n  constructor() {\n    super('js/svgo-worker.js');\n    this._multiPass = false;\n    this._abortOnNextItter = false;\n    this._currentJob = Promise.resolve();\n  }\n\n  load(svgText) {\n    return this._requestResponse({\n      action: 'load',\n      data: svgText\n    }).then(({width, height}) => {\n      return new SvgFile(svgText, width, height);\n    });\n  }\n\n  process(settings, itterationCallback) {\n    return this._currentJob = this.abortCurrent().then(async _ => {\n      this._abortOnNextItter = false;\n\n      var result = await this._requestResponse({\n        action: 'process',\n        settings\n      });\n\n      var resultFile = new SvgFile(result.data, result.dimensions.width, result.dimensions.height);\n\n      itterationCallback(resultFile);\n\n      if (settings.multipass) {\n        while (result = await this.nextPass()) {\n          if (this._abortOnNextItter) {\n            throw Error('abort');\n          }\n          resultFile = new SvgFile(result.data, result.dimensions.width, result.dimensions.height);\n          itterationCallback(resultFile);\n        }\n      }\n\n      // return final result\n      return resultFile;\n    });\n  }\n\n  nextPass() {\n    return this._requestResponse({\n      action: 'nextPass'\n    });\n  }\n\n  async abortCurrent() {\n    this._abortOnNextItter = true;\n\n    try {\n      await this._currentJob;\n    } catch(e){}\n  }\n}\n\nmodule.exports = Svgo;","var utils = require('../utils');\nvar Ripple = require('./ripple');\n\nclass BgFillButton {\n  constructor() {\n    this.container = utils.strToEl(\n      '<div role=\"button\" tabindex=\"0\" class=\"fillAB minor-floating-action-button\">' +\n        '<svg viewBox=\"0 0 24 24\" class=\"icon\">' +\n          '<title>Background Fill</title>' +\n          '<path d=\"M21.143 9.667c-.733-1.392-1.914-3.05-3.617-4.753-2.977-2.978-5.478-3.914-6.785-3.914-.414 0-.708.094-.86.246l-1.361 1.36c-1.899-.236-3.42.106-4.294.983-.876.875-1.164 2.159-.792 3.523.492 1.806 2.305 4.049 5.905 5.375.038.323.157.638.405.885.588.588 1.535.586 2.121 0s.588-1.533.002-2.119c-.588-.587-1.537-.588-2.123-.001l-.17.256c-2.031-.765-3.395-1.828-4.232-2.9l3.879-3.875c.496 2.73 6.432 8.676 9.178 9.178l-7.115 7.107c-.234.153-2.798-.316-6.156-3.675-3.393-3.393-3.175-5.271-3.027-5.498l1.859-1.856c-.439-.359-.925-1.103-1.141-1.689l-2.134 2.131c-.445.446-.685 1.064-.685 1.82 0 1.634 1.121 3.915 3.713 6.506 2.764 2.764 5.58 4.243 7.432 4.243.648 0 1.18-.195 1.547-.562l8.086-8.078c.91.874-.778 3.538-.778 4.648 0 1.104.896 1.999 2 1.999 1.105 0 2-.896 2-2 0-3.184-1.425-6.81-2.857-9.34zm-16.209-5.371c.527-.53 1.471-.791 2.656-.761l-3.209 3.206c-.236-.978-.049-1.845.553-2.445zm9.292 4.079l-.03-.029c-1.292-1.292-3.803-4.356-3.096-5.063.715-.715 3.488 1.521 5.062 3.096.862.862 2.088 2.247 2.937 3.458-1.717-1.074-3.491-1.469-4.873-1.462z\"/>' +\n        '</svg>' +\n      '</div>' +\n    '');\n\n    this._ripple = new Ripple();\n    this.container.appendChild(this._ripple.container);\n\n    this.container.addEventListener('click', event => this._onClick(event));\n  }\n\n  _onClick(event) {\n    // event adds a background color\n    if (this.container.classList.contains('active')) {\n      this.container.classList.remove('active');\n      this.setColor('transparent');\n    } else {\n      this.container.classList.add('active');\n      this.setColor('#f444fe');\n    }\n    this._ripple.animate();\n  }\n\n  setColor(color) {\n    document.documentElement.style.backgroundColor = color;\n  }\n}\n\nmodule.exports = BgFillButton;\n","var utils = require('../utils');\n\nclass Changelog {\n  constructor(loadedVersion) {\n    this.container = utils.strToEl('<section class=\"changelog\"></section>');\n    this._loadedVersion = loadedVersion;\n  }\n\n  async showLogFrom(lastLoadedVersion) {\n    if (lastLoadedVersion == this._loadedVersion) return;\n    var changelog = await utils.get('changelog.json').then(JSON.parse);\n    var startIndex = 0;\n    var endIndex = 0;\n    \n    for (var i = 0; i < changelog.length; i++) {\n      let entry = changelog[i];\n\n      if (entry.version === this._loadedVersion) {\n        startIndex = i;\n      }\n      else if (entry.version === lastLoadedVersion) {\n        break;\n      }\n      endIndex = i + 1;\n    }\n\n    var changeLis = changelog.slice(startIndex, endIndex).reduce((arr, entry) => {\n      return arr.concat(entry.changes);\n    }, []).map(function(change) {\n      return utils.escapeHtmlTag`<li>${change}</li>`;\n    });\n\n    this.container.appendChild(utils.strToEl('<h1>Updated!</h1>'));\n    this.container.appendChild(utils.strToEl(\n      '<ul>' +\n        changeLis.join('') +\n      '</ul>' +\n    ''));\n\n    await utils.domReady;\n    utils.transitionToClass(this.container);\n  }\n}\n\nmodule.exports = Changelog;","var utils = require('../utils');\nvar prism = new (require('../prism'));\n\nclass CodeOutput {\n  constructor() {\n    this.container = utils.strToEl(\n      '<div class=\"code-output\">' +\n        '<pre><code></code></pre>' +\n      '</div>' +\n    '');\n    this._codeEl = this.container.querySelector('code');\n  }\n\n  async setSvg(svgFile) {\n    this._codeEl.innerHTML = await prism.highlight(svgFile.text);\n  }\n\n  reset() {\n    this._codeEl.innerHTML = '';\n  }\n}\n\nmodule.exports = CodeOutput;","var utils = require('../utils');\nvar Ripple = require('./ripple');\n\nclass CopyButton {\n  constructor() {\n    this.container = utils.strToEl(\n      '<div role=\"button\" tabindex=\"0\" class=\"minor-floating-action-button\">' +\n        '<svg viewBox=\"0 0 24 24\" class=\"icon\">' +\n          '<title>Copy</title>' +\n          '<path d=\"M16 1H4C3 1 2 2 2 3v14h2V3h12V1zm3 4H8C7 5 6 6 6 7v14c0 1 1 2 2 2h11c1 0 2-1 2-2V7c0-1-1-2-2-2zm0 16H8V7h11v14z\"/>' +\n        '</svg>' +\n      '</div>' +\n    '');\n\n    this._ripple = new Ripple();\n    this.container.appendChild(this._ripple.container);\n\n    this._svgFile = null;\n    this._pre = document.createElement('pre');\n\n    this.container.addEventListener('click', event => this._onClick(event));\n  }\n\n  _onClick(event) {\n    this._pre.textContent = '![alt description](' + encodeURIComponent(this._svgFile.text).replace(/\\(/g, '%28')\n      .replace(/\\)/g, '%29') + ')';\n    document.body.appendChild(this._pre);\n    getSelection().removeAllRanges();\n    var range = document.createRange();\n    range.selectNode(this._pre);\n    window.getSelection().addRange(range);\n    document.execCommand('copy');\n    getSelection().removeAllRanges();\n    document.body.removeChild(this._pre);\n    this._ripple.animate();\n  }\n\n  setSVG(svgFile) {\n    this._svgFile = svgFile;\n  }\n}\n\nmodule.exports = CopyButton;\n","var utils = require('../utils');\nvar Spinner = require('./spinner');\n\nclass DownloadButton {\n  constructor() {\n    this.container = utils.strToEl(\n      '<a href=\"./\" class=\"floating-action-button\">' +\n        '<svg viewBox=\"0 0 24 24\" class=\"icon\">' +\n          '<title>Download output</title>' +\n          '<path d=\"M19 9h-4V3H9v6H5l7 7 7-7zM5 18v2h14v-2H5z\"/>' +\n        '</svg>' +\n      '</a>' +\n    '');\n    this._spinner = new Spinner();\n    this.container.appendChild(this._spinner.container);\n    this._svgFile = null;\n\n    // IE compat\n    if ('msSaveBlob' in navigator) {\n      this.container.addEventListener('click', event => {\n        event.preventDefault();\n        navigator.msSaveBlob(this._svgFile.blob, this.container.download);\n      });\n    }\n  }\n\n  setDownload(filename, svgFile) {\n    this.container.download = filename;\n    this.container.href = svgFile.url;\n\n    // for IE compat\n    this._svgFile = svgFile;\n  }\n\n  working() {\n    this._spinner.show(500);\n  }\n\n  done() {\n    this._spinner.hide();\n  }\n}\n\nmodule.exports = DownloadButton;","var utils = require('../utils');\n\nclass CodeOutput {\n  constructor() {\n    this.container = utils.strToEl(\n      '<div class=\"code-output\">' +\n        '<pre><code></code></pre>' +\n      '</div>' +\n    '');\n    this._codeEl = this.container.querySelector('code');\n  }\n\n  async setSvg(svgFile) {\n    console.log(svgFile)\n    this._codeEl.innerHTML = '![alt description](' + encodeURIComponent(svgFile.text).replace(/\\(/g, '%28')\n      .replace(/\\)/g, '%29') + ')';\n  }\n\n  reset() {\n    this._codeEl.innerHTML = '';\n  }\n}\n\nmodule.exports = CodeOutput;\n","var utils = require('../utils');\n\nfunction viewBox (svgStr) {\n  const viewBoxRegex = /<svg .*?viewBox=[\"'](-?[\\d\\.]+[, ]+-?[\\d\\.]+[, ][\\d\\.]+[, ][\\d\\.]+)[\"']/\n  const matches = svgStr.match(viewBoxRegex)\n  return matches && matches.length >= 2 ? matches[1] : null;\n}\n\nclass CodeOutput {\n  constructor() {\n    this.container = utils.strToEl(\n      '<div class=\"code-output\">' +\n        '<pre><code></code></pre>' +\n      '</div>' +\n    '');\n    this._codeEl = this.container.querySelector('code');\n  }\n\n  async setSvg(svgFile) {\n    this._codeEl.innerText = '[' + viewBox(svgFile.text) + '] ' + svgFile.text.replace(/<svg.*?>/, '').replace(/\\n/g, '').replace(/<\\/svg.*?>/, '');\n  }\n\n  reset() {\n    this._codeEl.innerHTML = '';\n  }\n}\n\nmodule.exports = CodeOutput;\n","var utils = require('../utils');\n\nclass FileDrop extends (require('events').EventEmitter) {\n  constructor() {\n    super();\n    this.container = utils.strToEl(\n      '<div class=\"drop-overlay\">Drop it!</div>' +\n    '');\n\n    // drag events are horrid\n    this._activeEnters = 0;\n    this._currentEnteredElement = null;\n\n    utils.domReady.then(_ => {\n      document.addEventListener('dragover', event => event.preventDefault());\n      document.addEventListener('dragenter', event => this._onDragEnter(event));\n      document.addEventListener('dragleave', event => this._onDragLeave(event));\n      document.addEventListener('drop', event => this._onDrop(event));\n    });\n  }\n\n  _onDragEnter(event) {\n    // firefox double-fires on window enter, this works around it\n    // https://bugzilla.mozilla.org/show_bug.cgi?id=1124645\n    if (this._currentEnteredElement == event.target) return;\n    this._currentEnteredElement = event.target;\n\n    if (!this._activeEnters++) {\n      utils.transitionToClass(this.container);\n    }\n  }\n\n  _onDragLeave(event) {\n    this._currentEnteredElement = null;\n\n    if (!--this._activeEnters) {\n      utils.transitionFromClass(this.container);\n    }\n  }\n\n  async _onDrop(event) {\n    event.preventDefault();\n\n    this._activeEnters = 0;\n    utils.transitionFromClass(this.container);\n    var file = event.dataTransfer.files[0];\n\n    this.emit('svgDataLoad', {\n      data: await utils.readFileAsText(file),\n      filename: file.name\n    });\n  }\n}\n\nmodule.exports = FileDrop;\n","\"use strict\";\n\nvar utils = require('../utils');\nvar Spinner = require('./spinner');\n\nclass MainMenu extends (require('events').EventEmitter) {\n  constructor() {\n    super();\n\n    this.allowHide = false;\n    this._spinner = new Spinner();\n\n    utils.domReady.then(_ => {\n      this.container = document.querySelector('.main-menu');\n      this._selectFileInput = document.querySelector('.select-file-input');\n      this._pasteInput = document.querySelector('.paste-input');\n      this._loadDemoBtn = document.querySelector('.load-demo');\n      this._selectFileBtn = document.querySelector('.select-file');\n      this._pasteLabel = document.querySelector('.menu-input');\n      this._overlay = this.container.querySelector('.overlay');\n      this._menu = this.container.querySelector('.menu');\n\n      document.querySelector('.menu-btn')\n        .addEventListener('click', e => this._onMenuButtonClick(e));\n\n      this._overlay.addEventListener('click', e => this._onOverlayClick(e));\n\n      this._selectFileBtn.addEventListener('click', e => this._onSelectFileClick(e));\n      this._loadDemoBtn.addEventListener('click', e => this._onLoadDemoClick(e));\n      this._selectFileInput.addEventListener('change', e => this._onFileInputChange(e));\n      this._pasteInput.addEventListener('input', e => this._onTextInputChange(e));\n    });\n  }\n\n  show() {\n    this.container.classList.remove('hidden');\n    utils.transitionFromClass(this._overlay, 'hidden');\n    utils.transitionFromClass(this._menu, 'hidden');\n  }\n\n  hide() {\n    if (!this.allowHide) {\n      return;\n    }\n    this.stopSpinner();\n    this.container.classList.add('hidden');\n    utils.transitionToClass(this._overlay, 'hidden');\n    utils.transitionToClass(this._menu, 'hidden');\n  }\n\n  stopSpinner() {\n    this._spinner.hide();\n  }\n\n  _onOverlayClick(event) {\n    event.preventDefault();\n    this.hide();\n  }\n\n  _onMenuButtonClick(event) {\n    event.preventDefault();\n    this.show();\n  }\n\n  _onTextInputChange(event) {\n    var val = this._pasteInput.value.trim();\n\n    if (val.indexOf('</svg>') != -1) {\n      this._pasteInput.value = '';\n      this._pasteInput.blur();\n\n      this._pasteLabel.appendChild(this._spinner.container);\n      this._spinner.show();\n\n      this.emit('svgDataLoad', {\n        data: val,\n        filename: 'image.svg'\n      });\n    }\n  }\n\n  _onSelectFileClick(event) {\n    event.preventDefault();\n    event.target.blur();\n    this._selectFileInput.click();\n  }\n\n  async _onFileInputChange(event) {\n    var file = this._selectFileInput.files[0];\n\n    if (!file) {\n      return;\n    }\n\n    this._selectFileBtn.appendChild(this._spinner.container);\n    this._spinner.show();\n\n    this.emit('svgDataLoad', {\n      data: await utils.readFileAsText(file),\n      filename: file.name\n    });\n  }\n\n  async _onLoadDemoClick(event) {\n    event.preventDefault();\n    event.target.blur();\n    this._loadDemoBtn.appendChild(this._spinner.container);\n    this._spinner.show();\n\n    try {\n      this.emit('svgDataLoad', {\n        data: await utils.get('test-svgs/car-lite.svg'),\n        filename: 'car.svg'\n      });\n    }\n    catch (error) {\n      this.stopSpinner();\n\n      var e;\n\n      if ('serviceWorker' in navigator && navigator.serviceWorker.controller) {\n        e = Error(\"Demo not available offline\");\n      }\n      else {\n        e = Error(\"Couldn't fetch demo SVG\");\n      }\n\n      this.emit('error', {\n        error: e\n      });\n    }\n  }\n}\n\nmodule.exports = MainMenu;","var utils = require('../utils');\n\nclass MainUi {\n  constructor(...elements) {\n    this._activated = false;\n    this._toActivate = elements;\n  }\n\n  activate() {\n    if (this._activated) return;\n    this._activated = true;\n\n    return Promise.all(\n      this._toActivate.map(el => utils.transitionToClass(el))\n    );\n  }\n}\n\nmodule.exports = MainUi;","var utils = require('../utils');\n\nclass MaterialSlider {\n  constructor(rangeEl) {\n    this.container = utils.strToEl(`\n      <div class=\"material-slider\">\n        <div class=\"track\">\n          <div class=\"track-on\"></div>\n          <div class=\"handle\">\n            <div class=\"arrow\"></div>\n            <div class=\"val\"></div>\n          </div>\n        </div>\n      </div>\n    `);\n\n    this.range = rangeEl;\n    this._handle = this.container.querySelector('.handle');\n    this._trackOn = this.container.querySelector('.track-on');\n    this._val = this.container.querySelector('.val');\n\n    rangeEl.parentNode.insertBefore(this.container, rangeEl);\n    this.container.insertBefore(rangeEl, this.container.firstChild);\n\n    // events\n    // thanks IE\n    var rangeChangeEvent = utils.isIe ? 'change' : 'input';\n\n    rangeEl.addEventListener(rangeChangeEvent, e => this._onInputChange(e));\n    this.range.addEventListener('mousedown', e => this._onRangeMouseDown(e));\n    this.range.addEventListener('touchstart', e => this._onRangeTouchStart(e));\n    this.range.addEventListener('touchend', e => this._onRangeTouchEnd(e));\n\n    this._setPosition();\n  }\n\n  _onRangeTouchStart(event) {\n    this.range.focus();\n  }\n\n  _onRangeTouchEnd(event) {\n    this.range.blur();\n  }\n\n  _onRangeMouseDown(event) {\n    this.range.classList.add('active');\n\n    var upListener = e => {\n      // IE requires me to do this. Pah.\n      requestAnimationFrame(_ => {\n        this.range.blur();\n      })\n      this.range.classList.remove('active');\n      document.removeEventListener('mouseup', upListener);\n    }\n    document.addEventListener('mouseup', upListener);\n  }\n\n  set value(newVal) {\n    this.range.value = newVal;\n    this._update();\n  }\n\n  _onInputChange() {\n    this._update();\n  }\n\n  _update() {\n    requestAnimationFrame(_ => this._setPosition());\n  }\n\n  _setPosition() {\n    var { min, max, value } = this.range;\n    var percent = (Number(value) - min) / (max - min);\n    this._trackOn.style.width = \n      this._handle.style.left = percent * 100 + \"%\";\n\n    this._val.textContent = value;\n  }\n}\n\nmodule.exports = MaterialSlider;","var utils = require('../utils');\n\nclass Output {\n  constructor() {\n    this.container = utils.strToEl(\n      '<div class=\"output-switcher\"></div>' +\n    '');\n\n    this._types = {\n      image: new (require('./svg-output')),\n      code: new (require('./code-output')),\n      enki_code: new (require('./enki-code-output')),\n      enki_topic_code: new (require('./enki-topic-code-output'))\n    };\n\n    this._svgFile = null;\n    this._switchQueue = Promise.resolve();\n    this.set('image', {noAnimate: true});\n  }\n\n  update(svgFile) {\n    this._svgFile = svgFile;\n    return this._types[this._activeType].setSvg(svgFile);\n  }\n\n  reset() {\n    this._types[this._activeType].reset();\n  }\n\n  set(type, {\n    noAnimate = false\n  }={}) {\n    return this._switchQueue = this._switchQueue.then(async _ => {\n      var toRemove;\n      var toAdd;\n\n      if (this._activeType) {\n        toRemove = this._types[this._activeType].container;\n      }\n\n      this._activeType = type;\n      toAdd = this._types[this._activeType].container;\n      this.container.appendChild(toAdd);\n\n      if (this._svgFile) await this.update(this._svgFile);\n\n      if (noAnimate) {\n        toAdd.classList.add('active');\n        if (toRemove) toRemove.classList.remove('active');\n      }\n      else {\n        let transitions = [\n          utils.transitionToClass(toAdd)\n        ];\n\n        if (toRemove) transitions.push(utils.transitionFromClass(toRemove));\n\n        await Promise.all(transitions);\n      }\n\n      if (toRemove) {\n        this.container.removeChild(toRemove);\n      }\n    })\n  }\n}\n\nmodule.exports = Output;\n","var utils = require('../utils');\n\nfunction getXY(obj) {\n  return {\n    x: obj.pageX,\n    y: obj.pageY\n  };\n}\n\nfunction touchDistance(touch1, touch2) {\n  var dx = Math.abs(touch2.x - touch1.x);\n  var dy = Math.abs(touch2.y - touch1.y);\n  return Math.sqrt(dx*dx + dy*dy);\n}\n\nfunction getMidpoint(point1, point2) {\n  return {\n    x: (point1.x + point2.x) / 2,\n    y: (point1.y + point2.y) / 2\n  };\n}\n\nfunction getPoints(event) {\n  if (event.touches) {\n    return Array.prototype.map.call(event.touches, getXY);\n  }\n  else {\n    return [getXY(event)];\n  }\n}\n\nclass PanZoom {\n  constructor(target, {\n    eventArea = target,\n    shouldCaptureFunc = function(el){ return true; }\n  }={}) {\n    this._target = target;\n    this._shouldCaptureFunc = shouldCaptureFunc;\n    this._dx = 0;\n    this._dy = 0;\n    this._scale = 1;\n    this._active = 0;\n    this._lastPoints = [];\n\n    // bind\n    [\n      '_onPointerDown',\n      '_onPointerMove',\n      '_onPointerUp'\n    ].forEach(funcName => {\n      this[funcName] = this[funcName].bind(this);\n    })\n\n    // bound events\n    eventArea.addEventListener('mousedown', this._onPointerDown);\n    eventArea.addEventListener('touchstart', this._onPointerDown);\n\n    // unbonud\n    eventArea.addEventListener('wheel', e => this._onWheel(e));\n  }\n\n  reset() {\n    this._dx = 0;\n    this._dy = 0;\n    this._scale = 1;\n    this._update();\n  }\n\n  _onWheel(event) {\n    if (!this._shouldCaptureFunc(event.target)) return;\n    event.preventDefault();\n\n    var boundingRect = this._target.getBoundingClientRect();\n    var delta = event.deltaY;\n\n    if (event.deltaMode === 1) { // 1 is \"lines\", 0 is \"pixels\"\n      // Firefox uses \"lines\" when mouse is connected\n      delta *= 15;\n    }\n\n    // stop mouse wheel producing huge values\n    delta = Math.max(Math.min(delta, 60), -60);\n\n    var scaleDiff = (delta / 300) + 1;\n\n    // avoid to-small values\n    if (this._scale * scaleDiff < 0.05) return;\n\n    this._scale *= scaleDiff;\n    this._dx -= (event.pageX - boundingRect.left) * (scaleDiff - 1);\n    this._dy -= (event.pageY - boundingRect.top) * (scaleDiff - 1);\n    this._update();\n  }\n\n  _onFirstPointerDown(event) {\n    document.addEventListener('mousemove', this._onPointerMove);\n    document.addEventListener('mouseup', this._onPointerUp);\n    document.addEventListener('touchmove', this._onPointerMove);\n    document.addEventListener('touchend', this._onPointerUp);\n  }\n\n  _onPointerDown(event) {\n    if (event.type == 'mousedown' && event.which != 1) return;\n    if (!this._shouldCaptureFunc(event.target)) return;\n    event.preventDefault();\n\n    this._lastPoints = getPoints(event);\n    this._active++;\n\n    if (this._active === 1) {\n      this._onFirstPointerDown(event);\n    }\n  }\n\n  _onPointerMove(event) {\n    event.preventDefault();\n    var points = getPoints(event);\n    var averagePoint = points.reduce(getMidpoint);\n    var averageLastPoint = this._lastPoints.reduce(getMidpoint);\n    var boundingRect = this._target.getBoundingClientRect();\n\n    this._dx += averagePoint.x - averageLastPoint.x;\n    this._dy += averagePoint.y - averageLastPoint.y;\n\n    if (points[1]) {\n      var scaleDiff = touchDistance(points[0], points[1]) / touchDistance(this._lastPoints[0], this._lastPoints[1]);\n      this._scale *= scaleDiff;\n      this._dx -= (averagePoint.x - boundingRect.left) * (scaleDiff - 1);\n      this._dy -= (averagePoint.y - boundingRect.top) * (scaleDiff - 1);\n    }\n\n    this._update();\n    this._lastPoints = points;\n  }\n\n  _update() {\n    this._target.style.WebkitTransform = this._target.style.transform\n      = 'translate3d(' + this._dx + 'px, ' + this._dy + 'px, 0) scale(' + this._scale + ')';\n  }\n\n  _onPointerUp(event) {\n    event.preventDefault();\n    this._active--;\n    this._lastPoints.pop();\n\n    if (this._active) {\n      this._lastPoints = getPoints(event);\n      return;\n    }\n\n    document.removeEventListener('mousemove', this._onPointerMove);\n    document.removeEventListener('mouseup', this._onPointerUp);\n    document.removeEventListener('touchmove', this._onPointerMove);\n    document.removeEventListener('touchend', this._onPointerUp);\n  }\n}\n\nmodule.exports = PanZoom;\n","var utils = require('../utils');\n\nclass Preloader {\n  constructor() {\n    utils.domReady.then(_ => {\n      this.container = document.querySelector('.preloader');\n      this.activated = this.container.classList.contains('active');\n      this.hide();\n    });\n  }\n\n  async hide() {\n    await utils.transitionFromClass(this.container, 'active');\n    this.container.style.display = 'none';\n  }\n}\n\nmodule.exports = Preloader;","var utils = require('../utils');\n\nclass ResultsContainer {\n  constructor(results) {\n    this._results = results;\n\n    utils.domReady.then(_ => {\n      this._mobileContainer = document.querySelector('.results-container-mobile');\n      this._container = document.querySelector('.results-container');\n      this._query = matchMedia('(min-width: 640px)');\n\n      this._query.addListener(_ => this._positionResults());\n      this._positionResults();\n    });\n  }\n\n  _positionResults() {\n    if (this._query.matches) {\n      this._container.appendChild(this._results.container);\n    }\n    else {\n      this._mobileContainer.appendChild(this._results.container);\n    }\n  }\n}\n\nmodule.exports = ResultsContainer;","var utils = require('../utils');\n\nfunction round(num, places) {\n  var mult = Math.pow(10, places);\n  return Math.floor(Math.round(num * mult)) / mult;\n}\n\nfunction humanSize(bytes) { // TODO: I'm sure there's a better version of this\n  if (bytes < 1024) {\n    return bytes + ' bytes';\n  }\n  else {\n    return round(bytes / 1024, 2) + 'k';\n  }\n}\n\nclass Results {\n  constructor() {\n    this.container = utils.strToEl(\n      '<div class=\"results\">' +\n        '<span class=\"size\"></span>' +\n        '<span class=\"diff\"></span>' +\n      '</div>' +\n    '');\n    this._sizeEl = this.container.querySelector('.size');\n    this._diffEl = this.container.querySelector('.diff');\n  }\n\n  update({size, comparisonSize}) {\n    this._sizeEl.textContent = humanSize(size);\n    \n    // just displaying a single size?\n    if (!comparisonSize) {\n      this._diffEl.textContent = '';\n      return;\n    }\n    else if (size == comparisonSize) {\n      this._diffEl.textContent = ' - no change';\n    }\n    else if (size > comparisonSize) {\n      this._diffEl.textContent = ' - ' + round(size / comparisonSize * 100 - 100, 2) + '% increase';\n    }\n    else {\n      this._diffEl.textContent = ' - ' + round(100 - size / comparisonSize * 100, 2) + '% saving';\n    }\n  }\n}\n\nmodule.exports = Results;","var utils = require('../utils');\n\nclass Ripple {\n  constructor() {\n    this.container = utils.strToEl('<div class=\"ripple\"></div>');\n  }\n\n  animate() {\n    this.container.classList.remove('animate');\n    this.container.offsetLeft;\n    this.container.classList.add('animate');\n  }\n}\n\nmodule.exports = Ripple;\n","\"use strict\"\n\nvar utils = require('../utils');\nvar Slider = require('./material-slider');\n\nclass Settings extends (require('events').EventEmitter) {\n  constructor() {\n    super();\n\n    this._throttleTimeout = null;\n\n    utils.domReady.then(_ => {\n      this._pluginInputs = utils.toArray(\n        document.querySelectorAll('.settings .plugins input')\n      );\n      this._globalInputs = utils.toArray(\n        document.querySelectorAll('.settings .global input')\n      );\n\n      // map real range elements to Slider instances\n      this._sliderMap = new WeakMap();\n\n      // enhance ranges\n      utils.toArray(\n        document.querySelectorAll('.settings input[type=range]')\n      ).forEach(el => this._sliderMap.set(el, new Slider(el)));\n\n      this.container = document.querySelector('.settings');\n      this._scroller = document.querySelector('.settings-scroller');\n\n      this.container.addEventListener('change', e => this._onChange(e));\n      this.container.addEventListener('input', e => this._onChange(e));\n      this._scroller.addEventListener('wheel', e => this._onMouseWheel(e));\n\n      // Stop double-tap text selection.\n      // This stops all text selection which is kinda sad.\n      // I think this code will bite me.\n      this._scroller.addEventListener('mousedown', e => {\n        if (utils.closest(e.target, 'input[type=range]')) return;\n        e.preventDefault();\n      });\n    });\n  }\n\n  _onMouseWheel(event) {\n    // Prevents bounce effect on desktop.\n    // Firefox uses DELTA_LINE on a mouse wheel, ignore it\n    if (!event.deltaMode) { // 0 is \"pixels\"\n      event.preventDefault();\n      event.currentTarget.scrollTop += event.deltaY;\n    }\n  }\n\n  _onChange(event) {\n    // IE fires the change event rather than input for ranges\n    if (!utils.isIe && event.type == 'change' && event.target.type == 'range') {\n      // for ranges, the change event is just a dupe of the\n      // final input event\n      return;\n    }\n\n    clearTimeout(this._throttleTimeout);\n\n    // throttle range\n    if (event.target.type == 'range') {\n      this._throttleTimeout = setTimeout(_ => this.emit('change'), 150);\n    }\n    else {\n      this.emit('change');\n    }\n  }\n\n  setSettings(settings) {\n    this._globalInputs.forEach(inputEl => {\n      if (inputEl.type == 'checkbox') {\n        inputEl.checked = settings[inputEl.name];\n      }\n      else if (inputEl.type == 'range') {\n        this._sliderMap.get(inputEl).value = settings[inputEl.name];\n      }\n    });\n\n    this._pluginInputs.forEach(inputEl => {\n      inputEl.checked = settings.plugins[inputEl.name];\n    });\n  }\n\n  getSettings() {\n    // fingerprint is used for cache lookups\n    var fingerprint = [];\n\n    var output = {\n      plugins: {}\n    };\n\n    this._globalInputs.forEach(function(inputEl) {\n      if (inputEl.name != 'gzip' && inputEl.name != 'original') {\n        if (inputEl.type == 'checkbox') {\n          fingerprint.push(Number(inputEl.checked));\n        }\n        else {\n          fingerprint.push('|' + inputEl.value + '|');\n        }\n      }\n\n      if (inputEl.type == 'checkbox') {\n        output[inputEl.name] = inputEl.checked;\n      }\n      else {\n        output[inputEl.name] = inputEl.value;\n      }\n    });\n\n    this._pluginInputs.forEach(function(inputEl) {\n      fingerprint.push(Number(inputEl.checked));\n      output.plugins[inputEl.name] = inputEl.checked;\n    });\n\n    output.fingerprint = fingerprint.join();\n\n    return output;\n  }\n}\n\nmodule.exports = Settings;\n","var utils = require('../utils');\n\nclass Spinner {\n  constructor() {\n    this.container = utils.strToEl(\n      '<div class=\"spinner\">' +\n        '<div class=\"spinner-container\">' +\n          '<div class=\"spinner-layer\">' +\n            '<div class=\"circle-clipper left\">' +\n              '<div class=\"circle\"></div>' +\n            '</div>' +\n            '<div class=\"gap-patch\">' +\n              '<div class=\"circle\"></div>' +\n            '</div>' +\n            '<div class=\"circle-clipper right\">' +\n              '<div class=\"circle\"></div>' +\n            '</div>' +\n          '</div>' +\n        '</div>' +\n      '</div>' +\n    '');\n\n    this._showTimeout = null;\n    this.container.style.display = 'none';\n\n    var animEndListener = event => {\n      if (event.target == this.container) {\n        this.container.style.display = 'none';\n      }\n    };\n\n    this.container.addEventListener('webkitAnimationEnd', animEndListener);\n    this.container.addEventListener('animationend', animEndListener);\n  }\n\n  show(delay = 300) {\n    clearTimeout(this._showTimeout);\n    this.container.style.display = 'none';\n    this.container.classList.remove('cooldown');\n    this._showTimeout = setTimeout(_ => {\n      this.container.style.display = '';\n    }, delay);\n  }\n\n  hide() {\n    clearTimeout(this._showTimeout);\n    this.container.classList.add('cooldown');\n  }\n}\n\nmodule.exports = Spinner;","var utils = require('../utils');\nvar PanZoom = require('./pan-zoom');\n\nclass SvgOutput {\n  constructor() {\n    // IE doesn't support datauris or blob urls in iframe :(\n    // TODO: feature detect this & report bug\n    var frameHtml = utils.isIe ?\n      '<img class=\"svg-frame\">' :\n      '<iframe class=\"svg-frame\" sandbox=\"allow-scripts\"></iframe>';\n\n    this.container = utils.strToEl(\n      '<div class=\"svg-output\">' +\n        '<div class=\"svg-container\">' +\n          frameHtml +\n        '</div>' +\n        // Stop touches going into the iframe.\n        // pointer-events + touch + iframe doesn't work in Chrome :(\n        '<div class=\"svg-clickjacker\"></div>' +\n      '</div>' +\n    '');\n\n\n    this._svgFrame = this.container.querySelector('.svg-frame');\n    this._svgFrame.scrolling = 'no';\n\n    this._svgContainer = this.container.querySelector('.svg-container');\n\n    utils.domReady.then(_ => {\n      this._panZoom = new PanZoom(this._svgContainer, {\n        eventArea: this.container\n      });\n    });\n  }\n\n  setSvg(svgFile) {\n    // I would rather use blob urls, but they don't work in Firefox\n    // All the internal refs break.\n    // https://bugzilla.mozilla.org/show_bug.cgi?id=1125667\n    var nextLoad = this._nextLoadPromise();\n    this._svgFrame.src = \"data:image/svg+xml;charset=utf-8,\" + encodeURIComponent(svgFile.text);\n    this._svgFrame.width = svgFile.width;\n    this._svgFrame.height = svgFile.height;\n    return nextLoad;\n  }\n\n  reset() {\n    this._svgFrame.src = \"about:blank\";\n    this._panZoom.reset();\n  }\n\n  _nextLoadPromise() {\n    return new Promise(resolve => {\n      var onload = _ => {\n        this._svgFrame.removeEventListener('load', onload);\n        resolve();\n      }\n      this._svgFrame.addEventListener('load', onload);\n    });\n  }\n}\n\nmodule.exports = SvgOutput;\n","var utils = require('../utils');\n\nclass Toast {\n  constructor(message, duration, buttons) {\n    this.container = utils.strToEl(\n      '<div class=\"toast\"><div class=\"toast-content\"></div></div>' +\n    '');\n\n    this._content = this.container.querySelector('.toast-content');\n    this._content.textContent = message;\n    this._answerResolve;\n    this._hideTimeout;\n\n    this.answer = new Promise(r => this._answerResolve = r);\n\n    buttons.forEach(button => {\n      var buttonEl = document.createElement('button');\n      buttonEl.className = 'unbutton';\n      buttonEl.textContent = button;\n      buttonEl.addEventListener('click', event => {\n        this._answerResolve(button);\n      });\n      this.container.appendChild(buttonEl);\n    });\n\n    if (duration) {\n      this._hideTimeout = setTimeout(_ => this.hide(), duration);\n    }\n  }\n\n  hide() {\n    clearTimeout(this._hideTimeout);\n    this._answerResolve();\n    return utils.transitionToClass(this.container, 'hide');\n  }\n}\n\nclass Toasts {\n  constructor() {\n    this.container = utils.strToEl(\"<div class='toasts'></div>\");\n  }\n\n  show(message, {\n    duration = 0,\n    buttons = ['dismiss']\n  }={}) {\n    var toast = new Toast(message, duration, buttons);\n    this.container.appendChild(toast.container);\n\n    toast.answer.then(_ => toast.hide()).then(_ => {\n      this.container.removeChild(toast.container);\n    });\n\n    return toast;\n  }\n}\n\nmodule.exports = Toasts;","var utils = require('../utils');\n\nclass ViewToggler extends (require('events').EventEmitter) {\n  constructor() {\n    super();\n    this.container = null;\n\n    utils.domReady.then(_ => {\n      this.container = document.querySelector('.view-toggler');\n\n      // stop browsers remembering previous form state\n      this.container.output[0].checked = true;\n\n      this.container.addEventListener('change', e => this._onChange(e));\n    });\n  }\n\n  _onChange(event) {\n    var value = this.container.output.value;\n\n    if (!value) { // some browsers don't support the nice shortcut above (eg Safari)\n      value = utils.toArray(this.container.output).reduce((value, input) => {\n        return value || (input.checked ? input.value : '');\n      }, '');\n    }\n\n    this.emit(\"change\", {\n      value: value\n    });\n  }\n}\n\nmodule.exports = ViewToggler;","\"use strict\";\n\nexports.toArray = function toArray(obj) {\n  return Array.prototype.slice.apply(obj);\n};\n\nexports.domReady = new Promise(function(resolve) {\n  function checkState() {\n    if (document.readyState != 'loading') {\n      resolve();\n    }\n  }\n  document.addEventListener('readystatechange', checkState);\n  checkState();\n});\n\nexports.get = function get(url) {\n  return new Promise(function(resolve, reject) {\n    var req = new XMLHttpRequest();\n    req.open('GET', url);\n\n    req.onload = function() {\n      if (req.status == 200) {\n        resolve(req.response);\n      }\n      else {\n        reject(Error(req.statusText));\n      }\n    };\n    req.onerror = function() {\n      reject(Error(\"Network Error\"));\n    };\n\n    req.send();\n  });\n};\n\nexports.strToEl = (function () {\n  var tmpEl = document.createElement('div');\n  return function (str) {\n    var r;\n    tmpEl.innerHTML = str;\n    r = tmpEl.children[0];\n    while (tmpEl.firstChild) {\n      tmpEl.removeChild(tmpEl.firstChild);\n    }\n    return r;\n  };\n}());\n\nvar entityMap = {\n  \"&\": \"&amp;\",\n  \"<\": \"&lt;\",\n  \">\": \"&gt;\",\n  '\"': '&quot;',\n  \"'\": '&#39;',\n  \"/\": '&#x2F;'\n};\n\nexports.escapeHtml = function escapeHTML(string) {\n  return String(string).replace(/[&<>\"'\\/]/g, function (s) {\n    return entityMap[s];\n  });\n};\n\nexports.escapeHtmlTag = function(strings, ...values) {\n  values = values.map(exports.escapeHtml);\n  return strings.reduce((str, val, i) => str += val + (values[i] || ''), '');\n};\n\nexports.readFileAsText = function readFileAsText(file) {\n  return new Promise(function(resolve, reject) {\n    var reader = new FileReader();\n    reader.readAsText(file);\n    reader.onerror = function() {\n      reject(reader.error);\n    };\n    reader.onload = function() {\n      resolve(reader.result);\n    };\n  });\n}\n\nfunction transitionClassFunc({removeClass = false}={}) {\n  return function(el, className = 'active', transitionClass = 'transition') {\n    if (removeClass) {\n      if (!el.classList.contains(className)) return Promise.resolve();\n    }\n    else {\n      if (el.classList.contains(className)) return Promise.resolve();\n    }\n\n    return new Promise(resolve => {\n      var listener = event => {\n        if (event.target != el) return;\n        el.removeEventListener('webkitTransitionEnd', listener);\n        el.removeEventListener('transitionend', listener);\n        el.classList.remove(transitionClass);\n        resolve();\n      };\n\n      el.classList.add(transitionClass);\n\n      requestAnimationFrame(_ => {\n        el.addEventListener('webkitTransitionEnd', listener);\n        el.addEventListener('transitionend', listener);\n        el.classList[removeClass ? 'remove' : 'add'](className);\n      });\n    });\n  }\n}\n\nexports.transitionToClass = transitionClassFunc();\nexports.transitionFromClass = transitionClassFunc({removeClass: true});\n\nexports.closest = function(el, selector) {\n  if (el.closest) {\n    return el.closest(selector);\n  }\n\n  var matches = el.matches || el.msMatchesSelector;\n\n  do {\n    if (el.nodeType != 1) continue;\n    if (matches.call(el, selector)) return el;\n  } while (el = el.parentNode);\n\n  return undefined;\n};\n\n// I hate that I have to do this\nexports.isIe = (navigator.userAgent.indexOf('Trident/') !== -1);\n\nexports.loadCss = function(url) {\n  return new Promise((resolve, reject) => {\n    var link = document.createElement('link');\n    link.rel = 'stylesheet';\n    link.href = url;\n\n    link.addEventListener('load', _ => resolve());\n    link.addEventListener('error', _ => reject());\n\n    document.head.appendChild(link);\n  });\n};\n\nexports.trackFocusMethod = function() {\n  var focusMethod = 'mouse';\n\n  document.body.addEventListener('focus', event => {\n    event.target.classList.add(focusMethod == 'key' ? 'key-focused' : 'mouse-focused');\n  }, true);\n\n  document.body.addEventListener('blur', event => {\n    event.target.classList.remove('key-focused');\n    event.target.classList.remove('mouse-focused');\n  }, true);\n\n  document.body.addEventListener('keydown', event => {\n    focusMethod = 'key';\n  }, true);\n\n  document.body.addEventListener('mousedown', event => {\n    focusMethod = 'mouse';\n  }, true);\n};\n","\"use strict\";\n\nclass WorkerMessenger {\n  constructor(url) {\n    this._requestId = 0;\n    this._worker = new Worker(url);\n\n    // worker jobs awaiting response {callId: [resolve, reject]}\n    this._pending = {};\n\n    this._worker.onmessage = event => this._onMessage(event);\n  }\n\n  _onMessage(event) {\n    if (!event.data.id) {\n      console.log(\"Unexpected message\", event);\n      return;\n    }\n\n    var resolver = this._pending[event.data.id];\n\n    if (!resolver) {\n      console.log(\"No resolver for\", event);\n      return;\n    }\n\n    delete this._pending[event.data.id];\n\n    if (event.data.error) {\n      resolver[1](new Error(event.data.error));\n      return;\n    }\n\n    resolver[0](event.data.result);\n  }\n\n  _requestResponse(message) {\n    var workerMessenger = this;\n    var requestId = ++this._requestId;\n    message.id = requestId;\n\n    return new Promise(function(resolve, reject) {\n      workerMessenger._pending[requestId] = [resolve, reject];\n      workerMessenger._worker.postMessage(message);\n    });\n  }\n}\n\nmodule.exports = WorkerMessenger;","'use strict';\n\nfunction promisifyRequest(obj) {\n  return new Promise(function(resolve, reject) {\n    function onsuccess(event) {\n      resolve(obj.result);\n      unlisten();\n    }\n    function onerror(event) {\n      reject(obj.error);\n      unlisten();\n    }\n    function unlisten() {\n      obj.removeEventListener('complete', onsuccess);\n      obj.removeEventListener('success', onsuccess);\n      obj.removeEventListener('error', onerror);\n      obj.removeEventListener('abort', onerror);\n    }\n    obj.addEventListener('complete', onsuccess);\n    obj.addEventListener('success', onsuccess);\n    obj.addEventListener('error', onerror);\n    obj.addEventListener('abort', onerror);\n  });\n}\n\nclass IndexedDouchebag {\n  constructor(name, version, upgradeCallback) {\n    var request = indexedDB.open(name, version);\n    this.ready = promisifyRequest(request);\n    request.onupgradeneeded = function(event) {\n      upgradeCallback(request.result, event.oldVersion);\n    };\n  }\n\n  transaction(stores, modeOrCallback, callback) {\n    return this.ready.then(function(db) {\n      var mode = 'readonly';\n\n      if (modeOrCallback.apply) {\n        callback = modeOrCallback;\n      }\n      else if (modeOrCallback) {\n        mode = modeOrCallback;\n      }\n\n      var tx = db.transaction(stores, mode);\n      var val = callback(tx, db);\n      var promise = promisifyRequest(tx);\n      var readPromise;\n\n      if (!val) {\n        return promise;\n      }\n\n      if (val[0] && 'result' in val[0]) {\n        readPromise = Promise.all(val.map(promisifyRequest));\n      }\n      else {\n        readPromise = promisifyRequest(val);\n      }\n\n      return promise.then(function() {\n        return readPromise;\n      });\n    });\n  };\n\n  get(store, key) {\n    return this.transaction(store, function(tx) {\n      return tx.objectStore(store).get(key);\n    });\n  };\n\n  put(store, key, value) {\n    return this.transaction(store, 'readwrite', function(tx) {\n      tx.objectStore(store).put(value, key);\n    });\n  };\n\n  delete(store, key) {\n    return this.transaction(store, 'readwrite', function(tx) {\n      tx.objectStore(store).delete(key);\n    });\n  };\n}\n\nmodule.exports = IndexedDouchebag;","var Idb = require('./indexeddouchbag');\nvar idb;\n\n// avoid opening idb until first call\nfunction getIdb() {\n  if (!idb) {\n    idb = new Idb('svgo-keyval', 1, function(db) {\n      db.createObjectStore('keyval');\n    });\n  }\n  return idb;\n}\n\nif (self.indexedDB) {\n  module.exports = {\n    get: key => getIdb().get('keyval', key),\n    set: (key, val) => getIdb().put('keyval', key, val),\n    delete: key => getIdb().delete('keyval', key)\n  };\n}\nelse {\n  module.exports = {\n    get: key => Promise.resolve(localStorage.getItem(key)),\n    set: (key, val) => Promise.resolve(localStorage.setItem(key, val)),\n    delete: key => Promise.resolve(localStorage.removeItem(key))\n  };\n}"],"preExistingComment":"//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIm5vZGVfbW9kdWxlcy9icm93c2VyLXBhY2svX3ByZWx1ZGUuanMiLCJub2RlX21vZHVsZXMvZXZlbnRzL2V2ZW50cy5qcyIsIm5vZGVfbW9kdWxlcy9yZWdlbmVyYXRvci1ydW50aW1lL3J1bnRpbWUuanMiLCJzcmMvanMvcGFnZS9nemlwLmpzIiwic3JjL2pzL3BhZ2UvaW5kZXguanMiLCJzcmMvanMvcGFnZS9sb2FkLXNjcmlwdHMuanMiLCJzcmMvanMvcGFnZS9tYWluLWNvbnRyb2xsZXIuanMiLCJzcmMvanMvcGFnZS9wcmlzbS5qcyIsInNyYy9qcy9wYWdlL3Jlc3VsdHMtY2FjaGUuanMiLCJzcmMvanMvcGFnZS9zdmctZmlsZS5qcyIsInNyYy9qcy9wYWdlL3N2Z28uanMiLCJzcmMvanMvcGFnZS91aS9iZy1maWxsLmpzIiwic3JjL2pzL3BhZ2UvdWkvY2hhbmdlbG9nLmpzIiwic3JjL2pzL3BhZ2UvdWkvY29kZS1vdXRwdXQuanMiLCJzcmMvanMvcGFnZS91aS9jb3B5LWJ1dHRvbi5qcyIsInNyYy9qcy9wYWdlL3VpL2Rvd25sb2FkLWJ1dHRvbi5qcyIsInNyYy9qcy9wYWdlL3VpL2Vua2ktY29kZS1vdXRwdXQuanMiLCJzcmMvanMvcGFnZS91aS9lbmtpLXRvcGljLWNvZGUtb3V0cHV0LmpzIiwic3JjL2pzL3BhZ2UvdWkvZmlsZS1kcm9wLmpzIiwic3JjL2pzL3BhZ2UvdWkvbWFpbi1tZW51LmpzIiwic3JjL2pzL3BhZ2UvdWkvbWFpbi11aS5qcyIsInNyYy9qcy9wYWdlL3VpL21hdGVyaWFsLXNsaWRlci5qcyIsInNyYy9qcy9wYWdlL3VpL291dHB1dC5qcyIsInNyYy9qcy9wYWdlL3VpL3Bhbi16b29tLmpzIiwic3JjL2pzL3BhZ2UvdWkvcHJlbG9hZGVyLmpzIiwic3JjL2pzL3BhZ2UvdWkvcmVzdWx0cy1jb250YWluZXIuanMiLCJzcmMvanMvcGFnZS91aS9yZXN1bHRzLmpzIiwic3JjL2pzL3BhZ2UvdWkvcmlwcGxlLmpzIiwic3JjL2pzL3BhZ2UvdWkvc2V0dGluZ3MuanMiLCJzcmMvanMvcGFnZS91aS9zcGlubmVyLmpzIiwic3JjL2pzL3BhZ2UvdWkvc3ZnLW91dHB1dC5qcyIsInNyYy9qcy9wYWdlL3VpL3RvYXN0cy5qcyIsInNyYy9qcy9wYWdlL3VpL3ZpZXctdG9nZ2xlci5qcyIsInNyYy9qcy9wYWdlL3V0aWxzLmpzIiwic3JjL2pzL3BhZ2Uvd29ya2VyLW1lc3Nlbmdlci5qcyIsInNyYy9qcy91dGlscy9pbmRleGVkZG91Y2hiYWcuanMiLCJzcmMvanMvdXRpbHMvc3RvcmFnZS5qcyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQTtBQ3FCQSxRQUFTLGdCQUNQLEtBQUssUUFBVSxLQUFLLFlBQ3BCLEtBQUssY0FBZ0IsS0FBSyxtQkFBaUIsR0F3UTdDLFFBQVMsWUFBVyxHQUNsQixNQUFzQixrQkFBUixHQUdoQixRQUFTLFVBQVMsR0FDaEIsTUFBc0IsZ0JBQVIsR0FHaEIsUUFBUyxVQUFTLEdBQ2hCLE1BQXNCLGdCQUFSLElBQTRCLE9BQVIsRUFHcEMsUUFBUyxhQUFZLEdBQ25CLFdBQWUsS0FBUixFQW5SVCxPQUFPLFFBQVUsYUFHakIsYUFBYSxhQUFlLGFBRTVCLGFBQWEsVUFBVSxZQUFVLEdBQ2pDLGFBQWEsVUFBVSxrQkFBZ0IsR0FJdkMsYUFBYSxvQkFBc0IsR0FJbkMsYUFBYSxVQUFVLGdCQUFrQixTQUFTLEdBQ2hELElBQUssU0FBUyxJQUFNLEVBQUksR0FBSyxNQUFNLEdBQ2pDLEtBQU0sV0FBVSw4QkFFbEIsT0FEQSxNQUFLLGNBQWdCLEVBQ2QsTUFHVCxhQUFhLFVBQVUsS0FBTyxTQUFTLEdBQ3JDLEdBQUksR0FBSSxFQUFTLEVBQUssRUFBTSxFQUFHLENBTS9CLElBSkssS0FBSyxVQUNSLEtBQUssWUFHTSxVQUFULEtBQ0csS0FBSyxRQUFRLE9BQ2IsU0FBUyxLQUFLLFFBQVEsU0FBVyxLQUFLLFFBQVEsTUFBTSxRQUFTLENBRWhFLElBREEsRUFBSyxVQUFVLGFBQ0csT0FDaEIsS0FBTSxFQUdOLElBQUks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ZCxNQUFPLE1BQUssWUFBWSxFQUFPLFlBQWEsU0FBUyxHQUNuRCxFQUFHLFlBQVksR0FBTyxJQUFJLEVBQU8sb0NBSTlCLEVBQU8sR0FDWixNQUFPLE1BQUssWUFBWSxFQUFPLFlBQWEsU0FBUyxHQUNuRCxFQUFHLFlBQVksR0FBTyxPQUFPLGFBS25DLFFBQU8sUUFBVTs7O1lDbEZqQixTQUFTLFVBTVAsTUFMSyxPQUNILElBQU0sR0FBSSxLQUFJLGNBQWUsRUFBRyxTQUFTLEdBQ3ZDLEVBQUcsa0JBQWtCLGFBR2xCLElBVlQsR0FBSSxLQUFNLFFBQVEscUJBQ2QsR0FZQSxNQUFLLFVBQ1AsT0FBTyxTQUNMLElBQUssU0FBQSxHQUFBLE1BQU8sVUFBUyxJQUFJLFNBQVUsSUFDbkMsSUFBSyxTQUFDLEVBQUssR0FBTixNQUFjLFVBQVMsSUFBSSxTQUFVLEVBQUssSUFDL0MsT0FBUSxTQUFBLEdBQUEsTUFBTyxVQUFTLE9BQU8sU0FBVSxLQUkzQyxPQUFPLFNBQ0wsSUFBSyxTQUFBLEdBQUEsTUFBTyxTQUFRLFFBQVEsYUFBYSxRQUFRLEtBQ2pELElBQUssU0FBQyxFQUFLLEdBQU4sTUFBYyxTQUFRLFFBQVEsYUFBYSxRQUFRLEVBQUssS0FDN0QsT0FBUSxTQUFBLEdBQUEsTUFBTyxTQUFRLFFBQVEsYUFBYSxXQUFXIiwiZmlsZSI6ImdlbmVyYXRlZC5qcyIsInNvdXJjZVJvb3QiOiIiLCJzb3VyY2VzQ29udGVudCI6WyIoZnVuY3Rpb24gZSh0LG4scil7ZnVuY3Rpb24gcyhvLHUpe2lmKCFuW29dKXtpZighdFtvXSl7dmFyIGE9dHlwZW9mIHJlcXVpcmU9PVwiZnVuY3Rpb25cIiYmcmVxdWlyZTtpZighdSYmYSlyZXR1cm4gYShvLCEwKTtpZihpKXJldHVybiBpKG8sITApO3ZhciBmPW5ldyBFcnJvcihcIkNhbm5vdCBmaW5kIG1vZHVsZSAnXCIrbytcIidcIik7dGhyb3cgZi5jb2RlPVwiTU9EVUxFX05PVF9GT1VORFwiLGZ9dmFyIGw9bltvXT17ZXhwb3J0czp7fX07dFtvXVswXS5jYWxsKGwuZXhwb3J0cyxmdW5jdGlvbihlKXt2YXIgbj10W29dWzFdW2VdO3JldHVybiBzKG4/bjplKX0sbCxsLmV4cG9ydHMsZSx0LG4scil9cmV0dXJuIG5bb10uZXhwb3J0c312YXIgaT10eXBlb2YgcmVxdWlyZT09XCJmdW5jdGlvblwiJiZyZXF1aXJlO2Zvcih2YXIgbz0wO288ci5sZW5ndGg7bysrKXMocltvXSk7cmV0dXJuIHN9KSIsIi8vIENvcHlyaWdodCBKb3llbnQsIEluYy4gYW5kIG90aGVyIE5vZGUgY29udHJpYnV0b3JzLlxuLy9cbi8vIFBlcm1pc3Npb24gaXMgaGVyZWJ5IGdyYW50ZWQsIGZyZWUgb2YgY2hhcmdlLCB0byBhbnkgcGVyc29uIG9idGFpbmluZyBhXG4vLyBjb3B5IG9mIHRoaXMgc29mdHdhcmUgYW5kIGFzc29jaWF0ZWQgZG9jdW1lbnRhdGlvbiBmaWxlcyAodGhlXG4vLyBcIlNvZnR3YXJlXCIpLCB0byBkZWFsIGluIHRoZSBTb2Z0d2FyZSB3aXRob3V0IHJlc3RyaWN0aW9uLCBpbmNsdWRpbmdcbi8vIHdpdGhvdXQgbGltaXRhdGlvbiB0aGUgcmlnaHRzIHRvIHVzZSwgY29weSwgbW9kaWZ5LCBtZXJnZSwgcHVibGlzaCxcbi8vIGRpc3RyaWJ1dGUsIHN1YmxpY2Vuc2UsIGFuZC9vciBzZWxsIGNvcGllcyBvZiB0aGUgU29mdHdhcmUsIGFuZCB0byBwZXJtaXRcbi8vIHBlcnNvbnMgdG8gd2hvbSB0aGUgU29mdHdhcmUgaXMgZnVybmlzaGVkIHRvIGRvIHNvLCBzdWJqZWN0IHRvIHRoZVxuLy8gZm9sbG93aW5nIGNvbmRpdGlvbnM6XG4vL1xuLy8gVGhlIGFib3ZlIGNvcHlyaWdodCBub3RpY2UgYW5kIHRoaXMgcGVybWlzc2lvbiBub3RpY2Ugc2hhbGwgYmUgaW5jbHVkZWRcbi8vIGluIGFsbCBjb3BpZXMgb3Igc3Vic3RhbnRpYWwgcG9ydGlvbnMgb2YgdGhlIFNvZnR3YXJlLlxuLy9cbi8vIFRIRSBTT0ZUV0FSRSBJUyBQUk9WSURFRCBcIkFTIElTXCIsIFdJVEhPVVQgV0FSUkFOVFkgT0YgQU5ZIEtJTkQsIEVYUFJFU1Ncbi8vIE9SIElNUExJRUQsIElOQ0xVRElORyBCVVQgTk9UIExJTUlURUQgVE8gVEhFIFdBUlJBTlRJRVMgT0Zcbi8vIE1FUkNIQU5UQUJJTElUWSwgRklUTkVTUyBGT1IgQSBQQVJUSUNVTEFSIFBVUlBPU0UgQU5EIE5PTklORlJJTkdFTUVOVC4gSU5cbi8vIE5PIEVWRU5UIFNIQUxMIFRIRSBBVVRIT1JTIE9SIENPUFlSSUdIVCBIT0xERVJTIEJFIExJQUJMRSBGT1IgQU5ZIENMQUlNLFxuLy8gREFNQUdFUyBPUiBPVEhFUiBMSUFCSUxJVFksIFdIRVRIRVIgSU4gQU4gQUNUSU9OIE9GIENPTlRSQUNULCBUT1JUIE9SXG4vLyBPVEhFUldJU0UsIEFSSVNJTkcgRlJPTSwgT1VUIE9GIE9SIElOIENPTk5FQ1RJT04gV0lUSCBUSEUgU09GVFdBUkUgT1IgVEhFXG4vLyBVU0UgT1IgT1RIRVIgREVBTElOR1MgSU4gVEhFIFNPRlRXQVJFLlxuXG5mdW5jdGlvbiBFdmVudEVtaXR0ZXIoKSB7XG4gIHRoaXMuX2V2ZW50cyA9IHRoaXMuX2V2ZW50cyB8fCB7fTtcbiAgdGhpcy5fbWF4TGlzdGVuZXJzID0gdGhpcy5fbWF4TGlzdGVuZXJzIHx8IHVuZGVmaW5lZDtcbn1cbm1vZHVsZS5leHBvcnRzID0gRXZlbnRFbWl0dGVyO1xuXG4vLyBCYWNrd2FyZHMtY29tcGF0IHdpdGggbm9kZSAwLjEwLnhcbkV2ZW50RW1pdHRlci5FdmVudEVtaXR0ZXIgPSBFdmVudEVtaXR0ZXI7XG5cbkV2ZW50RW1pdHRlci5wcm90b3R5cGUuX2V2ZW50cyA9IHVuZGVmaW5lZDtcbkV2ZW50RW1pdHRlci5wcm90b3R5cGUuX21heExpc3RlbmVycyA9IHVuZGVmaW5lZDtcblxuLy8gQnkgZGVmYXVsdCBFdmVudEVtaXR0ZXJzIHdpbGwgcHJpbnQgYSB3YXJuaW5nIGlmIG1vcmUgdGhhbiAxMCBsaXN0ZW5lcnMgYXJlXG4vLyBhZGRlZCB0byBpdC4gVGhpcyBpcyBhIHVzZWZ1bCBkZWZhdWx0IHdoaWNoIGhlbHBzIGZpbmRpbmcgbWVtb3J5IGxlYWtzLlxuRXZlbnRFbWl0dGVyLmRlZmF1bHRNYXhMaXN0ZW5lcnMgPSAxMDtcblxuLy8gT2J2aW91c2x5IG5vdCBhbGwgRW1pdHRlcnMgc2hvdWxkIGJlIGxpbWl0ZWQgdG8gMTAuIFRoaXMgZnVuY3Rpb24gYWxsb3dzXG4vLyB0aGF0IHRvIGJlIGluY3JlYXNlZC4gU2V0IHRvIHplcm8gZm9yIHVubGltaXRlZC5cbkV2ZW50RW1pdHRlci5wcm90b3R5cGUuc2V0TWF4TGlzdGVuZXJzID0gZnVuY3Rpb24obikge1xuICBpZiAoIWlzTnVtYmVyKG4pIHx8IG4gPCAwIHx8IGlzTmFOKG4pKVxuICAgIHRocm93IFR5cGVFcnJvcignbiBtdXN0IGJlIGEgcG9zaXRpdmUgbnVtYmVyJyk7XG4gIHRoaXMuX21heExpc3RlbmVycyA9IG47XG4gIHJldHVybiB0aGlzO1xufTtcblxuRXZlbnRFbWl0dGVyLnByb3RvdHlwZS5lbWl0ID0gZnVuY3Rpb24odHlwZSkge1xuICB2YXIgZXIsIGhhbmRsZXIsIGxlbiwgYXJncywgaSwgbGlzdGVuZXJzO1xuXG4gIGlmICghdGhpcy5fZXZlbnRzKVxuICAgIHRoaXMuX2V2ZW50cyA9IHt9O1xuXG4gIC8vIElmIHRoZXJlIGlzIG5vICdlcnJvcicgZXZlbnQgbGlzdGVuZXIgdGhlbiB0aHJvdy5cbiAgaWYgKHR5cGUgPT09ICdlcnJvcicpIHtcbiAgICBpZiAoIXRoaXMuX2V2ZW50cy5lcnJvciB8fFxuICAgICAgICAoaXNPYmplY3QodGhpcy5fZXZlbnRzLmVycm9yKSAmJiAhdGhpcy5fZXZlbnRzLmVycm9yLmxlbmd0aCkpIHtcbiAgICAgIGVyID0gYXJndW1lbnRzWzFdO1xuICAgICAgaWYgKGVyIGluc3RhbmNlb2YgRXJyb3IpIHtcbiAgICAgICAgdGhyb3cgZXI7IC8vIFVuaGFuZGxlZCAnZXJyb3InIGV2ZW50XG4gICAgICB9IGVsc2Uge1xuICAgICAgICAvLyBBdCBsZWFzdCBnaXZlIHNvbWUga2luZCBvZiBjb250ZXh0IHRvIHRoZSB1c2VyXG4gICAgICAgIHZhciBlcnIgPSBuZXcgRXJyb3IoJ1VuY2F1Z2h0LCB1bnNwZWNpZmllZCBcImVycm9yXCIgZXZlbnQuICgnICsgZXIgKyAnKScpO1xuICAgICAgICBlcnIuY29udGV4dCA9IGVyO1xuICAgICAgICB0aHJvdyBlcnI7XG4gICAgICB9XG4gICAgfVxuICB9XG5cbiAgaGFuZGxlciA9IHRoaXMuX2V2ZW50c1t0eXBlXTtcblxuICBpZiAoaXNVbmRlZmluZWQoaGFuZGxlcikpXG4gICAgcmV0dXJuIGZhbHNlO1xuXG4gIGlmIChpc0Z1bmN0aW9uKGhhbmRsZXIpKSB7XG4gICAgc3dpdGNoIChhcmd1bWVudHMubGVuZ3RoKSB7XG4gICAgICAvLyBmYXN0IGNhc2VzXG4gICAgICBjYXNlIDE6XG4gICAgICAgIGhhbmRsZXIuY2FsbCh0aGlzKTtcbiAgICAgICAgYnJlYWs7XG4gICAgICBjYXNlIDI6XG4gICAgICAgIGhhbmRsZXIuY2FsbCh0aGlzLCBhcmd1bWVudHNbMV0pO1xuICAgICAgICBicmVhaztcbiAgICAgIGNhc2UgMzpcbiAgICAgICAgaGFuZGxlci5jYWxsKHRoaXMsIGFyZ3VtZW50c1sxXSwgYXJndW1lbnRzWzJdKTtcbiAgICAgICAgYnJlYWs7XG4gICAgICAvLyBzbG93ZXJcbiAgICAgIGRlZmF1bHQ6XG4gICAgICAgIGFyZ3MgPSBBcnJheS5wcm90b3R5cGUuc2xpY2UuY2FsbChhcmd1bWVudHMsIDEpO1xuICAgICAgICBoYW5kbGVyLmFwcGx5KHRoaXMsIGFyZ3MpO1xuICAgIH1cbiAgfSBlbHNlIGlmIChpc09iamVjdChoYW5kbGVyKSkge1xuICAgIGFyZ3MgPSBBcnJheS5wcm90b3R5cGUuc2xpY2UuY2FsbChhcmd1bWVudHMsIDEpO1xuICAgIGxpc3RlbmVycyA9IGhhbmRsZXIuc2xpY2UoKTtcbiAgICBsZW4gPSBsaXN0ZW5lcnMubGVuZ3RoO1xuICAgIGZvciAoaSA9IDA7IGkgPCBsZW47IGkrKylcbiAgICAgIGxpc3RlbmVyc1tpXS5hcHBseSh0aGlzLCBhcmdzKTtcbiAgfVxuXG4gIHJldHVybiB0cnVlO1xufTtcblxuRXZlbnRFbWl0dGVyLnByb3RvdHlwZS5hZGRMaXN0ZW5lciA9IGZ1bmN0aW9uKHR5cGUsIGxpc3RlbmVyKSB7XG4gIHZhciBtO1xuXG4gIGlmICghaXNGdW5jdGlvbihsaXN0ZW5lcikpXG4gICAgdGhyb3cgVHlwZUVycm9yKCdsaXN0ZW5lciBtdXN0IGJlIGEgZnVuY3Rpb24nKTtcblxuICBpZiAoIXRoaXMuX2V2ZW50cylcbiAgICB0aGlzLl9ldmVudHMgPSB7fTtcblxuICAvLyBUbyBhdm9pZCByZWN1cnNpb24gaW4gdGhlIGNhc2UgdGhhdCB0eXBlID09PSBcIm5ld0xpc3RlbmVyXCIhIEJlZm9yZVxuICAvLyBhZGRpbmcgaXQgdG8gdGhlIGxpc3RlbmVycywgZmlyc3QgZW1pdCBcIm5ld0xpc3RlbmVyXCIuXG4gIGlmICh0aGlzLl9ldmVudHMubmV3TGlzdGVuZXIpXG4gICAgdGhpcy5lbWl0KCduZXdMaXN0ZW5lcicsIHR5cGUsXG4gICAgICAgICAgICAgIGlzRnVuY3Rpb24obGlzdGVuZXIubGlzdGVuZXIpID9cbiAgICAgICAgICAgICAgbGlzdGVuZXIubGlzdGVuZXIgOiBsaXN0ZW5lcik7XG5cbiAgaWYgKCF0aGlzLl9ldmVudHNbdHlwZV0pXG4gICAgLy8gT3B0aW1pemUgdGhlIGNhc2Ugb2Ygb25lIGxpc3RlbmVyLiBEb24ndCBuZWVkIHRoZSBleHRyYSBhcnJheSBvYmplY3QuXG4gICAgdGhpcy5fZXZlbnRzW3R5cGVdID0gbGlzdGVuZXI7XG4gIGVsc2UgaWYgKGlzT2JqZWN0KHRoaXMuX2V2ZW50c1t0eXBlXSkpXG4gICAgLy8gSWYgd2UndmUgYWxyZWFkeSBnb3QgYW4gYXJyYXksIGp1c3QgYXBwZW5kLlxuICAgIHRoaXMuX2V2ZW50c1t0eXBlXS5wdXNoKGxpc3RlbmVyKTtcbiAgZWxzZVxuICAgIC8vIEFkZGluZyB0aGUgc2Vjb25kIGVsZW1lbnQsIG5lZWQgdG8gY2hhbmdlIHRvIGFycmF5LlxuICAgIHRoaXMuX2V2ZW50c1t0eXBlXSA9IFt0aGlzLl9ldmVudHNbdHlwZV0sIGxpc3RlbmVyXTtcblxuICAvLyBDaGVjayBmb3IgbGlzdGVuZXIgbGVha1xuICBpZiAoaXNPYmplY3QodGhpcy5fZXZlbnRzW3R5cGVdKSAmJiAhdGhpcy5fZXZlbnRzW3R5cGVdLndhcm5lZCkge1xuICAgIGlmICghaXNVbmRlZmluZWQodGhpcy5fbWF4TGlzdGVuZXJzKSkge1xuICAgICAgbSA9IHRoaXMuX21heExpc3RlbmVycztcbiAgICB9IGVsc2Uge1xuICAgICAgbSA9IEV2ZW50RW1pdHRlci5kZWZhdWx0TWF4TGlzdGVuZXJzO1xuICAgIH1cblxuICAgIGlmIChtICYmIG0gPiAwICYmIHRoaXMuX2V2ZW50c1t0eXBlXS5sZW5ndGggPiBtKSB7XG4gICAgICB0aGlzLl9ldmVudHNbdHlwZV0ud2FybmVkID0gdHJ1ZTtcbiAgICAgIGNvbnNvbGUuZXJyb3IoJyhub2RlKSB3YXJuaW5nOiBwb3NzaWJsZSBFdmVudEVtaXR0ZXIgbWVtb3J5ICcgK1xuICAgICAgICAgICAgICAgICAgICAnbGVhayBkZXRlY3RlZC4gJWQgbGlzdGVuZXJzIGFkZGVkLiAnICtcbiAgICAgICAgICAgICAgICAgICAgJ1VzZSBlbWl0dGVyLnNldE1heExpc3RlbmVycygpIHRvIGluY3JlYXNlIGxpbWl0LicsXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuX2V2ZW50c1t0eXBlXS5sZW5ndGgpO1xuICAgICAgaWYgKHR5cGVvZiBjb25zb2xlLnRyYWNlID09PSAnZnVuY3Rpb24nKSB7XG4gICAgICAgIC8vIG5vdCBzdXBwb3J0ZWQgaW4gSUUgMTBcbiAgICAgICAgY29uc29sZS50cmFjZSgpO1xuICAgICAgfVxuICAgIH1cbiAgfVxuXG4gIHJldHVybiB0aGlzO1xufTtcblxuRXZlbnRFbWl0dGVyLnByb3RvdHlwZS5vbiA9IEV2ZW50RW1pdHRlci5wcm90b3R5cGUuYWRkTGlzdGVuZXI7XG5cbkV2ZW50RW1pdHRlci5wcm90b3R5cGUub25jZSA9IGZ1bmN0aW9uKHR5cGUsIGxpc3RlbmVyKSB7XG4gIGlmICghaXNGdW5jdGlvbihsaXN0ZW5lcikpXG4gICAgdGhyb3cgVHlwZUVycm9yKCdsaXN0ZW5lciBtdXN0IGJlIGEgZnVuY3Rpb24nKTtcblxuICB2YXIgZmlyZWQgPSBmYWxzZTtcblxuICBmdW5jdGlvbiBnKCkge1xuICAgIHRoaXMucmVtb3ZlTGlzdGVuZXIodHlwZSwgZyk7XG5cbiAgICBpZiAoIWZpcmVkKSB7XG4gICAgICBmaXJlZCA9IHRydWU7XG4gICAgICBsaXN0ZW5lci5hcHBseSh0aGlzLCBhcmd1bWVudHMpO1xuICAgIH1cbiAgfVxuXG4gIGcubGlzdGVuZXIgPSBsaXN0ZW5lcjtcbiAgdGhpcy5vbih0eXBlLCBnKTtcblxuICByZXR1cm4gdGhpcztcbn07XG5cbi8vIGVtaXRzIGEgJ3JlbW92ZUxpc3RlbmVyJyBldmVudCBpZmYgdGhlIGxpc3RlbmVyIHdhcyByZW1vdmVkXG5FdmVudEVtaXR0ZXIucHJvdG90eXBlLnJlbW92ZUxpc3RlbmVyID0gZnVuY3Rpb24odHlwZSwgbGlzdGVuZXIpIHtcbiAgdmFyIGxpc3QsIHBvc2l0aW9uLCBsZW5ndGgsIGk7XG5cbiAgaWYgKCFpc0Z1bmN0aW9uKGxpc3RlbmVyKSlcbiAgICB0aHJvdyBUeXBlRXJyb3IoJ2xpc3RlbmVyIG11c3QgYmUgYSBmdW5jdGlvbicpO1xuXG4gIGlmICghdGhpcy5fZXZlbnRzIHx8ICF0aGlzLl9ldmVudHNbdHlwZV0pXG4gICAgcmV0dXJuIHRoaXM7XG5cbiAgbGlzdCA9IHRoaXMuX2V2ZW50c1t0eXBlXTtcbiAgbGVuZ3RoID0gbGlzdC5sZW5ndGg7XG4gIHBvc2l0aW9uID0gLTE7XG5cbiAgaWYgKGxpc3QgPT09IGxpc3RlbmVyIHx8XG4gICAgICAoaXNGdW5jdGlvbihsaXN0Lmxpc3RlbmVyKSAmJiBsaXN0Lmxpc3RlbmVyID09PSBsaXN0ZW5lcikpIHtcbiAgICBkZWxldGUgdGhpcy5fZXZlbnRzW3R5cGVdO1xuICAgIGlmICh0aGlzLl9ldmVudHMucmVtb3ZlTGlzdGVuZXIpXG4gICAgICB0aGlzLmVtaXQoJ3JlbW92ZUxpc3RlbmVyJywgdHlwZSwgbGlzdGVuZXIpO1xuXG4gIH0gZWxzZSBpZiAoaXNPYmplY3QobGlzdCkpIHtcbiAgICBmb3IgKGkgPSBsZW5ndGg7IGktLSA+IDA7KSB7XG4gICAgICBpZiAobGlzdFtpXSA9PT0gbGlzdGVuZXIgfHxcbiAgICAgICAgICAobGlzdFtpXS5saXN0ZW5lciAmJiBsaXN0W2ldLmxpc3RlbmVyID09PSBsaXN0ZW5lcikpIHtcbiAgICAgICAgcG9zaXRpb24gPSBpO1xuICAgICAgICBicmVhaztcbiAgICAgIH1cbiAgICB9XG5cbiAgICBpZiAocG9zaXRpb24gPCAwKVxuICAgICAgcmV0dXJuIHRoaXM7XG5cbiAgICBpZiAobGlzdC5sZW5ndGggPT09IDEpIHtcbiAgICAgIGxpc3QubGVuZ3RoID0gMDtcbiAgICAgIGRlbGV0ZSB0aGlzLl9ldmVudHNbdHlwZV07XG4gICAgfSBlbHNlIHtcbiAgICAgIGxpc3Quc3BsaWNlKHBvc2l0aW9uLCAxKTtcbiAgICB9XG5cbiAgICBpZiAodGhpcy5fZXZlbnRzLnJlbW92ZUxpc3RlbmVyKVxuICAgICAgdGhpcy5lbWl0KCdyZW1vdmVMaXN0ZW5lcicsIHR5cGUsIGxpc3RlbmVyKTtcbiAgfVxuXG4gIHJldHVybiB0aGlzO1xufTtcblxuRXZlbnRFbWl0dGVyLnByb3RvdHlwZS5yZW1vdmVBbGxMaXN0ZW5lcnMgPSBmdW5jdGlvbih0eXBlKSB7XG4gIHZhciBrZXksIGxpc3RlbmVycztcblxuICBpZiAoIXRoaXMuX2V2ZW50cylcbiAgICByZXR1cm4gdGhpcztcblxuICAvLyBub3QgbGlzdGVuaW5nIGZvciByZW1vdmVMaXN0ZW5lciwgbm8gbmVlZCB0byBlbWl0XG4gIGlmICghdGhpcy5fZXZlbnRzLnJlbW92ZUxpc3RlbmVyKSB7XG4gICAgaWYgKGFyZ3VtZW50cy5sZW5ndGggPT09IDApXG4gICAgICB0aGlzLl9ldmVudHMgPSB7fTtcbiAgICBlbHNlIGlmICh0aGlzLl9ldmVudHNbdHlwZV0pXG4gICAgICBkZWxldGUgdGhpcy5fZXZlbnRzW3R5cGVdO1xuICAgIHJldHVybiB0aGlzO1xuICB9XG5cbiAgLy8gZW1pdCByZW1vdmVMaXN0ZW5lciBmb3IgYWxsIGxpc3RlbmVycyBvbiBhbGwgZXZlbnRzXG4gIGlmIChhcmd1bWVudHMubGVuZ3RoID09PSAwKSB7XG4gICAgZm9yIChrZXkgaW4gdGhpcy5fZXZlbnRzKSB7XG4gICAgICBpZiAoa2V5ID09PSAncmVtb3ZlTGlzdGVuZXInKSBjb250aW51ZTtcbiAgICAgIHRoaXMucmVtb3ZlQWxsTGlzdGVuZXJzKGtleSk7XG4gICAgfVxuICAgIHRoaXMucmVtb3ZlQWxsTGlzdGVuZXJzKCdyZW1vdmVMaXN0ZW5lcicpO1xuICAgIHRoaXMuX2V2ZW50cyA9IHt9O1xuICAgIHJldHVybiB0aGlzO1xuICB9XG5cbiAgbGlzdGVuZXJzID0gdGhpcy5fZXZlbnRzW3R5cGVdO1xuXG4gIGlmIChpc0Z1bmN0aW9uKGxpc3RlbmVycykpIHtcbiAgICB0aGlzLnJlbW92ZUxpc3RlbmVyKHR5cGUsIGxpc3RlbmVycyk7XG4gIH0gZWxzZSBpZiAobGlzdGVuZXJzKSB7XG4gICAgLy8gTElGTyBvcmRlclxuICAgIHdoaWxlIChsaXN0ZW5lcnMubGVuZ3RoKVxuICAgICAgdGhpcy5yZW1vdmVMaXN0ZW5lcih0eXBlLCBsaXN0ZW5lcnNbbGlzdGVuZXJzLmxlbmd0aCAtIDFdKTtcbiAgfVxuICBkZWxldGUgdGhpcy5fZXZlbnRzW3R5cGVdO1xuXG4gIHJldHVybiB0aGlzO1xufTtcblxuRXZlbnRFbWl0dGVyLnByb3RvdHlwZS5saXN0ZW5lcnMgPSBmdW5jdGlvbih0eXBlKSB7XG4gIHZhciByZXQ7XG4gIGlmICghdGhpcy5fZXZlbnRzIHx8ICF0aGlzLl9ldmVudHNbdHlwZV0pXG4gICAgcmV0ID0gW107XG4gIGVsc2UgaWYgKGlzRnVuY3Rpb24odGhpcy5fZXZlbnRzW3R5cGVdKSlcbiAgICByZXQgPSBbdGhpcy5fZXZlbnRzW3R5cGVdXTtcbiAgZWxzZVxuICAgIHJldCA9IHRoaXMuX2V2ZW50c1t0eXBlXS5zbGljZSgpO1xuICByZXR1cm4gcmV0O1xufTtcblxuRXZlbnRFbWl0dGVyLnByb3RvdHlwZS5saXN0ZW5lckNvdW50ID0gZnVuY3Rpb24odHlwZSkge1xuICBpZiAodGhpcy5fZXZlbnRzKSB7XG4gICAgdmFyIGV2bGlzdGVuZXIgPSB0aGlzLl9ldmVudHNbdHlwZV07XG5cbiAgICBpZiAoaXNGdW5jdGlvbihldmxpc3RlbmVyKSlcbiAgICAgIHJldHVybiAxO1xuICAgIGVsc2UgaWYgKGV2bGlzdGVuZXIpXG4gICAgICByZXR1cm4gZXZsaXN0ZW5lci5sZW5ndGg7XG4gIH1cbiAgcmV0dXJuIDA7XG59O1xuXG5FdmVudEVtaXR0ZXIubGlzdGVuZXJDb3VudCA9IGZ1bmN0aW9uKGVtaXR0ZXIsIHR5cGUpIHtcbiAgcmV0dXJuIGVtaXR0ZXIubGlzdGVuZXJDb3VudCh0eXBlKTtcbn07XG5cbmZ1bmN0aW9uIGlzRnVuY3Rpb24oYXJnKSB7XG4gIHJldHVybiB0eXBlb2YgYXJnID09PSAnZnVuY3Rpb24nO1xufVxuXG5mdW5jdGlvbiBpc051bWJlcihhcmcpIHtcbiAgcmV0dXJuIHR5cGVvZiBhcmcgPT09ICdudW1iZXInO1xufVxuXG5mdW5jdGlvbiBpc09iamVjdChhcmcpIHtcbiAgcmV0dXJuIHR5cGVvZiBhcmcgPT09ICdvYmplY3QnICYmIGFyZyAhPT0gbnVsbDtcbn1cblxuZnVuY3Rpb24gaXNVbmRlZmluZWQoYXJnKSB7XG4gIHJldHVybiBhcmcgPT09IHZvaWQgMDtcbn1cbiIsIi8qKlxuICogQ29weXJpZ2h0IChjKSAyMDE0LCBGYWNlYm9vaywgSW5jLlxuICogQWxsIHJpZ2h0cyByZXNlcnZlZC5cbiAqXG4gKiBUaGlzIHNvdXJjZSBjb2RlIGlzIGxpY2Vuc2VkIHVuZGVyIHRoZSBCU0Qtc3R5bGUgbGljZW5zZSBmb3VuZCBpbiB0aGVcbiAqIGh0dHBzOi8vcmF3LmdpdGh1Yi5jb20vZmFjZWJvb2svcmVnZW5lcmF0b3IvbWFzdGVyL0xJQ0VOU0UgZmlsZS4gQW5cbiAqIGFkZGl0aW9uYWwgZ3JhbnQgb2YgcGF0ZW50IHJpZ2h0cyBjYW4gYmUgZm91bmQgaW4gdGhlIFBBVEVOVFMgZmlsZSBpblxuICogdGhlIHNhbWUgZGlyZWN0b3J5LlxuICovXG5cbiEoZnVuY3Rpb24oZ2xvYmFsKSB7XG4gIFwidXNlIHN0cmljdFwiO1xuXG4gIHZhciBPcCA9IE9iamVjdC5wcm90b3R5cGU7XG4gIHZhciBoYXNPd24gPSBPcC5oYXNPd25Qcm9wZXJ0eTtcbiAgdmFyIHVuZGVmaW5lZDsgLy8gTW9yZSBjb21wcmVzc2libGUgdGhhbiB2b2lkIDAuXG4gIHZhciAkU3ltYm9sID0gdHlwZW9mIFN5bWJvbCA9PT0gXCJmdW5jdGlvblwiID8gU3ltYm9sIDoge307XG4gIHZhciBpdGVyYXRvclN5bWJvbCA9ICRTeW1ib2wuaXRlcmF0b3IgfHwgXCJAQGl0ZXJhdG9yXCI7XG4gIHZhciBhc3luY0l0ZXJhdG9yU3ltYm9sID0gJFN5bWJvbC5hc3luY0l0ZXJhdG9yIHx8IFwiQEBhc3luY0l0ZXJhdG9yXCI7XG4gIHZhciB0b1N0cmluZ1RhZ1N5bWJvbCA9ICRTeW1ib2wudG9TdHJpbmdUYWcgfHwgXCJAQHRvU3RyaW5nVGFnXCI7XG5cbiAgdmFyIGluTW9kdWxlID0gdHlwZW9mIG1vZHVsZSA9PT0gXCJvYmplY3RcIjtcbiAgdmFyIHJ1bnRpbWUgPSBnbG9iYWwucmVnZW5lcmF0b3JSdW50aW1lO1xuICBpZiAocnVudGltZSkge1xuICAgIGlmIChpbk1vZHVsZSkge1xuICAgICAgLy8gSWYgcmVnZW5lcmF0b3JSdW50aW1lIGlzIGRlZmluZWQgZ2xvYmFsbHkgYW5kIHdlJ3JlIGluIGEgbW9kdWxlLFxuICAgICAgLy8gbWFrZSB0aGUgZXhwb3J0cyBvYmplY3QgaWRlbnRpY2FsIHRvIHJlZ2VuZXJhdG9yUnVudGltZS5cbiAgICAgIG1vZHVsZS5leHBvcnRzID0gcnVudGltZTtcbiAgICB9XG4gICAgLy8gRG9uJ3QgYm90aGVyIGV2YWx1YXRpbmcgdGhlIHJlc3Qgb2YgdGhpcyBmaWxlIGlmIHRoZSBydW50aW1lIHdhc1xuICAgIC8vIGFscmVhZHkgZGVmaW5lZCBnbG9iYWxseS5cbiAgICByZXR1cm47XG4gIH1cblxuICAvLyBEZWZpbmUgdGhlIHJ1bnRpbWUgZ2xvYmFsbHkgKGFzIGV4cGVjdGVkIGJ5IGdlbmVyYXRlZCBjb2RlKSBhcyBlaXRoZXJcbiAgLy8gbW9kdWxlLmV4cG9ydHMgKGlmIHdlJ3JlIGluIGEgbW9kdWxlKSBvciBhIG5ldywgZW1wdHkgb2JqZWN0LlxuICBydW50aW1lID0gZ2xvYmFsLnJlZ2VuZXJhdG9yUnVudGltZSA9IGluTW9kdWxlID8gbW9kdWxlLmV4cG9ydHMgOiB7fTtcblxuICBmdW5jdGlvbiB3cmFwKGlubmVyRm4sIG91dGVyRm4sIHNlbGYsIHRyeUxvY3NMaXN0KSB7XG4gICAgLy8gSWYgb3V0ZXJGbiBwcm92aWRlZCBhbmQgb3V0ZXJGbi5wcm90b3R5cGUgaXMgYSBHZW5lcmF0b3IsIHRoZW4gb3V0ZXJGbi5wcm90b3R5cGUgaW5zdGFuY2VvZiBHZW5lcmF0b3IuXG4gICAgdmFyIHByb3RvR2VuZXJhdG9yID0gb3V0ZXJGbiAmJiBvdXRlckZuLnByb3RvdHlwZSBpbnN0YW5jZW9mIEdlbmVyYXRvciA/IG91dGVyRm4gOiBHZW5lcmF0b3I7XG4gICAgdmFyIGdlbmVyYXRvciA9IE9iamVjdC5jcmVhdGUocHJvdG9HZW5lcmF0b3IucHJvdG90eXBlKTtcbiAgICB2YXIgY29udGV4dCA9IG5ldyBDb250ZXh0KHRyeUxvY3NMaXN0IHx8IFtdKTtcblxuICAgIC8vIFRoZSAuX2ludm9rZSBtZXRob2QgdW5pZmllcyB0aGUgaW1wbGVtZW50YXRpb25zIG9mIHRoZSAubmV4dCxcbiAgICAvLyAudGhyb3csIGFuZCAucmV0dXJuIG1ldGhvZHMuXG4gICAgZ2VuZXJhdG9yLl9pbnZva2UgPSBtYWtlSW52b2tlTWV0aG9kKGlubmVyRm4sIHNlbGYsIGNvbnRleHQpO1xuXG4gICAgcmV0dXJuIGdlbmVyYXRvcjtcbiAgfVxuICBydW50aW1lLndyYXAgPSB3cmFwO1xuXG4gIC8vIFRyeS9jYXRjaCBoZWxwZXIgdG8gbWluaW1pemUgZGVvcHRpbWl6YXRpb25zLiBSZXR1cm5zIGEgY29tcGxldGlvblxuICAvLyByZWNvcmQgbGlrZSBjb250ZXh0LnRyeUVudHJpZXNbaV0uY29tcGxldGlvbi4gVGhpcyBpbnRlcmZhY2UgY291bGRcbiAgLy8gaGF2ZSBiZWVuIChhbmQgd2FzIHByZXZpb3VzbHkpIGRlc2lnbmVkIHRvIHRha2UgYSBjbG9zdXJlIHRvIGJlXG4gIC8vIGludm9rZWQgd2l0aG91dCBhcmd1bWVudHMsIGJ1dCBpbiBhbGwgdGhlIGNhc2VzIHdlIGNhcmUgYWJvdXQgd2VcbiAgLy8gYWxyZWFkeSBoYXZlIGFuIGV4aXN0aW5nIG1ldGhvZCB3ZSB3YW50IHRvIGNhbGwsIHNvIHRoZXJlJ3Mgbm8gbmVlZFxuICAvLyB0byBjcmVhdGUgYSBuZXcgZnVuY3Rpb24gb2JqZWN0LiBXZSBjYW4gZXZlbiBnZXQgYXdheSB3aXRoIGFzc3VtaW5nXG4gIC8vIHRoZSBtZXRob2QgdGFrZXMgZXhhY3RseSBvbmUgYXJndW1lbnQsIHNpbmNlIHRoYXQgaGFwcGVucyB0byBiZSB0cnVlXG4gIC8vIGluIGV2ZXJ5IGNhc2UsIHNvIHdlIGRvbid0IGhhdmUgdG8gdG91Y2ggdGhlIGFyZ3VtZW50cyBvYmplY3QuIFRoZVxuICAvLyBvbmx5IGFkZGl0aW9uYWwgYWxsb2NhdGlvbiByZXF1aXJlZCBpcyB0aGUgY29tcGxldGlvbiByZWNvcmQsIHdoaWNoXG4gIC8vIGhhcyBhIHN0YWJsZSBzaGFwZSBhbmQgc28gaG9wZWZ1bGx5IHNob3VsZCBiZSBjaGVhcCB0byBhbGxvY2F0ZS5cbiAgZnVuY3Rpb24gdHJ5Q2F0Y2goZm4sIG9iaiwgYXJnKSB7XG4gICAgdHJ5IHtcbiAgICAgIHJldHVybiB7IHR5cGU6IFwibm9ybWFsXCIsIGFyZzogZm4uY2FsbChvYmosIGFyZykgfTtcbiAgICB9IGNhdGNoIChlcnIpIHtcbiAgICAgIHJldHVybiB7IHR5cGU6IFwidGhyb3dcIiwgYXJnOiBlcnIgfTtcbiAgICB9XG4gIH1cblxuICB2YXIgR2VuU3RhdGVTdXNwZW5kZWRTdGFydCA9IFwic3VzcGVuZGVkU3RhcnRcIjtcbiAgdmFyIEdlblN0YXRlU3VzcGVuZGVkWWllbGQgPSBcInN1c3BlbmRlZFlpZWxkXCI7XG4gIHZhciBHZW5TdGF0ZUV4ZWN1dGluZyA9IFwiZXhlY3V0aW5nXCI7XG4gIHZhciBHZW5TdGF0ZUNvbXBsZXRlZCA9IFwiY29tcGxldGVkXCI7XG5cbiAgLy8gUmV0dXJuaW5nIHRoaXMgb2JqZWN0IGZyb20gdGhlIGlubmVyRm4gaGFzIHRoZSBzYW1lIGVmZmVjdCBhc1xuICAvLyBicmVha2luZyBvdXQgb2YgdGhlIGRpc3BhdGNoIHN3aXRjaCBzdGF0ZW1lbnQuXG4gIHZhciBDb250aW51ZVNlbnRpbmVsID0ge307XG5cbiAgLy8gRHVtbXkgY29uc3RydWN0b3IgZnVuY3Rpb25zIHRoYXQgd2UgdXNlIGFzIHRoZSAuY29uc3RydWN0b3IgYW5kXG4gIC8vIC5jb25zdHJ1Y3Rvci5wcm90b3R5cGUgcHJvcGVydGllcyBmb3IgZnVuY3Rpb25zIHRoYXQgcmV0dXJuIEdlbmVyYXRvclxuICAvLyBvYmplY3RzLiBGb3IgZnVsbCBzcGVjIGNvbXBsaWFuY2UsIHlvdSBtYXkgd2lzaCB0byBjb25maWd1cmUgeW91clxuICAvLyBtaW5pZmllciBub3QgdG8gbWFuZ2xlIHRoZSBuYW1lcyBvZiB0aGVzZSB0d28gZnVuY3Rpb25zLlxuICBmdW5jdGlvbiBHZW5lcmF0b3IoKSB7fVxuICBmdW5jdGlvbiBHZW5lcmF0b3JGdW5jdGlvbigpIHt9XG4gIGZ1bmN0aW9uIEdlbmVyYXRvckZ1bmN0aW9uUHJvdG90eXBlKCkge31cblxuICAvLyBUaGlzIGlzIGEgcG9seWZpbGwgZm9yICVJdGVyYXRvclByb3RvdHlwZSUgZm9yIGVudmlyb25tZW50cyB0aGF0XG4gIC8vIGRvbid0IG5hdGl2ZWx5IHN1cHBvcnQgaXQuXG4gIHZhciBJdGVyYXRvclByb3RvdHlwZSA9IHt9O1xuICBJdGVyYXRvclByb3RvdHlwZVtpdGVyYXRvclN5bWJvbF0gPSBmdW5jdGlvbiAoKSB7XG4gICAgcmV0dXJuIHRoaXM7XG4gIH07XG5cbiAgdmFyIGdldFByb3RvID0gT2JqZWN0LmdldFByb3RvdHlwZU9mO1xuICB2YXIgTmF0aXZlSXRlcmF0b3JQcm90b3R5cGUgPSBnZXRQcm90byAmJiBnZXRQcm90byhnZXRQcm90byh2YWx1ZXMoW10pKSk7XG4gIGlmIChOYXRpdmVJdGVyYXRvclByb3RvdHlwZSAmJlxuICAgICAgTmF0aXZlSXRlcmF0b3JQcm90b3R5cGUgIT09IE9wICYmXG4gICAgICBoYXNPd24uY2FsbChOYXRpdmVJdGVyYXRvclByb3RvdHlwZSwgaXRlcmF0b3JTeW1ib2wpKSB7XG4gICAgLy8gVGhpcyBlbnZpcm9ubWVudCBoYXMgYSBuYXRpdmUgJUl0ZXJhdG9yUHJvdG90eXBlJTsgdXNlIGl0IGluc3RlYWRcbiAgICAvLyBvZiB0aGUgcG9seWZpbGwuXG4gICAgSXRlcmF0b3JQcm90b3R5cGUgPSBOYXRpdmVJdGVyYXRvclByb3RvdHlwZTtcbiAgfVxuXG4gIHZhciBHcCA9IEdlbmVyYXRvckZ1bmN0aW9uUHJvdG90eXBlLnByb3RvdHlwZSA9XG4gICAgR2VuZXJhdG9yLnByb3RvdHlwZSA9IE9iamVjdC5jcmVhdGUoSXRlcmF0b3JQcm90b3R5cGUpO1xuICBHZW5lcmF0b3JGdW5jdGlvbi5wcm90b3R5cGUgPSBHcC5jb25zdHJ1Y3RvciA9IEdlbmVyYXRvckZ1bmN0aW9uUHJvdG90eXBlO1xuICBHZW5lcmF0b3JGdW5jdGlvblByb3RvdHlwZS5jb25zdHJ1Y3RvciA9IEdlbmVyYXRvckZ1bmN0aW9uO1xuICBHZW5lcmF0b3JGdW5jdGlvblByb3RvdHlwZVt0b1N0cmluZ1RhZ1N5bWJvbF0gPVxuICAgIEdlbmVyYXRvckZ1bmN0aW9uLmRpc3BsYXlOYW1lID0gXCJHZW5lcmF0b3JGdW5jdGlvblwiO1xuXG4gIC8vIEhlbHBlciBmb3IgZGVmaW5pbmcgdGhlIC5uZXh0LCAudGhyb3csIGFuZCAucmV0dXJuIG1ldGhvZHMgb2YgdGhlXG4gIC8vIEl0ZXJhdG9yIGludGVyZmFjZSBpbiB0ZXJtcyBvZiBhIHNpbmdsZSAuX2ludm9rZSBtZXRob2QuXG4gIGZ1bmN0aW9uIGRlZmluZUl0ZXJhdG9yTWV0aG9kcyhwcm90b3R5cGUpIHtcbiAgICBbXCJuZXh0XCIsIFwidGhyb3dcIiwgXCJyZXR1cm5cIl0uZm9yRWFjaChmdW5jdGlvbihtZXRob2QpIHtcbiAgICAgIHByb3RvdHlwZVttZXRob2RdID0gZnVuY3Rpb24oYXJnKSB7XG4gICAgICAgIHJldHVybiB0aGlzLl9pbnZva2UobWV0aG9kLCBhcmcpO1xuICAgICAgfTtcbiAgICB9KTtcbiAgfVxuXG4gIHJ1bnRpbWUuaXNHZW5lcmF0b3JGdW5jdGlvbiA9IGZ1bmN0aW9uKGdlbkZ1bikge1xuICAgIHZhciBjdG9yID0gdHlwZW9mIGdlbkZ1biA9PT0gXCJmdW5jdGlvblwiICYmIGdlbkZ1bi5jb25zdHJ1Y3RvcjtcbiAgICByZXR1cm4gY3RvclxuICAgICAgPyBjdG9yID09PSBHZW5lcmF0b3JGdW5jdGlvbiB8fFxuICAgICAgICAvLyBGb3IgdGhlIG5hdGl2ZSBHZW5lcmF0b3JGdW5jdGlvbiBjb25zdHJ1Y3RvciwgdGhlIGJlc3Qgd2UgY2FuXG4gICAgICAgIC8vIGRvIGlzIHRvIGNoZWNrIGl0cyAubmFtZSBwcm9wZXJ0eS5cbiAgICAgICAgKGN0b3IuZGlzcGxheU5hbWUgfHwgY3Rvci5uYW1lKSA9PT0gXCJHZW5lcmF0b3JGdW5jdGlvblwiXG4gICAgICA6IGZhbHNlO1xuICB9O1xuXG4gIHJ1bnRpbWUubWFyayA9IGZ1bmN0aW9uKGdlbkZ1bikge1xuICAgIGlmIChPYmplY3Quc2V0UHJvdG90eXBlT2YpIHtcbiAgICAgIE9iamVjdC5zZXRQcm90b3R5cGVPZihnZW5GdW4sIEdlbmVyYXRvckZ1bmN0aW9uUHJvdG90eXBlKTtcbiAgICB9IGVsc2Uge1xuICAgICAgZ2VuRnVuLl9fcHJvdG9fXyA9IEdlbmVyYXRvckZ1bmN0aW9uUHJvdG90eXBlO1xuICAgICAgaWYgKCEodG9TdHJpbmdUYWdTeW1ib2wgaW4gZ2VuRnVuKSkge1xuICAgICAgICBnZW5GdW5bdG9TdHJpbmdUYWdTeW1ib2xdID0gXCJHZW5lcmF0b3JGdW5jdGlvblwiO1xuICAgICAgfVxuICAgIH1cbiAgICBnZW5GdW4ucHJvdG90eXBlID0gT2JqZWN0LmNyZWF0ZShHcCk7XG4gICAgcmV0dXJuIGdlbkZ1bjtcbiAgfTtcblxuICAvLyBXaXRoaW4gdGhlIGJvZHkgb2YgYW55IGFzeW5jIGZ1bmN0aW9uLCBgYXdhaXQgeGAgaXMgdHJhbnNmb3JtZWQgdG9cbiAgLy8gYHlpZWxkIHJlZ2VuZXJhdG9yUnVudGltZS5hd3JhcCh4KWAsIHNvIHRoYXQgdGhlIHJ1bnRpbWUgY2FuIHRlc3RcbiAgLy8gYGhhc093bi5jYWxsKHZhbHVlLCBcIl9fYXdhaXRcIilgIHRvIGRldGVybWluZSBpZiB0aGUgeWllbGRlZCB2YWx1ZSBpc1xuICAvLyBtZWFudCB0byBiZSBhd2FpdGVkLlxuICBydW50aW1lLmF3cmFwID0gZnVuY3Rpb24oYXJnKSB7XG4gICAgcmV0dXJuIHsgX19hd2FpdDogYXJnIH07XG4gIH07XG5cbiAgZnVuY3Rpb24gQXN5bmNJdGVyYXRvcihnZW5lcmF0b3IpIHtcbiAgICBmdW5jdGlvbiBpbnZva2UobWV0aG9kLCBhcmcsIHJlc29sdmUsIHJlamVjdCkge1xuICAgICAgdmFyIHJlY29yZCA9IHRyeUNhdGNoKGdlbmVyYXRvclttZXRob2RdLCBnZW5lcmF0b3IsIGFyZyk7XG4gICAgICBpZiAocmVjb3JkLnR5cGUgPT09IFwidGhyb3dcIikge1xuICAgICAgICByZWplY3QocmVjb3JkLmFyZyk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICB2YXIgcmVzdWx0ID0gcmVjb3JkLmFyZztcbiAgICAgICAgdmFyIHZhbHVlID0gcmVzdWx0LnZhbHVlO1xuICAgICAgICBpZiAodmFsdWUgJiZcbiAgICAgICAgICAgIHR5cGVvZiB2YWx1ZSA9PT0gXCJvYmplY3RcIiAmJlxuICAgICAgICAgICAgaGFzT3duLmNhbGwodmFsdWUsIFwiX19hd2FpdFwiKSkge1xuICAgICAgICAgIHJldHVybiBQcm9taXNlLnJlc29sdmUodmFsdWUuX19hd2FpdCkudGhlbihmdW5jdGlvbih2YWx1ZSkge1xuICAgICAgICAgICAgaW52b2tlKFwibmV4dFwiLCB2YWx1ZSwgcmVzb2x2ZSwgcmVqZWN0KTtcbiAgICAgICAgICB9LCBmdW5jdGlvbihlcnIpIHtcbiAgICAgICAgICAgIGludm9rZShcInRocm93XCIsIGVyciwgcmVzb2x2ZSwgcmVqZWN0KTtcbiAgICAgICAgICB9KTtcbiAgICAgICAgfVxuXG4gICAgICAgIHJldHVybiBQcm9taXNlLnJlc29sdmUodmFsdWUpLnRoZW4oZnVuY3Rpb24odW53cmFwcGVkKSB7XG4gICAgICAgICAgLy8gV2hlbiBhIHlpZWxkZWQgUHJvbWlzZSBpcyByZXNvbHZlZCwgaXRzIGZpbmFsIHZhbHVlIGJlY29tZXNcbiAgICAgICAgICAvLyB0aGUgLnZhbHVlIG9mIHRoZSBQcm9taXNlPHt2YWx1ZSxkb25lfT4gcmVzdWx0IGZvciB0aGVcbiAgICAgICAgICAvLyBjdXJyZW50IGl0ZXJhdGlvbi4gSWYgdGhlIFByb21pc2UgaXMgcmVqZWN0ZWQsIGhvd2V2ZXIsIHRoZVxuICAgICAgICAgIC8vIHJlc3VsdCBmb3IgdGhpcyBpdGVyYXRpb24gd2lsbCBiZSByZWplY3RlZCB3aXRoIHRoZSBzYW1lXG4gICAgICAgICAgLy8gcmVhc29uLiBOb3RlIHRoYXQgcmVqZWN0aW9ucyBvZiB5aWVsZGVkIFByb21pc2VzIGFyZSBub3RcbiAgICAgICAgICAvLyB0aHJvd24gYmFjayBpbnRvIHRoZSBnZW5lcmF0b3IgZnVuY3Rpb24sIGFzIGlzIHRoZSBjYXNlXG4gICAgICAgICAgLy8gd2hlbiBhbiBhd2FpdGVkIFByb21pc2UgaXMgcmVqZWN0ZWQuIFRoaXMgZGlmZmVyZW5jZSBpblxuICAgICAgICAgIC8vIGJlaGF2aW9yIGJldHdlZW4geWllbGQgYW5kIGF3YWl0IGlzIGltcG9ydGFudCwgYmVjYXVzZSBpdFxuICAgICAgICAgIC8vIGFsbG93cyB0aGUgY29uc3VtZXIgdG8gZGVjaWRlIHdoYXQgdG8gZG8gd2l0aCB0aGUgeWllbGRlZFxuICAgICAgICAgIC8vIHJlamVjdGlvbiAoc3dhbGxvdyBpdCBhbmQgY29udGludWUsIG1hbnVhbGx5IC50aHJvdyBpdCBiYWNrXG4gICAgICAgICAgLy8gaW50byB0aGUgZ2VuZXJhdG9yLCBhYmFuZG9uIGl0ZXJhdGlvbiwgd2hhdGV2ZXIpLiBXaXRoXG4gICAgICAgICAgLy8gYXdhaXQsIGJ5IGNvbnRyYXN0LCB0aGVyZSBpcyBubyBvcHBvcnR1bml0eSB0byBleGFtaW5lIHRoZVxuICAgICAgICAgIC8vIHJlamVjdGlvbiByZWFzb24gb3V0c2lkZSB0aGUgZ2VuZXJhdG9yIGZ1bmN0aW9uLCBzbyB0aGVcbiAgICAgICAgICAvLyBvbmx5IG9wdGlvbiBpcyB0byB0aHJvdyBpdCBmcm9tIHRoZSBhd2FpdCBleHByZXNzaW9uLCBhbmRcbiAgICAgICAgICAvLyBsZXQgdGhlIGdlbmVyYXRvciBmdW5jdGlvbiBoYW5kbGUgdGhlIGV4Y2VwdGlvbi5cbiAgICAgICAgICByZXN1bHQudmFsdWUgPSB1bndyYXBwZWQ7XG4gICAgICAgICAgcmVzb2x2ZShyZXN1bHQpO1xuICAgICAgICB9LCByZWplY3QpO1xuICAgICAgfVxuICAgIH1cblxuICAgIGlmICh0eXBlb2YgZ2xvYmFsLnByb2Nlc3MgPT09IFwib2JqZWN0XCIgJiYgZ2xvYmFsLnByb2Nlc3MuZG9tYWluKSB7XG4gICAgICBpbnZva2UgPSBnbG9iYWwucHJvY2Vzcy5kb21haW4uYmluZChpbnZva2UpO1xuICAgIH1cblxuICAgIHZhciBwcmV2aW91c1Byb21pc2U7XG5cbiAgICBmdW5jdGlvbiBlbnF1ZXVlKG1ldGhvZCwgYXJnKSB7XG4gICAgICBmdW5jdGlvbiBjYWxsSW52b2tlV2l0aE1ldGhvZEFuZEFyZygpIHtcbiAgICAgICAgcmV0dXJuIG5ldyBQcm9taXNlKGZ1bmN0aW9uKHJlc29sdmUsIHJlamVjdCkge1xuICAgICAgICAgIGludm9rZShtZXRob2QsIGFyZywgcmVzb2x2ZSwgcmVqZWN0KTtcbiAgICAgICAgfSk7XG4gICAgICB9XG5cbiAgICAgIHJldHVybiBwcmV2aW91c1Byb21pc2UgPVxuICAgICAgICAvLyBJZiBlbnF1ZXVlIGhhcyBiZWVuIGNhbGxlZCBiZWZvcmUsIHRoZW4gd2Ugd2FudCB0byB3YWl0IHVudGlsXG4gICAgICAgIC8vIGFsbCBwcmV2aW91cyBQcm9taXNlcyBoYXZlIGJlZW4gcmVzb2x2ZWQgYmVmb3JlIGNhbGxpbmcgaW52b2tlLFxuICAgICAgICAvLyBzbyB0aGF0IHJlc3VsdHMgYXJlIGFsd2F5cyBkZWxpdmVyZWQgaW4gdGhlIGNvcnJlY3Qgb3JkZXIuIElmXG4gICAgICAgIC8vIGVucXVldWUgaGFzIG5vdCBiZWVuIGNhbGxlZCBiZWZvcmUsIHRoZW4gaXQgaXMgaW1wb3J0YW50IHRvXG4gICAgICAgIC8vIGNhbGwgaW52b2tlIGltbWVkaWF0ZWx5LCB3aXRob3V0IHdhaXRpbmcgb24gYSBjYWxsYmFjayB0byBmaXJlLFxuICAgICAgICAvLyBzbyB0aGF0IHRoZSBhc3luYyBnZW5lcmF0b3IgZnVuY3Rpb24gaGFzIHRoZSBvcHBvcnR1bml0eSB0byBkb1xuICAgICAgICAvLyBhbnkgbmVjZXNzYXJ5IHNldHVwIGluIGEgcHJlZGljdGFibGUgd2F5LiBUaGlzIHByZWRpY3RhYmlsaXR5XG4gICAgICAgIC8vIGlzIHdoeSB0aGUgUHJvbWlzZSBjb25zdHJ1Y3RvciBzeW5jaHJvbm91c2x5IGludm9rZXMgaXRzXG4gICAgICAgIC8vIGV4ZWN1dG9yIGNhbGxiYWNrLCBhbmQgd2h5IGFzeW5jIGZ1bmN0aW9ucyBzeW5jaHJvbm91c2x5XG4gICAgICAgIC8vIGV4ZWN1dGUgY29kZSBiZWZvcmUgdGhlIGZpcnN0IGF3YWl0LiBTaW5jZSB3ZSBpbXBsZW1lbnQgc2ltcGxlXG4gICAgICAgIC8vIGFzeW5jIGZ1bmN0aW9ucyBpbiB0ZXJtcyBvZiBhc3luYyBnZW5lcmF0b3JzLCBpdCBpcyBlc3BlY2lhbGx5XG4gICAgICAgIC8vIGltcG9ydGFudCB0byBnZXQgdGhpcyByaWdodCwgZXZlbiB0aG91Z2ggaXQgcmVxdWlyZXMgY2FyZS5cbiAgICAgICAgcHJldmlvdXNQcm9taXNlID8gcHJldmlvdXNQcm9taXNlLnRoZW4oXG4gICAgICAgICAgY2FsbEludm9rZVdpdGhNZXRob2RBbmRBcmcsXG4gICAgICAgICAgLy8gQXZvaWQgcHJvcGFnYXRpbmcgZmFpbHVyZXMgdG8gUHJvbWlzZXMgcmV0dXJuZWQgYnkgbGF0ZXJcbiAgICAgICAgICAvLyBpbnZvY2F0aW9ucyBvZiB0aGUgaXRlcmF0b3IuXG4gICAgICAgICAgY2FsbEludm9rZVdpdGhNZXRob2RBbmRBcmdcbiAgICAgICAgKSA6IGNhbGxJbnZva2VXaXRoTWV0aG9kQW5kQXJnKCk7XG4gICAgfVxuXG4gICAgLy8gRGVmaW5lIHRoZSB1bmlmaWVkIGhlbHBlciBtZXRob2QgdGhhdCBpcyB1c2VkIHRvIGltcGxlbWVudCAubmV4dCxcbiAgICAvLyAudGhyb3csIGFuZCAucmV0dXJuIChzZWUgZGVmaW5lSXRlcmF0b3JNZXRob2RzKS5cbiAgICB0aGlzLl9pbnZva2UgPSBlbnF1ZXVlO1xuICB9XG5cbiAgZGVmaW5lSXRlcmF0b3JNZXRob2RzKEFzeW5jSXRlcmF0b3IucHJvdG90eXBlKTtcbiAgQXN5bmNJdGVyYXRvci5wcm90b3R5cGVbYXN5bmNJdGVyYXRvclN5bWJvbF0gPSBmdW5jdGlvbiAoKSB7XG4gICAgcmV0dXJuIHRoaXM7XG4gIH07XG4gIHJ1bnRpbWUuQXN5bmNJdGVyYXRvciA9IEFzeW5jSXRlcmF0b3I7XG5cbiAgLy8gTm90ZSB0aGF0IHNpbXBsZSBhc3luYyBmdW5jdGlvbnMgYXJlIGltcGxlbWVudGVkIG9uIHRvcCBvZlxuICAvLyBBc3luY0l0ZXJhdG9yIG9iamVjdHM7IHRoZXkganVzdCByZXR1cm4gYSBQcm9taXNlIGZvciB0aGUgdmFsdWUgb2ZcbiAgLy8gdGhlIGZpbmFsIHJlc3VsdCBwcm9kdWNlZCBieSB0aGUgaXRlcmF0b3IuXG4gIHJ1bnRpbWUuYXN5bmMgPSBmdW5jdGlvbihpbm5lckZuLCBvdXRlckZuLCBzZWxmLCB0cnlMb2NzTGlzdCkge1xuICAgIHZhciBpdGVyID0gbmV3IEFzeW5jSXRlcmF0b3IoXG4gICAgICB3cmFwKGlubmVyRm4sIG91dGVyRm4sIHNlbGYsIHRyeUxvY3NMaXN0KVxuICAgICk7XG5cbiAgICByZXR1cm4gcnVudGltZS5pc0dlbmVyYXRvckZ1bmN0aW9uKG91dGVyRm4pXG4gICAgICA/IGl0ZXIgLy8gSWYgb3V0ZXJGbiBpcyBhIGdlbmVyYXRvciwgcmV0dXJuIHRoZSBmdWxsIGl0ZXJhdG9yLlxuICAgICAgOiBpdGVyLm5leHQoKS50aGVuKGZ1bmN0aW9uKHJlc3VsdCkge1xuICAgICAgICAgIHJldHVybiByZXN1bHQuZG9uZSA/IHJlc3VsdC52YWx1ZSA6IGl0ZXIubmV4dCgpO1xuICAgICAgICB9KTtcbiAgfTtcblxuICBmdW5jdGlvbiBtYWtlSW52b2tlTWV0aG9kKGlubmVyRm4sIHNlbGYsIGNvbnRleHQpIHtcbiAgICB2YXIgc3RhdGUgPSBHZW5TdGF0ZVN1c3BlbmRlZFN0YXJ0O1xuXG4gICAgcmV0dXJuIGZ1bmN0aW9uIGludm9rZShtZXRob2QsIGFyZykge1xuICAgICAgaWYgKHN0YXRlID09PSBHZW5TdGF0ZUV4ZWN1dGluZykge1xuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXCJHZW5lcmF0b3IgaXMgYWxyZWFkeSBydW5uaW5nXCIpO1xuICAgICAgfVxuXG4gICAgICBpZiAoc3RhdGUgPT09IEdlblN0YXRlQ29tcGxldGVkKSB7XG4gICAgICAgIGlmIChtZXRob2QgPT09IFwidGhyb3dcIikge1xuICAgICAgICAgIHRocm93IGFyZztcbiAgICAgICAgfVxuXG4gICAgICAgIC8vIEJlIGZvcmdpdmluZywgcGVyIDI1LjMuMy4zLjMgb2YgdGhlIHNwZWM6XG4gICAgICAgIC8vIGh0dHBzOi8vcGVvcGxlLm1vemlsbGEub3JnL35qb3JlbmRvcmZmL2VzNi1kcmFmdC5odG1sI3NlYy1nZW5lcmF0b3JyZXN1bWVcbiAgICAgICAgcmV0dXJuIGRvbmVSZXN1bHQoKTtcbiAgICAgIH1cblxuICAgICAgY29udGV4dC5tZXRob2QgPSBtZXRob2Q7XG4gICAgICBjb250ZXh0LmFyZyA9IGFyZztcblxuICAgICAgd2hpbGUgKHRydWUpIHtcbiAgICAgICAgdmFyIGRlbGVnYXRlID0gY29udGV4dC5kZWxlZ2F0ZTtcbiAgICAgICAgaWYgKGRlbGVnYXRlKSB7XG4gICAgICAgICAgdmFyIGRlbGVnYXRlUmVzdWx0ID0gbWF5YmVJbnZva2VEZWxlZ2F0ZShkZWxlZ2F0ZSwgY29udGV4dCk7XG4gICAgICAgICAgaWYgKGRlbGVnYXRlUmVzdWx0KSB7XG4gICAgICAgICAgICBpZiAoZGVsZWdhdGVSZXN1bHQgPT09IENvbnRpbnVlU2VudGluZWwpIGNvbnRpbnVlO1xuICAgICAgICAgICAgcmV0dXJuIGRlbGVnYXRlUmVzdWx0O1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuXG4gICAgICAgIGlmIChjb250ZXh0Lm1ldGhvZCA9PT0gXCJuZXh0XCIpIHtcbiAgICAgICAgICAvLyBTZXR0aW5nIGNvbnRleHQuX3NlbnQgZm9yIGxlZ2FjeSBzdXBwb3J0IG9mIEJhYmVsJ3NcbiAgICAgICAgICAvLyBmdW5jdGlvbi5zZW50IGltcGxlbWVudGF0aW9uLlxuICAgICAgICAgIGNvbnRleHQuc2VudCA9IGNvbnRleHQuX3NlbnQgPSBjb250ZXh0LmFyZztcblxuICAgICAgICB9IGVsc2UgaWYgKGNvbnRleHQubWV0aG9kID09PSBcInRocm93XCIpIHtcbiAgICAgICAgICBpZiAoc3RhdGUgPT09IEdlblN0YXRlU3VzcGVuZGVkU3RhcnQpIHtcbiAgICAgICAgICAgIHN0YXRlID0gR2VuU3RhdGVDb21wbGV0ZWQ7XG4gICAgICAgICAgICB0aHJvdyBjb250ZXh0LmFyZztcbiAgICAgICAgICB9XG5cbiAgICAgICAgICBjb250ZXh0LmRpc3BhdGNoRXhjZXB0aW9uKGNvbnRleHQuYXJnKTtcblxuICAgICAgICB9IGVsc2UgaWYgKGNvbnRleHQubWV0aG9kID09PSBcInJldHVyblwiKSB7XG4gICAgICAgICAgY29udGV4dC5hYnJ1cHQoXCJyZXR1cm5cIiwgY29udGV4dC5hcmcpO1xuICAgICAgICB9XG5cbiAgICAgICAgc3RhdGUgPSBHZW5TdGF0ZUV4ZWN1dGluZztcblxuICAgICAgICB2YXIgcmVjb3JkID0gdHJ5Q2F0Y2goaW5uZXJGbiwgc2VsZiwgY29udGV4dCk7XG4gICAgICAgIGlmIChyZWNvcmQudHlwZSA9PT0gXCJub3JtYWxcIikge1xuICAgICAgICAgIC8vIElmIGFuIGV4Y2VwdGlvbiBpcyB0aHJvd24gZnJvbSBpbm5lckZuLCB3ZSBsZWF2ZSBzdGF0ZSA9PT1cbiAgICAgICAgICAvLyBHZW5TdGF0ZUV4ZWN1dGluZyBhbmQgbG9vcCBiYWNrIGZvciBhbm90aGVyIGludm9jYXRpb24uXG4gICAgICAgICAgc3RhdGUgPSBjb250ZXh0LmRvbmVcbiAgICAgICAgICAgID8gR2VuU3RhdGVDb21wbGV0ZWRcbiAgICAgICAgICAgIDogR2VuU3RhdGVTdXNwZW5kZWRZaWVsZDtcblxuICAgICAgICAgIGlmIChyZWNvcmQuYXJnID09PSBDb250aW51ZVNlbnRpbmVsKSB7XG4gICAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgICB9XG5cbiAgICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgdmFsdWU6IHJlY29yZC5hcmcsXG4gICAgICAgICAgICBkb25lOiBjb250ZXh0LmRvbmVcbiAgICAgICAgICB9O1xuXG4gICAgICAgIH0gZWxzZSBpZiAocmVjb3JkLnR5cGUgPT09IFwidGhyb3dcIikge1xuICAgICAgICAgIHN0YXRlID0gR2VuU3RhdGVDb21wbGV0ZWQ7XG4gICAgICAgICAgLy8gRGlzcGF0Y2ggdGhlIGV4Y2VwdGlvbiBieSBsb29waW5nIGJhY2sgYXJvdW5kIHRvIHRoZVxuICAgICAgICAgIC8vIGNvbnRleHQuZGlzcGF0Y2hFeGNlcHRpb24oY29udGV4dC5hcmcpIGNhbGwgYWJvdmUuXG4gICAgICAgICAgY29udGV4dC5tZXRob2QgPSBcInRocm93XCI7XG4gICAgICAgICAgY29udGV4dC5hcmcgPSByZWNvcmQuYXJnO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfTtcbiAgfVxuXG4gIC8vIENhbGwgZGVsZWdhdGUuaXRlcmF0b3JbY29udGV4dC5tZXRob2RdKGNvbnRleHQuYXJnKSBhbmQgaGFuZGxlIHRoZVxuICAvLyByZXN1bHQsIGVpdGhlciBieSByZXR1cm5pbmcgYSB7IHZhbHVlLCBkb25lIH0gcmVzdWx0IGZyb20gdGhlXG4gIC8vIGRlbGVnYXRlIGl0ZXJhdG9yLCBvciBieSBtb2RpZnlpbmcgY29udGV4dC5tZXRob2QgYW5kIGNvbnRleHQuYXJnLFxuICAvLyBzZXR0aW5nIGNvbnRleHQuZGVsZWdhdGUgdG8gbnVsbCwgYW5kIHJldHVybmluZyB0aGUgQ29udGludWVTZW50aW5lbC5cbiAgZnVuY3Rpb24gbWF5YmVJbnZva2VEZWxlZ2F0ZShkZWxlZ2F0ZSwgY29udGV4dCkge1xuICAgIHZhciBtZXRob2QgPSBkZWxlZ2F0ZS5pdGVyYXRvcltjb250ZXh0Lm1ldGhvZF07XG4gICAgaWYgKG1ldGhvZCA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAvLyBBIC50aHJvdyBvciAucmV0dXJuIHdoZW4gdGhlIGRlbGVnYXRlIGl0ZXJhdG9yIGhhcyBubyAudGhyb3dcbiAgICAgIC8vIG1ldGhvZCBhbHdheXMgdGVybWluYXRlcyB0aGUgeWllbGQqIGxvb3AuXG4gICAgICBjb250ZXh0LmRlbGVnYXRlID0gbnVsbDtcblxuICAgICAgaWYgKGNvbnRleHQubWV0aG9kID09PSBcInRocm93XCIpIHtcbiAgICAgICAgaWYgKGRlbGVnYXRlLml0ZXJhdG9yLnJldHVybikge1xuICAgICAgICAgIC8vIElmIHRoZSBkZWxlZ2F0ZSBpdGVyYXRvciBoYXMgYSByZXR1cm4gbWV0aG9kLCBnaXZlIGl0IGFcbiAgICAgICAgICAvLyBjaGFuY2UgdG8gY2xlYW4gdXAuXG4gICAgICAgICAgY29udGV4dC5tZXRob2QgPSBcInJldHVyblwiO1xuICAgICAgICAgIGNvbnRleHQuYXJnID0gdW5kZWZpbmVkO1xuICAgICAgICAgIG1heWJlSW52b2tlRGVsZWdhdGUoZGVsZWdhdGUsIGNvbnRleHQpO1xuXG4gICAgICAgICAgaWYgKGNvbnRleHQubWV0aG9kID09PSBcInRocm93XCIpIHtcbiAgICAgICAgICAgIC8vIElmIG1heWJlSW52b2tlRGVsZWdhdGUoY29udGV4dCkgY2hhbmdlZCBjb250ZXh0Lm1ldGhvZCBmcm9tXG4gICAgICAgICAgICAvLyBcInJldHVyblwiIHRvIFwidGhyb3dcIiwgbGV0IHRoYXQgb3ZlcnJpZGUgdGhlIFR5cGVFcnJvciBiZWxvdy5cbiAgICAgICAgICAgIHJldHVybiBDb250aW51ZVNlbnRpbmVsO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuXG4gICAgICAgIGNvbnRleHQubWV0aG9kID0gXCJ0aHJvd1wiO1xuICAgICAgICBjb250ZXh0LmFyZyA9IG5ldyBUeXBlRXJyb3IoXG4gICAgICAgICAgXCJUaGUgaXRlcmF0b3IgZG9lcyBub3QgcHJvdmlkZSBhICd0aHJvdycgbWV0aG9kXCIpO1xuICAgICAgfVxuXG4gICAgICByZXR1cm4gQ29udGludWVTZW50aW5lbDtcbiAgICB9XG5cbiAgICB2YXIgcmVjb3JkID0gdHJ5Q2F0Y2gobWV0aG9kLCBkZWxlZ2F0ZS5pdGVyYXRvciwgY29udGV4dC5hcmcpO1xuXG4gICAgaWYgKHJlY29yZC50eXBlID09PSBcInRocm93XCIpIHtcbiAgICAgIGNvbnRleHQubWV0aG9kID0gXCJ0aHJvd1wiO1xuICAgICAgY29udGV4dC5hcmcgPSByZWNvcmQuYXJnO1xuICAgICAgY29udGV4dC5kZWxlZ2F0ZSA9IG51bGw7XG4gICAgICByZXR1cm4gQ29udGludWVTZW50aW5lbDtcbiAgICB9XG5cbiAgICB2YXIgaW5mbyA9IHJlY29yZC5hcmc7XG5cbiAgICBpZiAoISBpbmZvKSB7XG4gICAgICBjb250ZXh0Lm1ldGhvZCA9IFwidGhyb3dcIjtcbiAgICAgIGNvbnRleHQuYXJnID0gbmV3IFR5cGVFcnJvcihcIml0ZXJhdG9yIHJlc3VsdCBpcyBub3QgYW4gb2JqZWN0XCIpO1xuICAgICAgY29udGV4dC5kZWxlZ2F0ZSA9IG51bGw7XG4gICAgICByZXR1cm4gQ29udGludWVTZW50aW5lbDtcbiAgICB9XG5cbiAgICBpZiAoaW5mby5kb25lKSB7XG4gICAgICAvLyBBc3NpZ24gdGhlIHJlc3VsdCBvZiB0aGUgZmluaXNoZWQgZGVsZWdhdGUgdG8gdGhlIHRlbXBvcmFyeVxuICAgICAgLy8gdmFyaWFibGUgc3BlY2lmaWVkIGJ5IGRlbGVnYXRlLnJlc3VsdE5hbWUgKHNlZSBkZWxlZ2F0ZVlpZWxkKS5cbiAgICAgIGNvbnRleHRbZGVsZWdhdGUucmVzdWx0TmFtZV0gPSBpbmZvLnZhbHVlO1xuXG4gICAgICAvLyBSZXN1bWUgZXhlY3V0aW9uIGF0IHRoZSBkZXNpcmVkIGxvY2F0aW9uIChzZWUgZGVsZWdhdGVZaWVsZCkuXG4gICAgICBjb250ZXh0Lm5leHQgPSBkZWxlZ2F0ZS5uZXh0TG9jO1xuXG4gICAgICAvLyBJZiBjb250ZXh0Lm1ldGhvZCB3YXMgXCJ0aHJvd1wiIGJ1dCB0aGUgZGVsZWdhdGUgaGFuZGxlZCB0aGVcbiAgICAgIC8vIGV4Y2VwdGlvbiwgbGV0IHRoZSBvdXRlciBnZW5lcmF0b3IgcHJvY2VlZCBub3JtYWxseS4gSWZcbiAgICAgIC8vIGNvbnRleHQubWV0aG9kIHdhcyBcIm5leHRcIiwgZm9yZ2V0IGNvbnRleHQuYXJnIHNpbmNlIGl0IGhhcyBiZWVuXG4gICAgICAvLyBcImNvbnN1bWVkXCIgYnkgdGhlIGRlbGVnYXRlIGl0ZXJhdG9yLiBJZiBjb250ZXh0Lm1ldGhvZCB3YXNcbiAgICAgIC8vIFwicmV0dXJuXCIsIGFsbG93IHRoZSBvcmlnaW5hbCAucmV0dXJuIGNhbGwgdG8gY29udGludWUgaW4gdGhlXG4gICAgICAvLyBvdXRlciBnZW5lcmF0b3IuXG4gICAgICBpZiAoY29udGV4dC5tZXRob2QgIT09IFwicmV0dXJuXCIpIHtcbiAgICAgICAgY29udGV4dC5tZXRob2QgPSBcIm5leHRcIjtcbiAgICAgICAgY29udGV4dC5hcmcgPSB1bmRlZmluZWQ7XG4gICAgICB9XG5cbiAgICB9IGVsc2Uge1xuICAgICAgLy8gUmUteWllbGQgdGhlIHJlc3VsdCByZXR1cm5lZCBieSB0aGUgZGVsZWdhdGUgbWV0aG9kLlxuICAgICAgcmV0dXJuIGluZm87XG4gICAgfVxuXG4gICAgLy8gVGhlIGRlbGVnYXRlIGl0ZXJhdG9yIGlzIGZpbmlzaGVkLCBzbyBmb3JnZXQgaXQgYW5kIGNvbnRpbnVlIHdpdGhcbiAgICAvLyB0aGUgb3V0ZXIgZ2VuZXJhdG9yLlxuICAgIGNvbnRleHQuZGVsZWdhdGUgPSBudWxsO1xuICAgIHJldHVybiBDb250aW51ZVNlbnRpbmVsO1xuICB9XG5cbiAgLy8gRGVmaW5lIEdlbmVyYXRvci5wcm90b3R5cGUue25leHQsdGhyb3cscmV0dXJufSBpbiB0ZXJtcyBvZiB0aGVcbiAgLy8gdW5pZmllZCAuX2ludm9rZSBoZWxwZXIgbWV0aG9kLlxuICBkZWZpbmVJdGVyYXRvck1ldGhvZHMoR3ApO1xuXG4gIEdwW3RvU3RyaW5nVGFnU3ltYm9sXSA9IFwiR2VuZXJhdG9yXCI7XG5cbiAgLy8gQSBHZW5lcmF0b3Igc2hvdWxkIGFsd2F5cyByZXR1cm4gaXRzZWxmIGFzIHRoZSBpdGVyYXRvciBvYmplY3Qgd2hlbiB0aGVcbiAgLy8gQEBpdGVyYXRvciBmdW5jdGlvbiBpcyBjYWxsZWQgb24gaXQuIFNvbWUgYnJvd3NlcnMnIGltcGxlbWVudGF0aW9ucyBvZiB0aGVcbiAgLy8gaXRlcmF0b3IgcHJvdG90eXBlIGNoYWluIGluY29ycmVjdGx5IGltcGxlbWVudCB0aGlzLCBjYXVzaW5nIHRoZSBHZW5lcmF0b3JcbiAgLy8gb2JqZWN0IHRvIG5vdCBiZSByZXR1cm5lZCBmcm9tIHRoaXMgY2FsbC4gVGhpcyBlbnN1cmVzIHRoYXQgZG9lc24ndCBoYXBwZW4uXG4gIC8vIFNlZSBodHRwczovL2dpdGh1Yi5jb20vZmFjZWJvb2svcmVnZW5lcmF0b3IvaXNzdWVzLzI3NCBmb3IgbW9yZSBkZXRhaWxzLlxuICBHcFtpdGVyYXRvclN5bWJvbF0gPSBmdW5jdGlvbigpIHtcbiAgICByZXR1cm4gdGhpcztcbiAgfTtcblxuICBHcC50b1N0cmluZyA9IGZ1bmN0aW9uKCkge1xuICAgIHJldHVybiBcIltvYmplY3QgR2VuZXJhdG9yXVwiO1xuICB9O1xuXG4gIGZ1bmN0aW9uIHB1c2hUcnlFbnRyeShsb2NzKSB7XG4gICAgdmFyIGVudHJ5ID0geyB0cnlMb2M6IGxvY3NbMF0gfTtcblxuICAgIGlmICgxIGluIGxvY3MpIHtcbiAgICAgIGVudHJ5LmNhdGNoTG9jID0gbG9jc1sxXTtcbiAgICB9XG5cbiAgICBpZiAoMiBpbiBsb2NzKSB7XG4gICAgICBlbnRyeS5maW5hbGx5TG9jID0gbG9jc1syXTtcbiAgICAgIGVudHJ5LmFmdGVyTG9jID0gbG9jc1szXTtcbiAgICB9XG5cbiAgICB0aGlzLnRyeUVudHJpZXMucHVzaChlbnRyeSk7XG4gIH1cblxuICBmdW5jdGlvbiByZXNldFRyeUVudHJ5KGVudHJ5KSB7XG4gICAgdmFyIHJlY29yZCA9IGVudHJ5LmNvbXBsZXRpb24gfHwge307XG4gICAgcmVjb3JkLnR5cGUgPSBcIm5vcm1hbFwiO1xuICAgIGRlbGV0ZSByZWNvcmQuYXJnO1xuICAgIGVudHJ5LmNvbXBsZXRpb24gPSByZWNvcmQ7XG4gIH1cblxuICBmdW5jdGlvbiBDb250ZXh0KHRyeUxvY3NMaXN0KSB7XG4gICAgLy8gVGhlIHJvb3QgZW50cnkgb2JqZWN0IChlZmZlY3RpdmVseSBhIHRyeSBzdGF0ZW1lbnQgd2l0aG91dCBhIGNhdGNoXG4gICAgLy8gb3IgYSBmaW5hbGx5IGJsb2NrKSBnaXZlcyB1cyBhIHBsYWNlIHRvIHN0b3JlIHZhbHVlcyB0aHJvd24gZnJvbVxuICAgIC8vIGxvY2F0aW9ucyB3aGVyZSB0aGVyZSBpcyBubyBlbmNsb3NpbmcgdHJ5IHN0YXRlbWVudC5cbiAgICB0aGlzLnRyeUVudHJpZXMgPSBbeyB0cnlMb2M6IFwicm9vdFwiIH1dO1xuICAgIHRyeUxvY3NMaXN0LmZvckVhY2gocHVzaFRyeUVudHJ5LCB0aGlzKTtcbiAgICB0aGlzLnJlc2V0KHRydWUpO1xuICB9XG5cbiAgcnVudGltZS5rZXlzID0gZnVuY3Rpb24ob2JqZWN0KSB7XG4gICAgdmFyIGtleXMgPSBbXTtcbiAgICBmb3IgKHZhciBrZXkgaW4gb2JqZWN0KSB7XG4gICAgICBrZXlzLnB1c2goa2V5KTtcbiAgICB9XG4gICAga2V5cy5yZXZlcnNlKCk7XG5cbiAgICAvLyBSYXRoZXIgdGhhbiByZXR1cm5pbmcgYW4gb2JqZWN0IHdpdGggYSBuZXh0IG1ldGhvZCwgd2Uga2VlcFxuICAgIC8vIHRoaW5ncyBzaW1wbGUgYW5kIHJldHVybiB0aGUgbmV4dCBmdW5jdGlvbiBpdHNlbGYuXG4gICAgcmV0dXJuIGZ1bmN0aW9uIG5leHQoKSB7XG4gICAgICB3aGlsZSAoa2V5cy5sZW5ndGgpIHtcbiAgICAgICAgdmFyIGtleSA9IGtleXMucG9wKCk7XG4gICAgICAgIGlmIChrZXkgaW4gb2JqZWN0KSB7XG4gICAgICAgICAgbmV4dC52YWx1ZSA9IGtleTtcbiAgICAgICAgICBuZXh0LmRvbmUgPSBmYWxzZTtcbiAgICAgICAgICByZXR1cm4gbmV4dDtcbiAgICAgICAgfVxuICAgICAgfVxuXG4gICAgICAvLyBUbyBhdm9pZCBjcmVhdGluZyBhbiBhZGRpdGlvbmFsIG9iamVjdCwgd2UganVzdCBoYW5nIHRoZSAudmFsdWVcbiAgICAgIC8vIGFuZCAuZG9uZSBwcm9wZXJ0aWVzIG9mZiB0aGUgbmV4dCBmdW5jdGlvbiBvYmplY3QgaXRzZWxmLiBUaGlzXG4gICAgICAvLyBhbHNvIGVuc3VyZXMgdGhhdCB0aGUgbWluaWZpZXIgd2lsbCBub3QgYW5vbnltaXplIHRoZSBmdW5jdGlvbi5cbiAgICAgIG5leHQuZG9uZSA9IHRydWU7XG4gICAgICByZXR1cm4gbmV4dDtcbiAgICB9O1xuICB9O1xuXG4gIGZ1bmN0aW9uIHZhbHVlcyhpdGVyYWJsZSkge1xuICAgIGlmIChpdGVyYWJsZSkge1xuICAgICAgdmFyIGl0ZXJhdG9yTWV0aG9kID0gaXRlcmFibGVbaXRlcmF0b3JTeW1ib2xdO1xuICAgICAgaWYgKGl0ZXJhdG9yTWV0aG9kKSB7XG4gICAgICAgIHJldHVybiBpdGVyYXRvck1ldGhvZC5jYWxsKGl0ZXJhYmxlKTtcbiAgICAgIH1cblxuICAgICAgaWYgKHR5cGVvZiBpdGVyYWJsZS5uZXh0ID09PSBcImZ1bmN0aW9uXCIpIHtcbiAgICAgICAgcmV0dXJuIGl0ZXJhYmxlO1xuICAgICAgfVxuXG4gICAgICBpZiAoIWlzTmFOKGl0ZXJhYmxlLmxlbmd0aCkpIHtcbiAgICAgICAgdmFyIGkgPSAtMSwgbmV4dCA9IGZ1bmN0aW9uIG5leHQoKSB7XG4gICAgICAgICAgd2hpbGUgKCsraSA8IGl0ZXJhYmxlLmxlbmd0aCkge1xuICAgICAgICAgICAgaWYgKGhhc093bi5jYWxsKGl0ZXJhYmxlLCBpKSkge1xuICAgICAgICAgICAgICBuZXh0LnZhbHVlID0gaXRlcmFibGVbaV07XG4gICAgICAgICAgICAgIG5leHQuZG9uZSA9IGZhbHNlO1xuICAgICAgICAgICAgICByZXR1cm4gbmV4dDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9XG5cbiAgICAgICAgICBuZXh0LnZhbHVlID0gdW5kZWZpbmVkO1xuICAgICAgICAgIG5leHQuZG9uZSA9IHRydWU7XG5cbiAgICAgICAgICByZXR1cm4gbmV4dDtcbiAgICAgICAgfTtcblxuICAgICAgICByZXR1cm4gbmV4dC5uZXh0ID0gbmV4dDtcbiAgICAgIH1cbiAgICB9XG5cbiAgICAvLyBSZXR1cm4gYW4gaXRlcmF0b3Igd2l0aCBubyB2YWx1ZXMuXG4gICAgcmV0dXJuIHsgbmV4dDogZG9uZVJlc3VsdCB9O1xuICB9XG4gIHJ1bnRpbWUudmFsdWVzID0gdmFsdWVzO1xuXG4gIGZ1bmN0aW9uIGRvbmVSZXN1bHQoKSB7XG4gICAgcmV0dXJuIHsgdmFsdWU6IHVuZGVmaW5lZCwgZG9uZTogdHJ1ZSB9O1xuICB9XG5cbiAgQ29udGV4dC5wcm90b3R5cGUgPSB7XG4gICAgY29uc3RydWN0b3I6IENvbnRleHQsXG5cbiAgICByZXNldDogZnVuY3Rpb24oc2tpcFRlbXBSZXNldCkge1xuICAgICAgdGhpcy5wcmV2ID0gMDtcbiAgICAgIHRoaXMubmV4dCA9IDA7XG4gICAgICAvLyBSZXNldHRpbmcgY29udGV4dC5fc2VudCBmb3IgbGVnYWN5IHN1cHBvcnQgb2YgQmFiZWwnc1xuICAgICAgLy8gZnVuY3Rpb24uc2VudCBpbXBsZW1lbnRhdGlvbi5cbiAgICAgIHRoaXMuc2VudCA9IHRoaXMuX3NlbnQgPSB1bmRlZmluZWQ7XG4gICAgICB0aGlzLmRvbmUgPSBmYWxzZTtcbiAgICAgIHRoaXMuZGVsZWdhdGUgPSBudWxsO1xuXG4gICAgICB0aGlzLm1ldGhvZCA9IFwibmV4dFwiO1xuICAgICAgdGhpcy5hcmcgPSB1bmRlZmluZWQ7XG5cbiAgICAgIHRoaXMudHJ5RW50cmllcy5mb3JFYWNoKHJlc2V0VHJ5RW50cnkpO1xuXG4gICAgICBpZiAoIXNraXBUZW1wUmVzZXQpIHtcbiAgICAgICAgZm9yICh2YXIgbmFtZSBpbiB0aGlzKSB7XG4gICAgICAgICAgLy8gTm90IHN1cmUgYWJvdXQgdGhlIG9wdGltYWwgb3JkZXIgb2YgdGhlc2UgY29uZGl0aW9uczpcbiAgICAgICAgICBpZiAobmFtZS5jaGFyQXQoMCkgPT09IFwidFwiICYmXG4gICAgICAgICAgICAgIGhhc093bi5jYWxsKHRoaXMsIG5hbWUpICYmXG4gICAgICAgICAgICAgICFpc05hTigrbmFtZS5zbGljZSgxKSkpIHtcbiAgICAgICAgICAgIHRoaXNbbmFtZV0gPSB1bmRlZmluZWQ7XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9XG4gICAgfSxcblxuICAgIHN0b3A6IGZ1bmN0aW9uKCkge1xuICAgICAgdGhpcy5kb25lID0gdHJ1ZTtcblxuICAgICAgdmFyIHJvb3RFbnRyeSA9IHRoaXMudHJ5RW50cmllc1swXTtcbiAgICAgIHZhciByb290UmVjb3JkID0gcm9vdEVudHJ5LmNvbXBsZXRpb247XG4gICAgICBpZiAocm9vdFJlY29yZC50eXBlID09PSBcInRocm93XCIpIHtcbiAgICAgICAgdGhyb3cgcm9vdFJlY29yZC5hcmc7XG4gICAgICB9XG5cbiAgICAgIHJldHVybiB0aGlzLnJ2YWw7XG4gICAgfSxcblxuICAgIGRpc3BhdGNoRXhjZXB0aW9uOiBmdW5jdGlvbihleGNlcHRpb24pIHtcbiAgICAgIGlmICh0aGlzLmRvbmUpIHtcbiAgICAgICAgdGhyb3cgZXhjZXB0aW9uO1xuICAgICAgfVxuXG4gICAgICB2YXIgY29udGV4dCA9IHRoaXM7XG4gICAgICBmdW5jdGlvbiBoYW5kbGUobG9jLCBjYXVnaHQpIHtcbiAgICAgICAgcmVjb3JkLnR5cGUgPSBcInRocm93XCI7XG4gICAgICAgIHJlY29yZC5hcmcgPSBleGNlcHRpb247XG4gICAgICAgIGNvbnRleHQubmV4dCA9IGxvYztcblxuICAgICAgICBpZiAoY2F1Z2h0KSB7XG4gICAgICAgICAgLy8gSWYgdGhlIGRpc3BhdGNoZWQgZXhjZXB0aW9uIHdhcyBjYXVnaHQgYnkgYSBjYXRjaCBibG9jayxcbiAgICAgICAgICAvLyB0aGVuIGxldCB0aGF0IGNhdGNoIGJsb2NrIGhhbmRsZSB0aGUgZXhjZXB0aW9uIG5vcm1hbGx5LlxuICAgICAgICAgIGNvbnRleHQubWV0aG9kID0gXCJuZXh0XCI7XG4gICAgICAgICAgY29udGV4dC5hcmcgPSB1bmRlZmluZWQ7XG4gICAgICAgIH1cblxuICAgICAgICByZXR1cm4gISEgY2F1Z2h0O1xuICAgICAgfVxuXG4gICAgICBmb3IgKHZhciBpID0gdGhpcy50cnlFbnRyaWVzLmxlbmd0aCAtIDE7IGkgPj0gMDsgLS1pKSB7XG4gICAgICAgIHZhciBlbnRyeSA9IHRoaXMudHJ5RW50cmllc1tpXTtcbiAgICAgICAgdmFyIHJlY29yZCA9IGVudHJ5LmNvbXBsZXRpb247XG5cbiAgICAgICAgaWYgKGVudHJ5LnRyeUxvYyA9PT0gXCJyb290XCIpIHtcbiAgICAgICAgICAvLyBFeGNlcHRpb24gdGhyb3duIG91dHNpZGUgb2YgYW55IHRyeSBibG9jayB0aGF0IGNvdWxkIGhhbmRsZVxuICAgICAgICAgIC8vIGl0LCBzbyBzZXQgdGhlIGNvbXBsZXRpb24gdmFsdWUgb2YgdGhlIGVudGlyZSBmdW5jdGlvbiB0b1xuICAgICAgICAgIC8vIHRocm93IHRoZSBleGNlcHRpb24uXG4gICAgICAgICAgcmV0dXJuIGhhbmRsZShcImVuZFwiKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGlmIChlbnRyeS50cnlMb2MgPD0gdGhpcy5wcmV2KSB7XG4gICAgICAgICAgdmFyIGhhc0NhdGNoID0gaGFzT3duLmNhbGwoZW50cnksIFwiY2F0Y2hMb2NcIik7XG4gICAgICAgICAgdmFyIGhhc0ZpbmFsbHkgPSBoYXNPd24uY2FsbChlbnRyeSwgXCJmaW5hbGx5TG9jXCIpO1xuXG4gICAgICAgICAgaWYgKGhhc0NhdGNoICYmIGhhc0ZpbmFsbHkpIHtcbiAgICAgICAgICAgIGlmICh0aGlzLnByZXYgPCBlbnRyeS5jYXRjaExvYykge1xuICAgICAgICAgICAgICByZXR1cm4gaGFuZGxlKGVudHJ5LmNhdGNoTG9jLCB0cnVlKTtcbiAgICAgICAgICAgIH0gZWxzZSBpZiAodGhpcy5wcmV2IDwgZW50cnkuZmluYWxseUxvYykge1xuICAgICAgICAgICAgICByZXR1cm4gaGFuZGxlKGVudHJ5LmZpbmFsbHlMb2MpO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgfSBlbHNlIGlmIChoYXNDYXRjaCkge1xuICAgICAgICAgICAgaWYgKHRoaXMucHJldiA8IGVudHJ5LmNhdGNoTG9jKSB7XG4gICAgICAgICAgICAgIHJldHVybiBoYW5kbGUoZW50cnkuY2F0Y2hMb2MsIHRydWUpO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgfSBlbHNlIGlmIChoYXNGaW5hbGx5KSB7XG4gICAgICAgICAgICBpZiAodGhpcy5wcmV2IDwgZW50cnkuZmluYWxseUxvYykge1xuICAgICAgICAgICAgICByZXR1cm4gaGFuZGxlKGVudHJ5LmZpbmFsbHlMb2MpO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihcInRyeSBzdGF0ZW1lbnQgd2l0aG91dCBjYXRjaCBvciBmaW5hbGx5XCIpO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfVxuICAgIH0sXG5cbiAgICBhYnJ1cHQ6IGZ1bmN0aW9uKHR5cGUsIGFyZykge1xuICAgICAgZm9yICh2YXIgaSA9IHRoaXMudHJ5RW50cmllcy5sZW5ndGggLSAxOyBpID49IDA7IC0taSkge1xuICAgICAgICB2YXIgZW50cnkgPSB0aGlzLnRyeUVudHJpZXNbaV07XG4gICAgICAgIGlmIChlbnRyeS50cnlMb2MgPD0gdGhpcy5wcmV2ICYmXG4gICAgICAgICAgICBoYXNPd24uY2FsbChlbnRyeSwgXCJmaW5hbGx5TG9jXCIpICYmXG4gICAgICAgICAgICB0aGlzLnByZXYgPCBlbnRyeS5maW5hbGx5TG9jKSB7XG4gICAgICAgICAgdmFyIGZpbmFsbHlFbnRyeSA9IGVudHJ5O1xuICAgICAgICAgIGJyZWFrO1xuICAgICAgICB9XG4gICAgICB9XG5cbiAgICAgIGlmIChmaW5hbGx5RW50cnkgJiZcbiAgICAgICAgICAodHlwZSA9PT0gXCJicmVha1wiIHx8XG4gICAgICAgICAgIHR5cGUgPT09IFwiY29udGludWVcIikgJiZcbiAgICAgICAgICBmaW5hbGx5RW50cnkudHJ5TG9jIDw9IGFyZyAmJlxuICAgICAgICAgIGFyZyA8PSBmaW5hbGx5RW50cnkuZmluYWxseUxvYykge1xuICAgICAgICAvLyBJZ25vcmUgdGhlIGZpbmFsbHkgZW50cnkgaWYgY29udHJvbCBpcyBub3QganVtcGluZyB0byBhXG4gICAgICAgIC8vIGxvY2F0aW9uIG91dHNpZGUgdGhlIHRyeS9jYXRjaCBibG9jay5cbiAgICAgICAgZmluYWxseUVudHJ5ID0gbnVsbDtcbiAgICAgIH1cblxuICAgICAgdmFyIHJlY29yZCA9IGZpbmFsbHlFbnRyeSA/IGZpbmFsbHlFbnRyeS5jb21wbGV0aW9uIDoge307XG4gICAgICByZWNvcmQudHlwZSA9IHR5cGU7XG4gICAgICByZWNvcmQuYXJnID0gYXJnO1xuXG4gICAgICBpZiAoZmluYWxseUVudHJ5KSB7XG4gICAgICAgIHRoaXMubWV0aG9kID0gXCJuZXh0XCI7XG4gICAgICAgIHRoaXMubmV4dCA9IGZpbmFsbHlFbnRyeS5maW5hbGx5TG9jO1xuICAgICAgICByZXR1cm4gQ29udGludWVTZW50aW5lbDtcbiAgICAgIH1cblxuICAgICAgcmV0dXJuIHRoaXMuY29tcGxldGUocmVjb3JkKTtcbiAgICB9LFxuXG4gICAgY29tcGxldGU6IGZ1bmN0aW9uKHJlY29yZCwgYWZ0ZXJMb2MpIHtcbiAgICAgIGlmIChyZWNvcmQudHlwZSA9PT0gXCJ0aHJvd1wiKSB7XG4gICAgICAgIHRocm93IHJlY29yZC5hcmc7XG4gICAgICB9XG5cbiAgICAgIGlmIChyZWNvcmQudHlwZSA9PT0gXCJicmVha1wiIHx8XG4gICAgICAgICAgcmVjb3JkLnR5cGUgPT09IFwiY29udGludWVcIikge1xuICAgICAgICB0aGlzLm5leHQgPSByZWNvcmQuYXJnO1xuICAgICAgfSBlbHNlIGlmIChyZWNvcmQudHlwZSA9PT0gXCJyZXR1cm5cIikge1xuICAgICAgICB0aGlzLnJ2YWwgPSB0aGlzLmFyZyA9IHJlY29yZC5hcmc7XG4gICAgICAgIHRoaXMubWV0aG9kID0gXCJyZXR1cm5cIjtcbiAgICAgICAgdGhpcy5uZXh0ID0gXCJlbmRcIjtcbiAgICAgIH0gZWxzZSBpZiAocmVjb3JkLnR5cGUgPT09IFwibm9ybWFsXCIgJiYgYWZ0ZXJMb2MpIHtcbiAgICAgICAgdGhpcy5uZXh0ID0gYWZ0ZXJMb2M7XG4gICAgICB9XG5cbiAgICAgIHJldHVybiBDb250aW51ZVNlbnRpbmVsO1xuICAgIH0sXG5cbiAgICBmaW5pc2g6IGZ1bmN0aW9uKGZpbmFsbHlMb2MpIHtcbiAgICAgIGZvciAodmFyIGkgPSB0aGlzLnRyeUVudHJpZXMubGVuZ3RoIC0gMTsgaSA+PSAwOyAtLWkpIHtcbiAgICAgICAgdmFyIGVudHJ5ID0gdGhpcy50cnlFbnRyaWVzW2ldO1xuICAgICAgICBpZiAoZW50cnkuZmluYWxseUxvYyA9PT0gZmluYWxseUxvYykge1xuICAgICAgICAgIHRoaXMuY29tcGxldGUoZW50cnkuY29tcGxldGlvbiwgZW50cnkuYWZ0ZXJMb2MpO1xuICAgICAgICAgIHJlc2V0VHJ5RW50cnkoZW50cnkpO1xuICAgICAgICAgIHJldHVybiBDb250aW51ZVNlbnRpbmVsO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfSxcblxuICAgIFwiY2F0Y2hcIjogZnVuY3Rpb24odHJ5TG9jKSB7XG4gICAgICBmb3IgKHZhciBpID0gdGhpcy50cnlFbnRyaWVzLmxlbmd0aCAtIDE7IGkgPj0gMDsgLS1pKSB7XG4gICAgICAgIHZhciBlbnRyeSA9IHRoaXMudHJ5RW50cmllc1tpXTtcbiAgICAgICAgaWYgKGVudHJ5LnRyeUxvYyA9PT0gdHJ5TG9jKSB7XG4gICAgICAgICAgdmFyIHJlY29yZCA9IGVudHJ5LmNvbXBsZXRpb247XG4gICAgICAgICAgaWYgKHJlY29yZC50eXBlID09PSBcInRocm93XCIpIHtcbiAgICAgICAgICAgIHZhciB0aHJvd24gPSByZWNvcmQuYXJnO1xuICAgICAgICAgICAgcmVzZXRUcnlFbnRyeShlbnRyeSk7XG4gICAgICAgICAgfVxuICAgICAgICAgIHJldHVybiB0aHJvd247XG4gICAgICAgIH1cbiAgICAgIH1cblxuICAgICAgLy8gVGhlIGNvbnRleHQuY2F0Y2ggbWV0aG9kIG11c3Qgb25seSBiZSBjYWxsZWQgd2l0aCBhIGxvY2F0aW9uXG4gICAgICAvLyBhcmd1bWVudCB0aGF0IGNvcnJlc3BvbmRzIHRvIGEga25vd24gY2F0Y2ggYmxvY2suXG4gICAgICB0aHJvdyBuZXcgRXJyb3IoXCJpbGxlZ2FsIGNhdGNoIGF0dGVtcHRcIik7XG4gICAgfSxcblxuICAgIGRlbGVnYXRlWWllbGQ6IGZ1bmN0aW9uKGl0ZXJhYmxlLCByZXN1bHROYW1lLCBuZXh0TG9jKSB7XG4gICAgICB0aGlzLmRlbGVnYXRlID0ge1xuICAgICAgICBpdGVyYXRvcjogdmFsdWVzKGl0ZXJhYmxlKSxcbiAgICAgICAgcmVzdWx0TmFtZTogcmVzdWx0TmFtZSxcbiAgICAgICAgbmV4dExvYzogbmV4dExvY1xuICAgICAgfTtcblxuICAgICAgaWYgKHRoaXMubWV0aG9kID09PSBcIm5leHRcIikge1xuICAgICAgICAvLyBEZWxpYmVyYXRlbHkgZm9yZ2V0IHRoZSBsYXN0IHNlbnQgdmFsdWUgc28gdGhhdCB3ZSBkb24ndFxuICAgICAgICAvLyBhY2NpZGVudGFsbHkgcGFzcyBpdCBvbiB0byB0aGUgZGVsZWdhdGUuXG4gICAgICAgIHRoaXMuYXJnID0gdW5kZWZpbmVkO1xuICAgICAgfVxuXG4gICAgICByZXR1cm4gQ29udGludWVTZW50aW5lbDtcbiAgICB9XG4gIH07XG59KShcbiAgLy8gQW1vbmcgdGhlIHZhcmlvdXMgdHJpY2tzIGZvciBvYnRhaW5pbmcgYSByZWZlcmVuY2UgdG8gdGhlIGdsb2JhbFxuICAvLyBvYmplY3QsIHRoaXMgc2VlbXMgdG8gYmUgdGhlIG1vc3QgcmVsaWFibGUgdGVjaG5pcXVlIHRoYXQgZG9lcyBub3RcbiAgLy8gdXNlIGluZGlyZWN0IGV2YWwgKHdoaWNoIHZpb2xhdGVzIENvbnRlbnQgU2VjdXJpdHkgUG9saWN5KS5cbiAgdHlwZW9mIGdsb2JhbCA9PT0gXCJvYmplY3RcIiA/IGdsb2JhbCA6XG4gIHR5cGVvZiB3aW5kb3cgPT09IFwib2JqZWN0XCIgPyB3aW5kb3cgOlxuICB0eXBlb2Ygc2VsZiA9PT0gXCJvYmplY3RcIiA/IHNlbGYgOiB0aGlzXG4pO1xuIiwiXCJ1c2Ugc3RyaWN0XCI7XG5cbmNsYXNzIEd6aXAgZXh0ZW5kcyByZXF1aXJlKCcuL3dvcmtlci1tZXNzZW5nZXInKSB7XG4gIGNvbnN0cnVjdG9yKCkge1xuICAgIHN1cGVyKCdqcy9nemlwLXdvcmtlci5qcycpO1xuICB9XG5cbiAgY29tcHJlc3Moc3ZnRGF0YSkge1xuICAgIHJldHVybiB0aGlzLl9yZXF1ZXN0UmVzcG9uc2Uoe1xuICAgICAgZGF0YTogc3ZnRGF0YVxuICAgIH0pO1xuICB9XG59XG5cbm1vZHVsZS5leHBvcnRzID0gR3ppcDsiLCIndXNlIHN0cmljdCc7XG52YXIgbG9hZFNjcmlwdHMgPSByZXF1aXJlKFwiLi9sb2FkLXNjcmlwdHNcIik7XG52YXIgcG9seWZpbGxzTmVlZGVkID0gW107XG5cbmlmICghd2luZG93LlByb21pc2UpIHsgLy8gSUUgOihcbiAgcG9seWZpbGxzTmVlZGVkLnB1c2goJ2pzL3Byb21pc2UtcG9seWZpbGwuanMnKTtcbn1cblxuLy8gSSdtIHN1cmUgdXNlci1hZ2VudCBzbmlmZmluZyB3aWxsIGJlIGZpaWlpaW5lXG5pZiAoLyhpUGhvbmV8aVBhZCk7Ly50ZXN0KG5hdmlnYXRvci51c2VyQWdlbnQpKSB7XG4gIHBvbHlmaWxsc05lZWRlZC5wdXNoKCdqcy9mYXN0Y2xpY2suanMnKTtcbn1cblxubG9hZFNjcmlwdHMocG9seWZpbGxzTmVlZGVkLCBmdW5jdGlvbigpIHtcbiAgcmVxdWlyZSgncmVnZW5lcmF0b3ItcnVudGltZS9ydW50aW1lJyk7XG4gIHJlcXVpcmUoJy4vdXRpbHMnKS50cmFja0ZvY3VzTWV0aG9kKCk7XG4gIG5ldyAocmVxdWlyZSgnLi9tYWluLWNvbnRyb2xsZXInKSk7XG59LCBmdW5jdGlvbigpIHtcbiAgY29uc29sZS5lcnJvcihcIkZhaWxlZCB0byBsb2FkIHBvbHlmaWxsc1wiKTtcbn0pO1xuIiwiXCJ1c2Ugc3RyaWN0XCI7XG5cbi8vIFRoaXMgaXMgaW4gaXRzIG93biBmaWxlIHJhdGhlciB0aGFuIHV0aWxzLmpzIGJlY2F1c2UgaXQncyB1c2VkIGZvciBsb2FkaW5nIHBvbHlmaWxscyxcbi8vIGFuZCBwcm9taXNlcywgaXMgb25lIG9mIHRoZSB0aGluZ3MgdGhhdCBnZXRzIHBvbHlmaWxsZWQsIGhlbmNlIHRoZSBjYWxsYmFja3Ncbm1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24gbG9hZFNjcmlwdCh1cmxzLCB5ZXlDYWxsYmFjaywgbmV5Q2FsbGJhY2spIHtcbiAgdmFyIGNvdW50ID0gdXJscy5sZW5ndGg7XG4gIHZhciBlcnJvcmVkID0gZmFsc2U7XG5cbiAgaWYgKHVybHMubGVuZ3RoID09IDApIHJldHVybiB5ZXlDYWxsYmFjaygpO1xuXG4gIHVybHMuZm9yRWFjaCh1cmwgPT4ge1xuICAgIHZhciBzY3JpcHQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdzY3JpcHQnKTtcbiAgICBzY3JpcHQub25sb2FkID0gZnVuY3Rpb24oKSB7XG4gICAgICBpZiAoZXJyb3JlZCkgcmV0dXJuO1xuICAgICAgaWYgKCEtLWNvdW50KSB5ZXlDYWxsYmFjaygpO1xuICAgIH07XG4gICAgc2NyaXB0Lm9uZXJyb3IgPSBmdW5jdGlvbigpIHtcbiAgICAgIGlmIChlcnJvcmVkKSByZXR1cm47XG4gICAgICBuZXlDYWxsYmFjaygpO1xuICAgICAgZXJyb3JlZCA9IHRydWU7XG4gICAgfTtcbiAgICBzY3JpcHQuc3JjID0gdXJsO1xuICAgIGRvY3VtZW50LmhlYWQuaW5zZXJ0QmVmb3JlKHNjcmlwdCwgZG9jdW1lbnQuaGVhZC5maXJzdENoaWxkKTtcbiAgfSk7XG59OyIsIlwidXNlIHN0cmljdFwiO1xuXG52YXIgdXRpbHMgPSByZXF1aXJlKCcuL3V0aWxzJyk7XG52YXIgc3ZnbyA9IG5ldyAocmVxdWlyZSgnLi9zdmdvJykpO1xudmFyIHN0b3JhZ2UgPSByZXF1aXJlKCcuLi91dGlscy9zdG9yYWdlJyk7XG5cbnZhciBTdmdGaWxlID0gcmVxdWlyZSgnLi9zdmctZmlsZScpO1xuXG5jbGFzcyBNYWluQ29udHJvbGxlciB7XG4gIGNvbnN0cnVjdG9yKCkge1xuICAgIHRoaXMuX2NvbnRhaW5lciA9IG51bGw7XG5cbiAgICAvLyB1aSBjb21wb25lbnRzXG4gICAgdGhpcy5fbWFpblVpID0gbnVsbDtcbiAgICB0aGlzLl9vdXRwdXRVaSA9IG5ldyAocmVxdWlyZSgnLi91aS9vdXRwdXQnKSk7XG4gICAgdGhpcy5fZG93bmxvYWRCdXR0b25VaSA9IG5ldyAocmVxdWlyZSgnLi91aS9kb3dubG9hZC1idXR0b24nKSk7XG4gICAgdGhpcy5fY29weUJ1dHRvblVpID0gbmV3IChyZXF1aXJlKCcuL3VpL2NvcHktYnV0dG9uJykpO1xuICAgIHRoaXMuX2JnRmlsbFVpID0gbmV3IChyZXF1aXJlKCcuL3VpL2JnLWZpbGwnKSk7XG4gICAgdGhpcy5fcmVzdWx0c1VpID0gbmV3IChyZXF1aXJlKCcuL3VpL3Jlc3VsdHMnKSk7XG4gICAgdGhpcy5fc2V0dGluZ3NVaSA9IG5ldyAocmVxdWlyZSgnLi91aS9zZXR0aW5ncycpKTtcbiAgICB0aGlzLl9tYWluTWVudVVpID0gbmV3IChyZXF1aXJlKCcuL3VpL21haW4tbWVudScpKTtcbiAgICB0aGlzLl90b2FzdHNVaSA9IG5ldyAocmVxdWlyZSgnLi91aS90b2FzdHMnKSk7XG4gICAgdGhpcy5fZHJvcFVpID0gbmV3IChyZXF1aXJlKCcuL3VpL2ZpbGUtZHJvcCcpKTtcbiAgICB0aGlzLl9wcmVsb2FkZXJVaSA9IG5ldyAocmVxdWlyZSgnLi91aS9wcmVsb2FkZXInKSk7XG4gICAgdGhpcy5fY2hhbmdlbG9nVWkgPSBuZXcgKHJlcXVpcmUoJy4vdWkvY2hhbmdlbG9nJykpKHNlbGYudmVyc2lvbik7XG4gICAgdGhpcy5fcmVzdWx0c0NvbnRhaW5lclVpID0gbmV3IChyZXF1aXJlKCcuL3VpL3Jlc3VsdHMtY29udGFpbmVyJykpKHRoaXMuX3Jlc3VsdHNVaSk7XG4gICAgdGhpcy5fdmlld1RvZ2dsZXJVaSA9IG5ldyAocmVxdWlyZSgnLi91aS92aWV3LXRvZ2dsZXInKSk7XG5cbiAgICAvLyB1aSBldmVudHNcbiAgICB0aGlzLl9zZXR0aW5nc1VpLm9uKCdjaGFuZ2UnLCBfID0+IHRoaXMuX29uU2V0dGluZ3NDaGFuZ2UoKSk7XG4gICAgdGhpcy5fbWFpbk1lbnVVaS5vbignc3ZnRGF0YUxvYWQnLCBlID0+IHRoaXMuX29uSW5wdXRDaGFuZ2UoZSkpO1xuICAgIHRoaXMuX2Ryb3BVaS5vbignc3ZnRGF0YUxvYWQnLCBlID0+IHRoaXMuX29uSW5wdXRDaGFuZ2UoZSkpO1xuICAgIHRoaXMuX21haW5NZW51VWkub24oJ2Vycm9yJywgKHtlcnJvcn0pID0+IHRoaXMuX2hhbmRsZUVycm9yKGVycm9yKSk7XG4gICAgdGhpcy5fdmlld1RvZ2dsZXJVaS5vbignY2hhbmdlJywgZSA9PiB0aGlzLl9vblZpZXdTZWxlY3Rpb25DaGFuZ2UoZSkpO1xuXG4gICAgLy8gc3RhdGVcbiAgICB0aGlzLl9pbnB1dEZpbGVuYW1lID0gJ2ltYWdlLnN2Zyc7XG4gICAgdGhpcy5faW5wdXRTdmcgPSBudWxsO1xuICAgIHRoaXMuX2NhY2hlID0gbmV3IChyZXF1aXJlKCcuL3Jlc3VsdHMtY2FjaGUnKSkoMTApO1xuICAgIHRoaXMuX2xhdGVzdENvbXByZXNzSm9iSWQgPSAwO1xuICAgIHRoaXMuX3VzZXJIYXNJbnRlcmFjdGVkID0gZmFsc2U7XG4gICAgdGhpcy5fcmVsb2FkaW5nID0gZmFsc2U7XG5cbiAgICBpZiAoJ3NlcnZpY2VXb3JrZXInIGluIG5hdmlnYXRvcikge1xuICAgICAgbmF2aWdhdG9yLnNlcnZpY2VXb3JrZXIucmVnaXN0ZXIoJ3N3LmpzJywge1xuICAgICAgICBzY29wZTogJy4vJ1xuICAgICAgfSkudGhlbihyZWdpc3RyYXRpb24gPT4ge1xuICAgICAgICByZWdpc3RyYXRpb24uYWRkRXZlbnRMaXN0ZW5lcigndXBkYXRlZm91bmQnLCBfID0+IHRoaXMuX29uVXBkYXRlRm91bmQocmVnaXN0cmF0aW9uKSk7XG4gICAgICB9KTtcbiAgICB9XG5cbiAgICAvLyB0ZWxsIHRoZSB1c2VyIGFib3V0IHRoZSBsYXRlc3QgdXBkYXRlXG4gICAgc3RvcmFnZS5nZXQoJ2xhc3Qtc2Vlbi12ZXJzaW9uJykudGhlbihsYXN0U2VlblZlcnNpb24gPT4ge1xuICAgICAgaWYgKGxhc3RTZWVuVmVyc2lvbikge1xuICAgICAgICB0aGlzLl9jaGFuZ2Vsb2dVaS5zaG93TG9nRnJvbShsYXN0U2VlblZlcnNpb24pO1xuICAgICAgfVxuICAgICAgc3RvcmFnZS5zZXQoJ2xhc3Qtc2Vlbi12ZXJzaW9uJywgc2VsZi52ZXJzaW9uKTtcbiAgICB9KTtcblxuICAgIHV0aWxzLmRvbVJlYWR5LnRoZW4oXyA9PiB7XG4gICAgICB0aGlzLl9jb250YWluZXIgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuYXBwLW91dHB1dCcpO1xuXG4gICAgICAvLyBlbGVtZW50cyBmb3IgaW50cm8gYW5pbVxuICAgICAgdGhpcy5fbWFpblVpID0gbmV3IChyZXF1aXJlKCcuL3VpL21haW4tdWknKSkoXG4gICAgICAgIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy50b29sYmFyJyksXG4gICAgICAgIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5hY3Rpb24tYnV0dG9uLWNvbnRhaW5lcicpLFxuICAgICAgICB0aGlzLl9vdXRwdXRVaS5jb250YWluZXIsXG4gICAgICAgIHRoaXMuX3NldHRpbmdzVWkuY29udGFpbmVyXG4gICAgICApO1xuXG4gICAgICBjb25zdCBhY3Rpb25Db250YWluZXIgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuYWN0aW9uLWJ1dHRvbi1jb250YWluZXInKTtcbiAgICAgIGNvbnN0IG1pbm9yQWN0aW9uQ29udGFpbmVyID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLm1pbm9yLWFjdGlvbi1jb250YWluZXInKTtcblxuICAgICAgbWlub3JBY3Rpb25Db250YWluZXIuYXBwZW5kQ2hpbGQodGhpcy5fYmdGaWxsVWkuY29udGFpbmVyKTtcblxuICAgICAgaWYgKGRvY3VtZW50LnF1ZXJ5Q29tbWFuZFN1cHBvcnRlZCAmJiBkb2N1bWVudC5xdWVyeUNvbW1hbmRTdXBwb3J0ZWQoJ2NvcHknKSkge1xuICAgICAgICBtaW5vckFjdGlvbkNvbnRhaW5lci5hcHBlbmRDaGlsZCh0aGlzLl9jb3B5QnV0dG9uVWkuY29udGFpbmVyKTtcbiAgICAgIH1cblxuICAgICAgYWN0aW9uQ29udGFpbmVyLmFwcGVuZENoaWxkKHRoaXMuX2Rvd25sb2FkQnV0dG9uVWkuY29udGFpbmVyKTtcbiAgICAgIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5vdXRwdXQnKS5hcHBlbmRDaGlsZCh0aGlzLl9vdXRwdXRVaS5jb250YWluZXIpO1xuICAgICAgdGhpcy5fY29udGFpbmVyLmFwcGVuZENoaWxkKHRoaXMuX3RvYXN0c1VpLmNvbnRhaW5lcik7XG4gICAgICB0aGlzLl9jb250YWluZXIuYXBwZW5kQ2hpbGQodGhpcy5fZHJvcFVpLmNvbnRhaW5lcik7XG4gICAgICBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcubWVudS1leHRyYScpLmFwcGVuZENoaWxkKHRoaXMuX2NoYW5nZWxvZ1VpLmNvbnRhaW5lcik7XG5cbiAgICAgIC8vIGxvYWQgcHJldmlvdXMgc2V0dGluZ3NcbiAgICAgIHRoaXMuX2xvYWRTZXR0aW5ncygpO1xuXG4gICAgICAvLyBzb21lb25lIG1hbmFnZWQgdG8gaGl0IHRoZSBwcmVsb2FkZXIsIGF3d1xuICAgICAgaWYgKHRoaXMuX3ByZWxvYWRlclVpLmFjdGl2YXRlZCkge1xuICAgICAgICB0aGlzLl90b2FzdHNVaS5zaG93KFwiUmVhZHkgbm93IVwiLCB7XG4gICAgICAgICAgZHVyYXRpb246IDMwMDBcbiAgICAgICAgfSk7XG4gICAgICB9XG5cbiAgICAgIC8qXG4gICAgICAvLyBmb3IgdGVzdGluZ1xuICAgICAgYXN5bmMgXyA9PiB7XG4gICAgICAgIHRoaXMuX29uSW5wdXRDaGFuZ2Uoe1xuICAgICAgICAgIGRhdGE6IGF3YWl0IHV0aWxzLmdldCgndGVzdC1zdmdzL2Nhci1saXRlLnN2ZycpLFxuICAgICAgICAgIGZpbGVuYW1lOiAnY2FyLnN2ZydcbiAgICAgICAgfSk7XG4gICAgICB9KCk7XG4gICAgICAqL1xuICAgIH0pO1xuICB9XG5cbiAgX29uVmlld1NlbGVjdGlvbkNoYW5nZShldmVudCkge1xuICAgIHRoaXMuX291dHB1dFVpLnNldChldmVudC52YWx1ZSk7XG4gIH1cblxuICBfb25VcGRhdGVGb3VuZChyZWdpc3RyYXRpb24pIHtcbiAgICB2YXIgbmV3V29ya2VyID0gcmVnaXN0cmF0aW9uLmluc3RhbGxpbmc7XG5cbiAgICByZWdpc3RyYXRpb24uaW5zdGFsbGluZy5hZGRFdmVudExpc3RlbmVyKCdzdGF0ZWNoYW5nZScsIGFzeW5jIF8gPT4ge1xuICAgICAgaWYgKHRoaXMuX3JlbG9hZGluZykgcmV0dXJuO1xuXG4gICAgICAvLyB0aGUgdmVyeSBmaXJzdCBhY3RpdmF0aW9uIVxuICAgICAgLy8gdGVsbCB0aGUgdXNlciBzdHVmZiB3b3JrcyBvZmZsaW5lXG4gICAgICBpZiAobmV3V29ya2VyLnN0YXRlID09ICdhY3RpdmF0ZWQnICYmICFuYXZpZ2F0b3Iuc2VydmljZVdvcmtlci5jb250cm9sbGVyKSB7XG4gICAgICAgIHRoaXMuX3RvYXN0c1VpLnNob3coXCJSZWFkeSB0byB3b3JrIG9mZmxpbmVcIiwge1xuICAgICAgICAgIGR1cmF0aW9uOiA1MDAwXG4gICAgICAgIH0pO1xuICAgICAgICByZXR1cm47XG4gICAgICB9XG5cbiAgICAgIGlmIChuZXdXb3JrZXIuc3RhdGUgPT0gJ2FjdGl2YXRlZCcgJiYgbmF2aWdhdG9yLnNlcnZpY2VXb3JrZXIuY29udHJvbGxlcikge1xuICAgICAgICAvLyBpZiB0aGUgdXNlciBoYXNuJ3QgaW50ZXJhY3RlZCB5ZXQsIGRvIGEgc25lYWt5IHJlbG9hZFxuICAgICAgICBpZiAoIXRoaXMuX3VzZXJIYXNJbnRlcmFjdGVkKSB7XG4gICAgICAgICAgdGhpcy5fcmVsb2FkaW5nID0gdHJ1ZTtcbiAgICAgICAgICBsb2NhdGlvbi5yZWxvYWQoKTtcbiAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cblxuICAgICAgICAvLyBvdGhlcndpc2UsIHNob3cgdGhlIHVzZXIgYW4gYWxlcnRcbiAgICAgICAgdmFyIHRvYXN0ID0gdGhpcy5fdG9hc3RzVWkuc2hvdyhcIlVwZGF0ZSBhdmFpbGFibGVcIiwge1xuICAgICAgICAgIGJ1dHRvbnM6IFsncmVsb2FkJywgJ2Rpc21pc3MnXVxuICAgICAgICB9KTtcblxuICAgICAgICB2YXIgYW5zd2VyID0gYXdhaXQgdG9hc3QuYW5zd2VyO1xuXG4gICAgICAgIGlmIChhbnN3ZXIgPT0gJ3JlbG9hZCcpIHtcbiAgICAgICAgICB0aGlzLl9yZWxvYWRpbmcgPSB0cnVlO1xuICAgICAgICAgIGxvY2F0aW9uLnJlbG9hZCgpO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfSk7XG4gIH1cblxuICBfb25TZXR0aW5nc0NoYW5nZSgpIHtcbiAgICB2YXIgc2V0dGluZ3MgPSB0aGlzLl9zZXR0aW5nc1VpLmdldFNldHRpbmdzKCk7XG4gICAgdGhpcy5fc2F2ZVNldHRpbmdzKHNldHRpbmdzKTtcbiAgICB0aGlzLl9jb21wcmVzc1N2ZyhzZXR0aW5ncyk7XG4gIH1cblxuICBhc3luYyBfb25JbnB1dENoYW5nZShldmVudCkge1xuICAgIHZhciBzZXR0aW5ncyA9IHRoaXMuX3NldHRpbmdzVWkuZ2V0U2V0dGluZ3MoKTtcbiAgICB0aGlzLl91c2VySGFzSW50ZXJhY3RlZCA9IHRydWU7XG5cbiAgICB0cnkge1xuICAgICAgdGhpcy5faW5wdXRTdmcgPSBhd2FpdCBzdmdvLmxvYWQoZXZlbnQuZGF0YSk7XG4gICAgICB0aGlzLl9pbnB1dEZpbGVuYW1lID0gZXZlbnQuZmlsZW5hbWU7XG4gICAgfVxuICAgIGNhdGNoKGUpIHtcbiAgICAgIGUubWVzc2FnZSA9IFwiTG9hZCBmYWlsZWQ6IFwiICsgZS5tZXNzYWdlO1xuICAgICAgdGhpcy5fbWFpbk1lbnVVaS5zdG9wU3Bpbm5lcigpO1xuICAgICAgdGhpcy5faGFuZGxlRXJyb3IoZSk7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgdGhpcy5fY2FjaGUucHVyZ2UoKTtcblxuICAgIHZhciBmaXJzdEl0dGVyYXRpb24gPSB0cnVlO1xuXG4gICAgY29uc3QgY29tcHJlc3NlZCA9ICgpID0+IHtcbiAgICAgIGlmIChmaXJzdEl0dGVyYXRpb24pIHtcbiAgICAgICAgdGhpcy5fb3V0cHV0VWkucmVzZXQoKTtcbiAgICAgICAgdGhpcy5fbWFpblVpLmFjdGl2YXRlKCk7XG4gICAgICAgIHRoaXMuX21haW5NZW51VWkuYWxsb3dIaWRlID0gdHJ1ZTtcbiAgICAgICAgdGhpcy5fbWFpbk1lbnVVaS5oaWRlKCk7XG4gICAgICAgIGZpcnN0SXR0ZXJhdGlvbiA9IGZhbHNlO1xuICAgICAgfVxuICAgIH1cblxuICAgIHRoaXMuX2NvbXByZXNzU3ZnKHNldHRpbmdzLCBfID0+IGNvbXByZXNzZWQoKSk7XG5cbiAgICBpZiAoZmlyc3RJdHRlcmF0aW9uKSB7XG4gICAgICBjb21wcmVzc2VkKCk7XG4gICAgfVxuICB9XG5cbiAgX2hhbmRsZUVycm9yKGUpIHtcbiAgICB0aGlzLl90b2FzdHNVaS5zaG93KGUubWVzc2FnZSk7XG4gICAgY29uc29sZS5lcnJvcihlKTtcbiAgfVxuXG4gIGFzeW5jIF9sb2FkU2V0dGluZ3MoKSB7XG4gICAgdmFyIHNldHRpbmdzID0gYXdhaXQgc3RvcmFnZS5nZXQoJ3NldHRpbmdzJyk7XG4gICAgaWYgKHNldHRpbmdzKSB0aGlzLl9zZXR0aW5nc1VpLnNldFNldHRpbmdzKHNldHRpbmdzKTtcbiAgfVxuXG4gIF9zYXZlU2V0dGluZ3Moc2V0dGluZ3MpIHtcbiAgICBjb25zdCBjb3B5ID0gT2JqZWN0LmFzc2lnbih7fSwgc2V0dGluZ3MpO1xuICAgIC8vIGRvZXNuJ3QgbWFrZSBzZW5zZSB0byByZXRhaW4gdGhlIFwic2hvdyBvcmlnaW5hbFwiIG9wdGlvblxuICAgIGRlbGV0ZSBjb3B5Lm9yaWdpbmFsO1xuICAgIHN0b3JhZ2Uuc2V0KCdzZXR0aW5ncycsIGNvcHkpO1xuICB9XG5cbiAgYXN5bmMgX2NvbXByZXNzU3ZnKHNldHRpbmdzLCBpdHRlcmF0aW9uQ2FsbGJhY2sgPSBmdW5jdGlvbigpe30pIHtcbiAgICB2YXIgdGhpc0pvYklkID0gdGhpcy5fbGF0ZXN0Q29tcHJlc3NKb2JJZCA9IE1hdGgucmFuZG9tKCk7XG5cbiAgICBhd2FpdCBzdmdvLmFib3J0Q3VycmVudCgpO1xuXG4gICAgaWYgKHRoaXNKb2JJZCAhPSB0aGlzLl9sYXRlc3RDb21wcmVzc0pvYklkKSB7XG4gICAgICAvLyB3aGlsZSB3ZSd2ZSBiZWVuIHdhaXRpbmcsIHRoZXJlJ3MgYmVlbiBhIG5ld2VyIGNhbGxcbiAgICAgIC8vIHRvIF9jb21wcmVzc1N2Zywgd2UgZG9uJ3QgbmVlZCB0byBkbyBhbnl0aGluZ1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIGlmIChzZXR0aW5ncy5vcmlnaW5hbCkge1xuICAgICAgdGhpcy5fdXBkYXRlRm9yRmlsZSh0aGlzLl9pbnB1dFN2Zywge1xuICAgICAgICBnemlwOiBzZXR0aW5ncy5nemlwXG4gICAgICB9KTtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICB2YXIgY2FjaGVNYXRjaCA9IHRoaXMuX2NhY2hlLm1hdGNoKHNldHRpbmdzLmZpbmdlcnByaW50KTtcblxuICAgIGlmIChjYWNoZU1hdGNoKSB7XG4gICAgICB0aGlzLl91cGRhdGVGb3JGaWxlKGNhY2hlTWF0Y2gsIHtcbiAgICAgICAgY29tcGFyZVRvRmlsZTogdGhpcy5faW5wdXRTdmcsXG4gICAgICAgIGd6aXA6IHNldHRpbmdzLmd6aXBcbiAgICAgIH0pO1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIHRoaXMuX2Rvd25sb2FkQnV0dG9uVWkud29ya2luZygpO1xuXG4gICAgdHJ5IHtcbiAgICAgIHZhciBmaW5hbFJlc3VsdEZpbGUgPSBhd2FpdCBzdmdvLnByb2Nlc3Moc2V0dGluZ3MsIHJlc3VsdEZpbGUgPT4ge1xuICAgICAgICBpdHRlcmF0aW9uQ2FsbGJhY2socmVzdWx0RmlsZSk7XG4gICAgICAgIHRoaXMuX3VwZGF0ZUZvckZpbGUocmVzdWx0RmlsZSwge1xuICAgICAgICAgIGNvbXBhcmVUb0ZpbGU6IHRoaXMuX2lucHV0U3ZnLFxuICAgICAgICAgIGd6aXA6IHNldHRpbmdzLmd6aXBcbiAgICAgICAgfSk7XG4gICAgICB9KTtcbiAgICAgIHRoaXMuX2NhY2hlLmFkZChzZXR0aW5ncy5maW5nZXJwcmludCwgZmluYWxSZXN1bHRGaWxlKTtcbiAgICB9XG4gICAgY2F0Y2goZSkge1xuICAgICAgaWYgKGUubWVzc2FnZSAhPSBcImFib3J0XCIpIHsgLy8gVE9ETzogc2hvdWxkIHJlYWxseSBiZSBzd2l0Y2hpbmcgb24gZXJyb3IgdHlwZVxuICAgICAgICBlLm1lc3NhZ2UgPSBcIk1pbmlmeWluZyBlcnJvcjogXCIgKyBlLm1lc3NhZ2U7XG4gICAgICAgIHRoaXMuX2hhbmRsZUVycm9yKGUpO1xuICAgICAgfVxuICAgIH1cblxuICAgIHRoaXMuX2Rvd25sb2FkQnV0dG9uVWkuZG9uZSgpO1xuICB9XG5cbiAgYXN5bmMgX3VwZGF0ZUZvckZpbGUoc3ZnRmlsZSwge2NvbXBhcmVUb0ZpbGUsIGd6aXB9KSB7XG4gICAgdGhpcy5fb3V0cHV0VWkudXBkYXRlKHN2Z0ZpbGUpO1xuICAgIHRoaXMuX2Rvd25sb2FkQnV0dG9uVWkuc2V0RG93bmxvYWQodGhpcy5faW5wdXRGaWxlbmFtZSwgc3ZnRmlsZSk7XG4gICAgdGhpcy5fY29weUJ1dHRvblVpLnNldFNWRyhzdmdGaWxlKTtcblxuICAgIHRoaXMuX3Jlc3VsdHNVaS51cGRhdGUoe1xuICAgICAgY29tcGFyaXNvblNpemU6IGNvbXBhcmVUb0ZpbGUgJiYgKGF3YWl0IGNvbXBhcmVUb0ZpbGUuc2l6ZSh7IGNvbXByZXNzOiBnemlwIH0pKSxcbiAgICAgIHNpemU6IGF3YWl0IHN2Z0ZpbGUuc2l6ZSh7IGNvbXByZXNzOiBnemlwIH0pXG4gICAgfSk7XG4gIH1cbn1cblxubW9kdWxlLmV4cG9ydHMgPSBNYWluQ29udHJvbGxlcjtcbiIsIlwidXNlIHN0cmljdFwiO1xuXG5jbGFzcyBQcmlzbSBleHRlbmRzIHJlcXVpcmUoJy4vd29ya2VyLW1lc3NlbmdlcicpIHtcbiAgY29uc3RydWN0b3IoKSB7XG4gICAgc3VwZXIoJ2pzL3ByaXNtLXdvcmtlci5qcycpO1xuICB9XG5cbiAgaGlnaGxpZ2h0KHN2Z0RhdGEpIHtcbiAgICByZXR1cm4gdGhpcy5fcmVxdWVzdFJlc3BvbnNlKHtcbiAgICAgIGRhdGE6IHN2Z0RhdGFcbiAgICB9KTtcbiAgfVxufVxuXG5tb2R1bGUuZXhwb3J0cyA9IFByaXNtOyIsIlwidXNlIHN0cmljdFwiO1xuXG5jbGFzcyBSZXN1bHRzQ2FjaGUge1xuICBjb25zdHJ1Y3RvcihzaXplKSB7XG4gICAgdGhpcy5fc2l6ZSA9IHNpemU7XG4gICAgdGhpcy5wdXJnZSgpO1xuICB9XG5cbiAgcHVyZ2UoKSB7XG4gICAgdGhpcy5fZmluZ2VycHJpbnRzID0gW107XG4gICAgdGhpcy5fZmlsZXMgPSBbXTtcbiAgICB0aGlzLl9pbmRleCA9IDA7XG4gIH1cblxuICBhZGQoZmluZ2VycHJpbnQsIGZpbGUpIHtcbiAgICB2YXIgb2xkSXRlbSA9IHRoaXMuX2ZpbGVzW3RoaXMuX2luZGV4XTtcblxuICAgIGlmIChvbGRJdGVtKSB7XG4gICAgICAvLyBnYyBibG9iIHVybFxuICAgICAgb2xkSXRlbS5yZWxlYXNlKCk7XG4gICAgfVxuXG4gICAgdGhpcy5fZmluZ2VycHJpbnRzW3RoaXMuX2luZGV4XSA9IGZpbmdlcnByaW50O1xuICAgIHRoaXMuX2ZpbGVzW3RoaXMuX2luZGV4XSA9IGZpbGU7XG5cbiAgICB0aGlzLl9pbmRleCA9ICh0aGlzLl9pbmRleCArIDEpICUgdGhpcy5fc2l6ZTtcbiAgfVxuXG4gIG1hdGNoKGZpbmdlcnByaW50KSB7XG4gICAgcmV0dXJuIHRoaXMuX2ZpbGVzW3RoaXMuX2ZpbmdlcnByaW50cy5pbmRleE9mKGZpbmdlcnByaW50KV07XG4gIH1cbn1cblxubW9kdWxlLmV4cG9ydHMgPSBSZXN1bHRzQ2FjaGU7IiwiXCJ1c2Ugc3RyaWN0XCI7XG5cbnZhciBnemlwID0gbmV3IChyZXF1aXJlKCcuL2d6aXAnKSk7XG5cbmNsYXNzIFN2Z0ZpbGUge1xuICBjb25zdHJ1Y3Rvcih0ZXh0LCB3aWR0aCwgaGVpZ2h0KSB7XG4gICAgdGhpcy50ZXh0ID0gdGV4dDtcbiAgICB0aGlzLl9jb21wcmVzc2VkU2l6ZSA9IG51bGw7XG4gICAgdGhpcy5fdXJsID0gJyc7XG4gICAgdGhpcy5fYmxvYiA9IG51bGw7XG4gICAgdGhpcy53aWR0aCA9IHdpZHRoO1xuICAgIHRoaXMuaGVpZ2h0ID0gaGVpZ2h0O1xuICB9XG5cbiAgYXN5bmMgc2l6ZSh7IGNvbXByZXNzIH0pIHtcbiAgICBpZiAoIWNvbXByZXNzKSB7XG4gICAgICByZXR1cm4gdGhpcy50ZXh0Lmxlbmd0aDtcbiAgICB9XG5cbiAgICBpZiAoIXRoaXMuX2NvbXByZXNzZWRTaXplKSB7XG4gICAgICB0aGlzLl9jb21wcmVzc2VkU2l6ZSA9IGd6aXAuY29tcHJlc3ModGhpcy50ZXh0KVxuICAgICAgICAudGhlbihyID0+IHIuYnl0ZUxlbmd0aCk7XG4gICAgfVxuXG4gICAgcmV0dXJuIHRoaXMuX2NvbXByZXNzZWRTaXplO1xuICB9XG5cbiAgX2NyZWF0ZSgpIHtcbiAgICAvLyBJRSBHQ3MgYmxvYnMgb25jZSB0aGV5J3JlIG91dCBvZiByZWZlcmVuY2UsIGV2ZW4gaWYgdGhleVxuICAgIC8vIGhhdmUgYW4gb2JqZWN0IHVybCwgc28gd2UgaGF2ZSB0byBrZWVwIGluIGluIHJlZmVyZW5jZS5cbiAgICB0aGlzLl9ibG9iID0gbmV3IEJsb2IoW3RoaXMudGV4dF0sIHt0eXBlOiBcImltYWdlL3N2Zyt4bWxcIn0pO1xuICAgIHRoaXMuX3VybCA9IFVSTC5jcmVhdGVPYmplY3RVUkwodGhpcy5fYmxvYik7XG4gIH1cblxuICBnZXQgYmxvYigpIHtcbiAgICBpZiAoIXRoaXMuX2Jsb2IpIHRoaXMuX2NyZWF0ZSgpO1xuICAgIHJldHVybiB0aGlzLl9ibG9iO1xuICB9XG5cbiAgZ2V0IHVybCgpIHtcbiAgICBpZiAoIXRoaXMuX3VybCkgdGhpcy5fY3JlYXRlKCk7XG4gICAgcmV0dXJuIHRoaXMuX3VybDtcbiAgfVxuXG4gIHJlbGVhc2UoKSB7XG4gICAgaWYgKCF0aGlzLl91cmwpIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICB0aGlzLl9ibG9iID0gbnVsbDtcbiAgICBVUkwucmV2b2tlT2JqZWN0VVJMKHRoaXMuX3VybCk7XG4gIH1cbn1cblxubW9kdWxlLmV4cG9ydHMgPSBTdmdGaWxlOyIsIlwidXNlIHN0cmljdFwiO1xuXG52YXIgU3ZnRmlsZSA9IHJlcXVpcmUoJy4vc3ZnLWZpbGUnKTtcblxuY2xhc3MgU3ZnbyBleHRlbmRzIHJlcXVpcmUoJy4vd29ya2VyLW1lc3NlbmdlcicpIHtcbiAgY29uc3RydWN0b3IoKSB7XG4gICAgc3VwZXIoJ2pzL3N2Z28td29ya2VyLmpzJyk7XG4gICAgdGhpcy5fbXVsdGlQYXNzID0gZmFsc2U7XG4gICAgdGhpcy5fYWJvcnRPbk5leHRJdHRlciA9IGZhbHNlO1xuICAgIHRoaXMuX2N1cnJlbnRKb2IgPSBQcm9taXNlLnJlc29sdmUoKTtcbiAgfVxuXG4gIGxvYWQoc3ZnVGV4dCkge1xuICAgIHJldHVybiB0aGlzLl9yZXF1ZXN0UmVzcG9uc2Uoe1xuICAgICAgYWN0aW9uOiAnbG9hZCcsXG4gICAgICBkYXRhOiBzdmdUZXh0XG4gICAgfSkudGhlbigoe3dpZHRoLCBoZWlnaHR9KSA9PiB7XG4gICAgICByZXR1cm4gbmV3IFN2Z0ZpbGUoc3ZnVGV4dCwgd2lkdGgsIGhlaWdodCk7XG4gICAgfSk7XG4gIH1cblxuICBwcm9jZXNzKHNldHRpbmdzLCBpdHRlcmF0aW9uQ2FsbGJhY2spIHtcbiAgICByZXR1cm4gdGhpcy5fY3VycmVudEpvYiA9IHRoaXMuYWJvcnRDdXJyZW50KCkudGhlbihhc3luYyBfID0+IHtcbiAgICAgIHRoaXMuX2Fib3J0T25OZXh0SXR0ZXIgPSBmYWxzZTtcblxuICAgICAgdmFyIHJlc3VsdCA9IGF3YWl0IHRoaXMuX3JlcXVlc3RSZXNwb25zZSh7XG4gICAgICAgIGFjdGlvbjogJ3Byb2Nlc3MnLFxuICAgICAgICBzZXR0aW5nc1xuICAgICAgfSk7XG5cbiAgICAgIHZhciByZXN1bHRGaWxlID0gbmV3IFN2Z0ZpbGUocmVzdWx0LmRhdGEsIHJlc3VsdC5kaW1lbnNpb25zLndpZHRoLCByZXN1bHQuZGltZW5zaW9ucy5oZWlnaHQpO1xuXG4gICAgICBpdHRlcmF0aW9uQ2FsbGJhY2socmVzdWx0RmlsZSk7XG5cbiAgICAgIGlmIChzZXR0aW5ncy5tdWx0aXBhc3MpIHtcbiAgICAgICAgd2hpbGUgKHJlc3VsdCA9IGF3YWl0IHRoaXMubmV4dFBhc3MoKSkge1xuICAgICAgICAgIGlmICh0aGlzLl9hYm9ydE9uTmV4dEl0dGVyKSB7XG4gICAgICAgICAgICB0aHJvdyBFcnJvcignYWJvcnQnKTtcbiAgICAgICAgICB9XG4gICAgICAgICAgcmVzdWx0RmlsZSA9IG5ldyBTdmdGaWxlKHJlc3VsdC5kYXRhLCByZXN1bHQuZGltZW5zaW9ucy53aWR0aCwgcmVzdWx0LmRpbWVuc2lvbnMuaGVpZ2h0KTtcbiAgICAgICAgICBpdHRlcmF0aW9uQ2FsbGJhY2socmVzdWx0RmlsZSk7XG4gICAgICAgIH1cbiAgICAgIH1cblxuICAgICAgLy8gcmV0dXJuIGZpbmFsIHJlc3VsdFxuICAgICAgcmV0dXJuIHJlc3VsdEZpbGU7XG4gICAgfSk7XG4gIH1cblxuICBuZXh0UGFzcygpIHtcbiAgICByZXR1cm4gdGhpcy5fcmVxdWVzdFJlc3BvbnNlKHtcbiAgICAgIGFjdGlvbjogJ25leHRQYXNzJ1xuICAgIH0pO1xuICB9XG5cbiAgYXN5bmMgYWJvcnRDdXJyZW50KCkge1xuICAgIHRoaXMuX2Fib3J0T25OZXh0SXR0ZXIgPSB0cnVlO1xuXG4gICAgdHJ5IHtcbiAgICAgIGF3YWl0IHRoaXMuX2N1cnJlbnRKb2I7XG4gICAgfSBjYXRjaChlKXt9XG4gIH1cbn1cblxubW9kdWxlLmV4cG9ydHMgPSBTdmdvOyIsInZhciB1dGlscyA9IHJlcXVpcmUoJy4uL3V0aWxzJyk7XG52YXIgUmlwcGxlID0gcmVxdWlyZSgnLi9yaXBwbGUnKTtcblxuY2xhc3MgQmdGaWxsQnV0dG9uIHtcbiAgY29uc3RydWN0b3IoKSB7XG4gICAgdGhpcy5jb250YWluZXIgPSB1dGlscy5zdHJUb0VsKFxuICAgICAgJzxkaXYgcm9sZT1cImJ1dHRvblwiIHRhYmluZGV4PVwiMFwiIGNsYXNzPVwiZmlsbEFCIG1pbm9yLWZsb2F0aW5nLWFjdGlvbi1idXR0b25cIj4nICtcbiAgICAgICAgJzxzdmcgdmlld0JveD1cIjAgMCAyNCAyNFwiIGNsYXNzPVwiaWNvblwiPicgK1xuICAgICAgICAgICc8dGl0bGU+QmFja2dyb3VuZCBGaWxsPC90aXRsZT4nICtcbiAgICAgICAgICAnPHBhdGggZD1cIk0yMS4xNDMgOS42NjdjLS43MzMtMS4zOTItMS45MTQtMy4wNS0zLjYxNy00Ljc1My0yLjk3Ny0yLjk3OC01LjQ3OC0zLjkxNC02Ljc4NS0zLjkxNC0uNDE0IDAtLjcwOC4wOTQtLjg2LjI0NmwtMS4zNjEgMS4zNmMtMS44OTktLjIzNi0zLjQyLjEwNi00LjI5NC45ODMtLjg3Ni44NzUtMS4xNjQgMi4xNTktLjc5MiAzLjUyMy40OTIgMS44MDYgMi4zMDUgNC4wNDkgNS45MDUgNS4zNzUuMDM4LjMyMy4xNTcuNjM4LjQwNS44ODUuNTg4LjU4OCAxLjUzNS41ODYgMi4xMjEgMHMuNTg4LTEuNTMzLjAwMi0yLjExOWMtLjU4OC0uNTg3LTEuNTM3LS41ODgtMi4xMjMtLjAwMWwtLjE3LjI1NmMtMi4wMzEtLjc2NS0zLjM5NS0xLjgyOC00LjIzMi0yLjlsMy44NzktMy44NzVjLjQ5NiAyLjczIDYuNDMyIDguNjc2IDkuMTc4IDkuMTc4bC03LjExNSA3LjEwN2MtLjIzNC4xNTMtMi43OTgtLjMxNi02LjE1Ni0zLjY3NS0zLjM5My0zLjM5My0zLjE3NS01LjI3MS0zLjAyNy01LjQ5OGwxLjg1OS0xLjg1NmMtLjQzOS0uMzU5LS45MjUtMS4xMDMtMS4xNDEtMS42ODlsLTIuMTM0IDIuMTMxYy0uNDQ1LjQ0Ni0uNjg1IDEuMDY0LS42ODUgMS44MiAwIDEuNjM0IDEuMTIxIDMuOTE1IDMuNzEzIDYuNTA2IDIuNzY0IDIuNzY0IDUuNTggNC4yNDMgNy40MzIgNC4yNDMuNjQ4IDAgMS4xOC0uMTk1IDEuNTQ3LS41NjJsOC4wODYtOC4wNzhjLjkxLjg3NC0uNzc4IDMuNTM4LS43NzggNC42NDggMCAxLjEwNC44OTYgMS45OTkgMiAxLjk5OSAxLjEwNSAwIDItLjg5NiAyLTIgMC0zLjE4NC0xLjQyNS02LjgxLTIuODU3LTkuMzR6bS0xNi4yMDktNS4zNzFjLjUyNy0uNTMgMS40NzEtLjc5MSAyLjY1Ni0uNzYxbC0zLjIwOSAzLjIwNmMtLjIzNi0uOTc4LS4wNDktMS44NDUuNTUzLTIuNDQ1em05LjI5MiA0LjA3OWwtLjAzLS4wMjljLTEuMjkyLTEuMjkyLTMuODAzLTQuMzU2LTMuMDk2LTUuMDYzLjcxNS0uNzE1IDMuNDg4IDEuNTIxIDUuMDYyIDMuMDk2Ljg2Mi44NjIgMi4wODggMi4yNDcgMi45MzcgMy40NTgtMS43MTctMS4wNzQtMy40OTEtMS40NjktNC44NzMtMS40NjJ6XCIvPicgK1xuICAgICAgICAnPC9zdmc+JyArXG4gICAgICAnPC9kaXY+JyArXG4gICAgJycpO1xuXG4gICAgdGhpcy5fcmlwcGxlID0gbmV3IFJpcHBsZSgpO1xuICAgIHRoaXMuY29udGFpbmVyLmFwcGVuZENoaWxkKHRoaXMuX3JpcHBsZS5jb250YWluZXIpO1xuXG4gICAgdGhpcy5jb250YWluZXIuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCBldmVudCA9PiB0aGlzLl9vbkNsaWNrKGV2ZW50KSk7XG4gIH1cblxuICBfb25DbGljayhldmVudCkge1xuICAgIC8vIGV2ZW50IGFkZHMgYSBiYWNrZ3JvdW5kIGNvbG9yXG4gICAgaWYgKHRoaXMuY29udGFpbmVyLmNsYXNzTGlzdC5jb250YWlucygnYWN0aXZlJykpIHtcbiAgICAgIHRoaXMuY29udGFpbmVyLmNsYXNzTGlzdC5yZW1vdmUoJ2FjdGl2ZScpO1xuICAgICAgdGhpcy5zZXRDb2xvcigndHJhbnNwYXJlbnQnKTtcbiAgICB9IGVsc2Uge1xuICAgICAgdGhpcy5jb250YWluZXIuY2xhc3NMaXN0LmFkZCgnYWN0aXZlJyk7XG4gICAgICB0aGlzLnNldENvbG9yKCcjZjQ0NGZlJyk7XG4gICAgfVxuICAgIHRoaXMuX3JpcHBsZS5hbmltYXRlKCk7XG4gIH1cblxuICBzZXRDb2xvcihjb2xvcikge1xuICAgIGRvY3VtZW50LmRvY3VtZW50RWxlbWVudC5zdHlsZS5iYWNrZ3JvdW5kQ29sb3IgPSBjb2xvcjtcbiAgfVxufVxuXG5tb2R1bGUuZXhwb3J0cyA9IEJnRmlsbEJ1dHRvbjtcbiIsInZhciB1dGlscyA9IHJlcXVpcmUoJy4uL3V0aWxzJyk7XG5cbmNsYXNzIENoYW5nZWxvZyB7XG4gIGNvbnN0cnVjdG9yKGxvYWRlZFZlcnNpb24pIHtcbiAgICB0aGlzLmNvbnRhaW5lciA9IHV0aWxzLnN0clRvRWwoJzxzZWN0aW9uIGNsYXNzPVwiY2hhbmdlbG9nXCI+PC9zZWN0aW9uPicpO1xuICAgIHRoaXMuX2xvYWRlZFZlcnNpb24gPSBsb2FkZWRWZXJzaW9uO1xuICB9XG5cbiAgYXN5bmMgc2hvd0xvZ0Zyb20obGFzdExvYWRlZFZlcnNpb24pIHtcbiAgICBpZiAobGFzdExvYWRlZFZlcnNpb24gPT0gdGhpcy5fbG9hZGVkVmVyc2lvbikgcmV0dXJuO1xuICAgIHZhciBjaGFuZ2Vsb2cgPSBhd2FpdCB1dGlscy5nZXQoJ2NoYW5nZWxvZy5qc29uJykudGhlbihKU09OLnBhcnNlKTtcbiAgICB2YXIgc3RhcnRJbmRleCA9IDA7XG4gICAgdmFyIGVuZEluZGV4ID0gMDtcbiAgICBcbiAgICBmb3IgKHZhciBpID0gMDsgaSA8IGNoYW5nZWxvZy5sZW5ndGg7IGkrKykge1xuICAgICAgbGV0IGVudHJ5ID0gY2hhbmdlbG9nW2ldO1xuXG4gICAgICBpZiAoZW50cnkudmVyc2lvbiA9PT0gdGhpcy5fbG9hZGVkVmVyc2lvbikge1xuICAgICAgICBzdGFydEluZGV4ID0gaTtcbiAgICAgIH1cbiAgICAgIGVsc2UgaWYgKGVudHJ5LnZlcnNpb24gPT09IGxhc3RMb2FkZWRWZXJzaW9uKSB7XG4gICAgICAgIGJyZWFrO1xuICAgICAgfVxuICAgICAgZW5kSW5kZXggPSBpICsgMTtcbiAgICB9XG5cbiAgICB2YXIgY2hhbmdlTGlzID0gY2hhbmdlbG9nLnNsaWNlKHN0YXJ0SW5kZXgsIGVuZEluZGV4KS5yZWR1Y2UoKGFyciwgZW50cnkpID0+IHtcbiAgICAgIHJldHVybiBhcnIuY29uY2F0KGVudHJ5LmNoYW5nZXMpO1xuICAgIH0sIFtdKS5tYXAoZnVuY3Rpb24oY2hhbmdlKSB7XG4gICAgICByZXR1cm4gdXRpbHMuZXNjYXBlSHRtbFRhZ2A8bGk+JHtjaGFuZ2V9PC9saT5gO1xuICAgIH0pO1xuXG4gICAgdGhpcy5jb250YWluZXIuYXBwZW5kQ2hpbGQodXRpbHMuc3RyVG9FbCgnPGgxPlVwZGF0ZWQhPC9oMT4nKSk7XG4gICAgdGhpcy5jb250YWluZXIuYXBwZW5kQ2hpbGQodXRpbHMuc3RyVG9FbChcbiAgICAgICc8dWw+JyArXG4gICAgICAgIGNoYW5nZUxpcy5qb2luKCcnKSArXG4gICAgICAnPC91bD4nICtcbiAgICAnJykpO1xuXG4gICAgYXdhaXQgdXRpbHMuZG9tUmVhZHk7XG4gICAgdXRpbHMudHJhbnNpdGlvblRvQ2xhc3ModGhpcy5jb250YWluZXIpO1xuICB9XG59XG5cbm1vZHVsZS5leHBvcnRzID0gQ2hhbmdlbG9nOyIsInZhciB1dGlscyA9IHJlcXVpcmUoJy4uL3V0aWxzJyk7XG52YXIgcHJpc20gPSBuZXcgKHJlcXVpcmUoJy4uL3ByaXNtJykpO1xuXG5jbGFzcyBDb2RlT3V0cHV0IHtcbiAgY29uc3RydWN0b3IoKSB7XG4gICAgdGhpcy5jb250YWluZXIgPSB1dGlscy5zdHJUb0VsKFxuICAgICAgJzxkaXYgY2xhc3M9XCJjb2RlLW91dHB1dFwiPicgK1xuICAgICAgICAnPHByZT48Y29kZT48L2NvZGU+PC9wcmU+JyArXG4gICAgICAnPC9kaXY+JyArXG4gICAgJycpO1xuICAgIHRoaXMuX2NvZGVFbCA9IHRoaXMuY29udGFpbmVyLnF1ZXJ5U2VsZWN0b3IoJ2NvZGUnKTtcbiAgfVxuXG4gIGFzeW5jIHNldFN2ZyhzdmdGaWxlKSB7XG4gICAgdGhpcy5fY29kZUVsLmlubmVySFRNTCA9IGF3YWl0IHByaXNtLmhpZ2hsaWdodChzdmdGaWxlLnRleHQpO1xuICB9XG5cbiAgcmVzZXQoKSB7XG4gICAgdGhpcy5fY29kZUVsLmlubmVySFRNTCA9ICcnO1xuICB9XG59XG5cbm1vZHVsZS5leHBvcnRzID0gQ29kZU91dHB1dDsiLCJ2YXIgdXRpbHMgPSByZXF1aXJlKCcuLi91dGlscycpO1xudmFyIFJpcHBsZSA9IHJlcXVpcmUoJy4vcmlwcGxlJyk7XG5cbmNsYXNzIENvcHlCdXR0b24ge1xuICBjb25zdHJ1Y3RvcigpIHtcbiAgICB0aGlzLmNvbnRhaW5lciA9IHV0aWxzLnN0clRvRWwoXG4gICAgICAnPGRpdiByb2xlPVwiYnV0dG9uXCIgdGFiaW5kZXg9XCIwXCIgY2xhc3M9XCJtaW5vci1mbG9hdGluZy1hY3Rpb24tYnV0dG9uXCI+JyArXG4gICAgICAgICc8c3ZnIHZpZXdCb3g9XCIwIDAgMjQgMjRcIiBjbGFzcz1cImljb25cIj4nICtcbiAgICAgICAgICAnPHRpdGxlPkNvcHk8L3RpdGxlPicgK1xuICAgICAgICAgICc8cGF0aCBkPVwiTTE2IDFINEMzIDEgMiAyIDIgM3YxNGgyVjNoMTJWMXptMyA0SDhDNyA1IDYgNiA2IDd2MTRjMCAxIDEgMiAyIDJoMTFjMSAwIDItMSAyLTJWN2MwLTEtMS0yLTItMnptMCAxNkg4VjdoMTF2MTR6XCIvPicgK1xuICAgICAgICAnPC9zdmc+JyArXG4gICAgICAnPC9kaXY+JyArXG4gICAgJycpO1xuXG4gICAgdGhpcy5fcmlwcGxlID0gbmV3IFJpcHBsZSgpO1xuICAgIHRoaXMuY29udGFpbmVyLmFwcGVuZENoaWxkKHRoaXMuX3JpcHBsZS5jb250YWluZXIpO1xuXG4gICAgdGhpcy5fc3ZnRmlsZSA9IG51bGw7XG4gICAgdGhpcy5fcHJlID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgncHJlJyk7XG5cbiAgICB0aGlzLmNvbnRhaW5lci5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIGV2ZW50ID0+IHRoaXMuX29uQ2xpY2soZXZlbnQpKTtcbiAgfVxuXG4gIF9vbkNsaWNrKGV2ZW50KSB7XG4gICAgdGhpcy5fcHJlLnRleHRDb250ZW50ID0gJyFbYWx0IGRlc2NyaXB0aW9uXSgnICsgZW5jb2RlVVJJQ29tcG9uZW50KHRoaXMuX3N2Z0ZpbGUudGV4dCkucmVwbGFjZSgvXFwoL2csICclMjgnKVxuICAgICAgLnJlcGxhY2UoL1xcKS9nLCAnJTI5JykgKyAnKSc7XG4gICAgZG9jdW1lbnQuYm9keS5hcHBlbmRDaGlsZCh0aGlzLl9wcmUpO1xuICAgIGdldFNlbGVjdGlvbigpLnJlbW92ZUFsbFJhbmdlcygpO1xuICAgIHZhciByYW5nZSA9IGRvY3VtZW50LmNyZWF0ZVJhbmdlKCk7XG4gICAgcmFuZ2Uuc2VsZWN0Tm9kZSh0aGlzLl9wcmUpO1xuICAgIHdpbmRvdy5nZXRTZWxlY3Rpb24oKS5hZGRSYW5nZShyYW5nZSk7XG4gICAgZG9jdW1lbnQuZXhlY0NvbW1hbmQoJ2NvcHknKTtcbiAgICBnZXRTZWxlY3Rpb24oKS5yZW1vdmVBbGxSYW5nZXMoKTtcbiAgICBkb2N1bWVudC5ib2R5LnJlbW92ZUNoaWxkKHRoaXMuX3ByZSk7XG4gICAgdGhpcy5fcmlwcGxlLmFuaW1hdGUoKTtcbiAgfVxuXG4gIHNldFNWRyhzdmdGaWxlKSB7XG4gICAgdGhpcy5fc3ZnRmlsZSA9IHN2Z0ZpbGU7XG4gIH1cbn1cblxubW9kdWxlLmV4cG9ydHMgPSBDb3B5QnV0dG9uO1xuIiwidmFyIHV0aWxzID0gcmVxdWlyZSgnLi4vdXRpbHMnKTtcbnZhciBTcGlubmVyID0gcmVxdWlyZSgnLi9zcGlubmVyJyk7XG5cbmNsYXNzIERvd25sb2FkQnV0dG9uIHtcbiAgY29uc3RydWN0b3IoKSB7XG4gICAgdGhpcy5jb250YWluZXIgPSB1dGlscy5zdHJUb0VsKFxuICAgICAgJzxhIGhyZWY9XCIuL1wiIGNsYXNzPVwiZmxvYXRpbmctYWN0aW9uLWJ1dHRvblwiPicgK1xuICAgICAgICAnPHN2ZyB2aWV3Qm94PVwiMCAwIDI0IDI0XCIgY2xhc3M9XCJpY29uXCI+JyArXG4gICAgICAgICAgJzx0aXRsZT5Eb3dubG9hZCBvdXRwdXQ8L3RpdGxlPicgK1xuICAgICAgICAgICc8cGF0aCBkPVwiTTE5IDloLTRWM0g5djZINWw3IDcgNy03ek01IDE4djJoMTR2LTJINXpcIi8+JyArXG4gICAgICAgICc8L3N2Zz4nICtcbiAgICAgICc8L2E+JyArXG4gICAgJycpO1xuICAgIHRoaXMuX3NwaW5uZXIgPSBuZXcgU3Bpbm5lcigpO1xuICAgIHRoaXMuY29udGFpbmVyLmFwcGVuZENoaWxkKHRoaXMuX3NwaW5uZXIuY29udGFpbmVyKTtcbiAgICB0aGlzLl9zdmdGaWxlID0gbnVsbDtcblxuICAgIC8vIElFIGNvbXBhdFxuICAgIGlmICgnbXNTYXZlQmxvYicgaW4gbmF2aWdhdG9yKSB7XG4gICAgICB0aGlzLmNvbnRhaW5lci5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIGV2ZW50ID0+IHtcbiAgICAgICAgZXZlbnQucHJldmVudERlZmF1bHQoKTtcbiAgICAgICAgbmF2aWdhdG9yLm1zU2F2ZUJsb2IodGhpcy5fc3ZnRmlsZS5ibG9iLCB0aGlzLmNvbnRhaW5lci5kb3dubG9hZCk7XG4gICAgICB9KTtcbiAgICB9XG4gIH1cblxuICBzZXREb3dubG9hZChmaWxlbmFtZSwgc3ZnRmlsZSkge1xuICAgIHRoaXMuY29udGFpbmVyLmRvd25sb2FkID0gZmlsZW5hbWU7XG4gICAgdGhpcy5jb250YWluZXIuaHJlZiA9IHN2Z0ZpbGUudXJsO1xuXG4gICAgLy8gZm9yIElFIGNvbXBhdFxuICAgIHRoaXMuX3N2Z0ZpbGUgPSBzdmdGaWxlO1xuICB9XG5cbiAgd29ya2luZygpIHtcbiAgICB0aGlzLl9zcGlubmVyLnNob3coNTAwKTtcbiAgfVxuXG4gIGRvbmUoKSB7XG4gICAgdGhpcy5fc3Bpbm5lci5oaWRlKCk7XG4gIH1cbn1cblxubW9kdWxlLmV4cG9ydHMgPSBEb3dubG9hZEJ1dHRvbjsiLCJ2YXIgdXRpbHMgPSByZXF1aXJlKCcuLi91dGlscycpO1xuXG5jbGFzcyBDb2RlT3V0cHV0IHtcbiAgY29uc3RydWN0b3IoKSB7XG4gICAgdGhpcy5jb250YWluZXIgPSB1dGlscy5zdHJUb0VsKFxuICAgICAgJzxkaXYgY2xhc3M9XCJjb2RlLW91dHB1dFwiPicgK1xuICAgICAgICAnPHByZT48Y29kZT48L2NvZGU+PC9wcmU+JyArXG4gICAgICAnPC9kaXY+JyArXG4gICAgJycpO1xuICAgIHRoaXMuX2NvZGVFbCA9IHRoaXMuY29udGFpbmVyLnF1ZXJ5U2VsZWN0b3IoJ2NvZGUnKTtcbiAgfVxuXG4gIGFzeW5jIHNldFN2ZyhzdmdGaWxlKSB7XG4gICAgY29uc29sZS5sb2coc3ZnRmlsZSlcbiAgICB0aGlzLl9jb2RlRWwuaW5uZXJIVE1MID0gJyFbYWx0IGRlc2NyaXB0aW9uXSgnICsgZW5jb2RlVVJJQ29tcG9uZW50KHN2Z0ZpbGUudGV4dCkucmVwbGFjZSgvXFwoL2csICclMjgnKVxuICAgICAgLnJlcGxhY2UoL1xcKS9nLCAnJTI5JykgKyAnKSc7XG4gIH1cblxuICByZXNldCgpIHtcbiAgICB0aGlzLl9jb2RlRWwuaW5uZXJIVE1MID0gJyc7XG4gIH1cbn1cblxubW9kdWxlLmV4cG9ydHMgPSBDb2RlT3V0cHV0O1xuIiwidmFyIHV0aWxzID0gcmVxdWlyZSgnLi4vdXRpbHMnKTtcblxuZnVuY3Rpb24gdmlld0JveCAoc3ZnU3RyKSB7XG4gIGNvbnN0IHZpZXdCb3hSZWdleCA9IC88c3ZnIC4qP3ZpZXdCb3g9W1wiJ10oLT9bXFxkXFwuXStbLCBdKy0/W1xcZFxcLl0rWywgXVtcXGRcXC5dK1ssIF1bXFxkXFwuXSspW1wiJ10vXG4gIGNvbnN0IG1hdGNoZXMgPSBzdmdTdHIubWF0Y2godmlld0JveFJlZ2V4KVxuICByZXR1cm4gbWF0Y2hlcyAmJiBtYXRjaGVzLmxlbmd0aCA+PSAyID8gbWF0Y2hlc1sxXSA6IG51bGw7XG59XG5cbmNsYXNzIENvZGVPdXRwdXQge1xuICBjb25zdHJ1Y3RvcigpIHtcbiAgICB0aGlzLmNvbnRhaW5lciA9IHV0aWxzLnN0clRvRWwoXG4gICAgICAnPGRpdiBjbGFzcz1cImNvZGUtb3V0cHV0XCI+JyArXG4gICAgICAgICc8cHJlPjxjb2RlPjwvY29kZT48L3ByZT4nICtcbiAgICAgICc8L2Rpdj4nICtcbiAgICAnJyk7XG4gICAgdGhpcy5fY29kZUVsID0gdGhpcy5jb250YWluZXIucXVlcnlTZWxlY3RvcignY29kZScpO1xuICB9XG5cbiAgYXN5bmMgc2V0U3ZnKHN2Z0ZpbGUpIHtcbiAgICB0aGlzLl9jb2RlRWwuaW5uZXJUZXh0ID0gJ1snICsgdmlld0JveChzdmdGaWxlLnRleHQpICsgJ10gJyArIHN2Z0ZpbGUudGV4dC5yZXBsYWNlKC88c3ZnLio/Pi8sICcnKS5yZXBsYWNlKC9cXG4vZywgJycpLnJlcGxhY2UoLzxcXC9zdmcuKj8+LywgJycpO1xuICB9XG5cbiAgcmVzZXQoKSB7XG4gICAgdGhpcy5fY29kZUVsLmlubmVySFRNTCA9ICcnO1xuICB9XG59XG5cbm1vZHVsZS5leHBvcnRzID0gQ29kZU91dHB1dDtcbiIsInZhciB1dGlscyA9IHJlcXVpcmUoJy4uL3V0aWxzJyk7XG5cbmNsYXNzIEZpbGVEcm9wIGV4dGVuZHMgKHJlcXVpcmUoJ2V2ZW50cycpLkV2ZW50RW1pdHRlcikge1xuICBjb25zdHJ1Y3RvcigpIHtcbiAgICBzdXBlcigpO1xuICAgIHRoaXMuY29udGFpbmVyID0gdXRpbHMuc3RyVG9FbChcbiAgICAgICc8ZGl2IGNsYXNzPVwiZHJvcC1vdmVybGF5XCI+RHJvcCBpdCE8L2Rpdj4nICtcbiAgICAnJyk7XG5cbiAgICAvLyBkcmFnIGV2ZW50cyBhcmUgaG9ycmlkXG4gICAgdGhpcy5fYWN0aXZlRW50ZXJzID0gMDtcbiAgICB0aGlzLl9jdXJyZW50RW50ZXJlZEVsZW1lbnQgPSBudWxsO1xuXG4gICAgdXRpbHMuZG9tUmVhZHkudGhlbihfID0+IHtcbiAgICAgIGRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoJ2RyYWdvdmVyJywgZXZlbnQgPT4gZXZlbnQucHJldmVudERlZmF1bHQoKSk7XG4gICAgICBkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKCdkcmFnZW50ZXInLCBldmVudCA9PiB0aGlzLl9vbkRyYWdFbnRlcihldmVudCkpO1xuICAgICAgZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcignZHJhZ2xlYXZlJywgZXZlbnQgPT4gdGhpcy5fb25EcmFnTGVhdmUoZXZlbnQpKTtcbiAgICAgIGRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoJ2Ryb3AnLCBldmVudCA9PiB0aGlzLl9vbkRyb3AoZXZlbnQpKTtcbiAgICB9KTtcbiAgfVxuXG4gIF9vbkRyYWdFbnRlcihldmVudCkge1xuICAgIC8vIGZpcmVmb3ggZG91YmxlLWZpcmVzIG9uIHdpbmRvdyBlbnRlciwgdGhpcyB3b3JrcyBhcm91bmQgaXRcbiAgICAvLyBodHRwczovL2J1Z3ppbGxhLm1vemlsbGEub3JnL3Nob3dfYnVnLmNnaT9pZD0xMTI0NjQ1XG4gICAgaWYgKHRoaXMuX2N1cnJlbnRFbnRlcmVkRWxlbWVudCA9PSBldmVudC50YXJnZXQpIHJldHVybjtcbiAgICB0aGlzLl9jdXJyZW50RW50ZXJlZEVsZW1lbnQgPSBldmVudC50YXJnZXQ7XG5cbiAgICBpZiAoIXRoaXMuX2FjdGl2ZUVudGVycysrKSB7XG4gICAgICB1dGlscy50cmFuc2l0aW9uVG9DbGFzcyh0aGlzLmNvbnRhaW5lcik7XG4gICAgfVxuICB9XG5cbiAgX29uRHJhZ0xlYXZlKGV2ZW50KSB7XG4gICAgdGhpcy5fY3VycmVudEVudGVyZWRFbGVtZW50ID0gbnVsbDtcblxuICAgIGlmICghLS10aGlzLl9hY3RpdmVFbnRlcnMpIHtcbiAgICAgIHV0aWxzLnRyYW5zaXRpb25Gcm9tQ2xhc3ModGhpcy5jb250YWluZXIpO1xuICAgIH1cbiAgfVxuXG4gIGFzeW5jIF9vbkRyb3AoZXZlbnQpIHtcbiAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpO1xuXG4gICAgdGhpcy5fYWN0aXZlRW50ZXJzID0gMDtcbiAgICB1dGlscy50cmFuc2l0aW9uRnJvbUNsYXNzKHRoaXMuY29udGFpbmVyKTtcbiAgICB2YXIgZmlsZSA9IGV2ZW50LmRhdGFUcmFuc2Zlci5maWxlc1swXTtcblxuICAgIHRoaXMuZW1pdCgnc3ZnRGF0YUxvYWQnLCB7XG4gICAgICBkYXRhOiBhd2FpdCB1dGlscy5yZWFkRmlsZUFzVGV4dChmaWxlKSxcbiAgICAgIGZpbGVuYW1lOiBmaWxlLm5hbWVcbiAgICB9KTtcbiAgfVxufVxuXG5tb2R1bGUuZXhwb3J0cyA9IEZpbGVEcm9wO1xuIiwiXCJ1c2Ugc3RyaWN0XCI7XG5cbnZhciB1dGlscyA9IHJlcXVpcmUoJy4uL3V0aWxzJyk7XG52YXIgU3Bpbm5lciA9IHJlcXVpcmUoJy4vc3Bpbm5lcicpO1xuXG5jbGFzcyBNYWluTWVudSBleHRlbmRzIChyZXF1aXJlKCdldmVudHMnKS5FdmVudEVtaXR0ZXIpIHtcbiAgY29uc3RydWN0b3IoKSB7XG4gICAgc3VwZXIoKTtcblxuICAgIHRoaXMuYWxsb3dIaWRlID0gZmFsc2U7XG4gICAgdGhpcy5fc3Bpbm5lciA9IG5ldyBTcGlubmVyKCk7XG5cbiAgICB1dGlscy5kb21SZWFkeS50aGVuKF8gPT4ge1xuICAgICAgdGhpcy5jb250YWluZXIgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcubWFpbi1tZW51Jyk7XG4gICAgICB0aGlzLl9zZWxlY3RGaWxlSW5wdXQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuc2VsZWN0LWZpbGUtaW5wdXQnKTtcbiAgICAgIHRoaXMuX3Bhc3RlSW5wdXQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcucGFzdGUtaW5wdXQnKTtcbiAgICAgIHRoaXMuX2xvYWREZW1vQnRuID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLmxvYWQtZGVtbycpO1xuICAgICAgdGhpcy5fc2VsZWN0RmlsZUJ0biA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5zZWxlY3QtZmlsZScpO1xuICAgICAgdGhpcy5fcGFzdGVMYWJlbCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5tZW51LWlucHV0Jyk7XG4gICAgICB0aGlzLl9vdmVybGF5ID0gdGhpcy5jb250YWluZXIucXVlcnlTZWxlY3RvcignLm92ZXJsYXknKTtcbiAgICAgIHRoaXMuX21lbnUgPSB0aGlzLmNvbnRhaW5lci5xdWVyeVNlbGVjdG9yKCcubWVudScpO1xuXG4gICAgICBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcubWVudS1idG4nKVxuICAgICAgICAuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCBlID0+IHRoaXMuX29uTWVudUJ1dHRvbkNsaWNrKGUpKTtcblxuICAgICAgdGhpcy5fb3ZlcmxheS5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIGUgPT4gdGhpcy5fb25PdmVybGF5Q2xpY2soZSkpO1xuXG4gICAgICB0aGlzLl9zZWxlY3RGaWxlQnRuLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgZSA9PiB0aGlzLl9vblNlbGVjdEZpbGVDbGljayhlKSk7XG4gICAgICB0aGlzLl9sb2FkRGVtb0J0bi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIGUgPT4gdGhpcy5fb25Mb2FkRGVtb0NsaWNrKGUpKTtcbiAgICAgIHRoaXMuX3NlbGVjdEZpbGVJbnB1dC5hZGRFdmVudExpc3RlbmVyKCdjaGFuZ2UnLCBlID0+IHRoaXMuX29uRmlsZUlucHV0Q2hhbmdlKGUpKTtcbiAgICAgIHRoaXMuX3Bhc3RlSW5wdXQuYWRkRXZlbnRMaXN0ZW5lcignaW5wdXQnLCBlID0+IHRoaXMuX29uVGV4dElucHV0Q2hhbmdlKGUpKTtcbiAgICB9KTtcbiAgfVxuXG4gIHNob3coKSB7XG4gICAgdGhpcy5jb250YWluZXIuY2xhc3NMaXN0LnJlbW92ZSgnaGlkZGVuJyk7XG4gICAgdXRpbHMudHJhbnNpdGlvbkZyb21DbGFzcyh0aGlzLl9vdmVybGF5LCAnaGlkZGVuJyk7XG4gICAgdXRpbHMudHJhbnNpdGlvbkZyb21DbGFzcyh0aGlzLl9tZW51LCAnaGlkZGVuJyk7XG4gIH1cblxuICBoaWRlKCkge1xuICAgIGlmICghdGhpcy5hbGxvd0hpZGUpIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG4gICAgdGhpcy5zdG9wU3Bpbm5lcigpO1xuICAgIHRoaXMuY29udGFpbmVyLmNsYXNzTGlzdC5hZGQoJ2hpZGRlbicpO1xuICAgIHV0aWxzLnRyYW5zaXRpb25Ub0NsYXNzKHRoaXMuX292ZXJsYXksICdoaWRkZW4nKTtcbiAgICB1dGlscy50cmFuc2l0aW9uVG9DbGFzcyh0aGlzLl9tZW51LCAnaGlkZGVuJyk7XG4gIH1cblxuICBzdG9wU3Bpbm5lcigpIHtcbiAgICB0aGlzLl9zcGlubmVyLmhpZGUoKTtcbiAgfVxuXG4gIF9vbk92ZXJsYXlDbGljayhldmVudCkge1xuICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KCk7XG4gICAgdGhpcy5oaWRlKCk7XG4gIH1cblxuICBfb25NZW51QnV0dG9uQ2xpY2soZXZlbnQpIHtcbiAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpO1xuICAgIHRoaXMuc2hvdygpO1xuICB9XG5cbiAgX29uVGV4dElucHV0Q2hhbmdlKGV2ZW50KSB7XG4gICAgdmFyIHZhbCA9IHRoaXMuX3Bhc3RlSW5wdXQudmFsdWUudHJpbSgpO1xuXG4gICAgaWYgKHZhbC5pbmRleE9mKCc8L3N2Zz4nKSAhPSAtMSkge1xuICAgICAgdGhpcy5fcGFzdGVJbnB1dC52YWx1ZSA9ICcnO1xuICAgICAgdGhpcy5fcGFzdGVJbnB1dC5ibHVyKCk7XG5cbiAgICAgIHRoaXMuX3Bhc3RlTGFiZWwuYXBwZW5kQ2hpbGQodGhpcy5fc3Bpbm5lci5jb250YWluZXIpO1xuICAgICAgdGhpcy5fc3Bpbm5lci5zaG93KCk7XG5cbiAgICAgIHRoaXMuZW1pdCgnc3ZnRGF0YUxvYWQnLCB7XG4gICAgICAgIGRhdGE6IHZhbCxcbiAgICAgICAgZmlsZW5hbWU6ICdpbWFnZS5zdmcnXG4gICAgICB9KTtcbiAgICB9XG4gIH1cblxuICBfb25TZWxlY3RGaWxlQ2xpY2soZXZlbnQpIHtcbiAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpO1xuICAgIGV2ZW50LnRhcmdldC5ibHVyKCk7XG4gICAgdGhpcy5fc2VsZWN0RmlsZUlucHV0LmNsaWNrKCk7XG4gIH1cblxuICBhc3luYyBfb25GaWxlSW5wdXRDaGFuZ2UoZXZlbnQpIHtcbiAgICB2YXIgZmlsZSA9IHRoaXMuX3NlbGVjdEZpbGVJbnB1dC5maWxlc1swXTtcblxuICAgIGlmICghZmlsZSkge1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIHRoaXMuX3NlbGVjdEZpbGVCdG4uYXBwZW5kQ2hpbGQodGhpcy5fc3Bpbm5lci5jb250YWluZXIpO1xuICAgIHRoaXMuX3NwaW5uZXIuc2hvdygpO1xuXG4gICAgdGhpcy5lbWl0KCdzdmdEYXRhTG9hZCcsIHtcbiAgICAgIGRhdGE6IGF3YWl0IHV0aWxzLnJlYWRGaWxlQXNUZXh0KGZpbGUpLFxuICAgICAgZmlsZW5hbWU6IGZpbGUubmFtZVxuICAgIH0pO1xuICB9XG5cbiAgYXN5bmMgX29uTG9hZERlbW9DbGljayhldmVudCkge1xuICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KCk7XG4gICAgZXZlbnQudGFyZ2V0LmJsdXIoKTtcbiAgICB0aGlzLl9sb2FkRGVtb0J0bi5hcHBlbmRDaGlsZCh0aGlzLl9zcGlubmVyLmNvbnRhaW5lcik7XG4gICAgdGhpcy5fc3Bpbm5lci5zaG93KCk7XG5cbiAgICB0cnkge1xuICAgICAgdGhpcy5lbWl0KCdzdmdEYXRhTG9hZCcsIHtcbiAgICAgICAgZGF0YTogYXdhaXQgdXRpbHMuZ2V0KCd0ZXN0LXN2Z3MvY2FyLWxpdGUuc3ZnJyksXG4gICAgICAgIGZpbGVuYW1lOiAnY2FyLnN2ZydcbiAgICAgIH0pO1xuICAgIH1cbiAgICBjYXRjaCAoZXJyb3IpIHtcbiAgICAgIHRoaXMuc3RvcFNwaW5uZXIoKTtcblxuICAgICAgdmFyIGU7XG5cbiAgICAgIGlmICgnc2VydmljZVdvcmtlcicgaW4gbmF2aWdhdG9yICYmIG5hdmlnYXRvci5zZXJ2aWNlV29ya2VyLmNvbnRyb2xsZXIpIHtcbiAgICAgICAgZSA9IEVycm9yKFwiRGVtbyBub3QgYXZhaWxhYmxlIG9mZmxpbmVcIik7XG4gICAgICB9XG4gICAgICBlbHNlIHtcbiAgICAgICAgZSA9IEVycm9yKFwiQ291bGRuJ3QgZmV0Y2ggZGVtbyBTVkdcIik7XG4gICAgICB9XG5cbiAgICAgIHRoaXMuZW1pdCgnZXJyb3InLCB7XG4gICAgICAgIGVycm9yOiBlXG4gICAgICB9KTtcbiAgICB9XG4gIH1cbn1cblxubW9kdWxlLmV4cG9ydHMgPSBNYWluTWVudTsiLCJ2YXIgdXRpbHMgPSByZXF1aXJlKCcuLi91dGlscycpO1xuXG5jbGFzcyBNYWluVWkge1xuICBjb25zdHJ1Y3RvciguLi5lbGVtZW50cykge1xuICAgIHRoaXMuX2FjdGl2YXRlZCA9IGZhbHNlO1xuICAgIHRoaXMuX3RvQWN0aXZhdGUgPSBlbGVtZW50cztcbiAgfVxuXG4gIGFjdGl2YXRlKCkge1xuICAgIGlmICh0aGlzLl9hY3RpdmF0ZWQpIHJldHVybjtcbiAgICB0aGlzLl9hY3RpdmF0ZWQgPSB0cnVlO1xuXG4gICAgcmV0dXJuIFByb21pc2UuYWxsKFxuICAgICAgdGhpcy5fdG9BY3RpdmF0ZS5tYXAoZWwgPT4gdXRpbHMudHJhbnNpdGlvblRvQ2xhc3MoZWwpKVxuICAgICk7XG4gIH1cbn1cblxubW9kdWxlLmV4cG9ydHMgPSBNYWluVWk7IiwidmFyIHV0aWxzID0gcmVxdWlyZSgnLi4vdXRpbHMnKTtcblxuY2xhc3MgTWF0ZXJpYWxTbGlkZXIge1xuICBjb25zdHJ1Y3RvcihyYW5nZUVsKSB7XG4gICAgdGhpcy5jb250YWluZXIgPSB1dGlscy5zdHJUb0VsKGBcbiAgICAgIDxkaXYgY2xhc3M9XCJtYXRlcmlhbC1zbGlkZXJcIj5cbiAgICAgICAgPGRpdiBjbGFzcz1cInRyYWNrXCI+XG4gICAgICAgICAgPGRpdiBjbGFzcz1cInRyYWNrLW9uXCI+PC9kaXY+XG4gICAgICAgICAgPGRpdiBjbGFzcz1cImhhbmRsZVwiPlxuICAgICAgICAgICAgPGRpdiBjbGFzcz1cImFycm93XCI+PC9kaXY+XG4gICAgICAgICAgICA8ZGl2IGNsYXNzPVwidmFsXCI+PC9kaXY+XG4gICAgICAgICAgPC9kaXY+XG4gICAgICAgIDwvZGl2PlxuICAgICAgPC9kaXY+XG4gICAgYCk7XG5cbiAgICB0aGlzLnJhbmdlID0gcmFuZ2VFbDtcbiAgICB0aGlzLl9oYW5kbGUgPSB0aGlzLmNvbnRhaW5lci5xdWVyeVNlbGVjdG9yKCcuaGFuZGxlJyk7XG4gICAgdGhpcy5fdHJhY2tPbiA9IHRoaXMuY29udGFpbmVyLnF1ZXJ5U2VsZWN0b3IoJy50cmFjay1vbicpO1xuICAgIHRoaXMuX3ZhbCA9IHRoaXMuY29udGFpbmVyLnF1ZXJ5U2VsZWN0b3IoJy52YWwnKTtcblxuICAgIHJhbmdlRWwucGFyZW50Tm9kZS5pbnNlcnRCZWZvcmUodGhpcy5jb250YWluZXIsIHJhbmdlRWwpO1xuICAgIHRoaXMuY29udGFpbmVyLmluc2VydEJlZm9yZShyYW5nZUVsLCB0aGlzLmNvbnRhaW5lci5maXJzdENoaWxkKTtcblxuICAgIC8vIGV2ZW50c1xuICAgIC8vIHRoYW5rcyBJRVxuICAgIHZhciByYW5nZUNoYW5nZUV2ZW50ID0gdXRpbHMuaXNJZSA/ICdjaGFuZ2UnIDogJ2lucHV0JztcblxuICAgIHJhbmdlRWwuYWRkRXZlbnRMaXN0ZW5lcihyYW5nZUNoYW5nZUV2ZW50LCBlID0+IHRoaXMuX29uSW5wdXRDaGFuZ2UoZSkpO1xuICAgIHRoaXMucmFuZ2UuYWRkRXZlbnRMaXN0ZW5lcignbW91c2Vkb3duJywgZSA9PiB0aGlzLl9vblJhbmdlTW91c2VEb3duKGUpKTtcbiAgICB0aGlzLnJhbmdlLmFkZEV2ZW50TGlzdGVuZXIoJ3RvdWNoc3RhcnQnLCBlID0+IHRoaXMuX29uUmFuZ2VUb3VjaFN0YXJ0KGUpKTtcbiAgICB0aGlzLnJhbmdlLmFkZEV2ZW50TGlzdGVuZXIoJ3RvdWNoZW5kJywgZSA9PiB0aGlzLl9vblJhbmdlVG91Y2hFbmQoZSkpO1xuXG4gICAgdGhpcy5fc2V0UG9zaXRpb24oKTtcbiAgfVxuXG4gIF9vblJhbmdlVG91Y2hTdGFydChldmVudCkge1xuICAgIHRoaXMucmFuZ2UuZm9jdXMoKTtcbiAgfVxuXG4gIF9vblJhbmdlVG91Y2hFbmQoZXZlbnQpIHtcbiAgICB0aGlzLnJhbmdlLmJsdXIoKTtcbiAgfVxuXG4gIF9vblJhbmdlTW91c2VEb3duKGV2ZW50KSB7XG4gICAgdGhpcy5yYW5nZS5jbGFzc0xpc3QuYWRkKCdhY3RpdmUnKTtcblxuICAgIHZhciB1cExpc3RlbmVyID0gZSA9PiB7XG4gICAgICAvLyBJRSByZXF1aXJlcyBtZSB0byBkbyB0aGlzLiBQYWguXG4gICAgICByZXF1ZXN0QW5pbWF0aW9uRnJhbWUoXyA9PiB7XG4gICAgICAgIHRoaXMucmFuZ2UuYmx1cigpO1xuICAgICAgfSlcbiAgICAgIHRoaXMucmFuZ2UuY2xhc3NMaXN0LnJlbW92ZSgnYWN0aXZlJyk7XG4gICAgICBkb2N1bWVudC5yZW1vdmVFdmVudExpc3RlbmVyKCdtb3VzZXVwJywgdXBMaXN0ZW5lcik7XG4gICAgfVxuICAgIGRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoJ21vdXNldXAnLCB1cExpc3RlbmVyKTtcbiAgfVxuXG4gIHNldCB2YWx1ZShuZXdWYWwpIHtcbiAgICB0aGlzLnJhbmdlLnZhbHVlID0gbmV3VmFsO1xuICAgIHRoaXMuX3VwZGF0ZSgpO1xuICB9XG5cbiAgX29uSW5wdXRDaGFuZ2UoKSB7XG4gICAgdGhpcy5fdXBkYXRlKCk7XG4gIH1cblxuICBfdXBkYXRlKCkge1xuICAgIHJlcXVlc3RBbmltYXRpb25GcmFtZShfID0+IHRoaXMuX3NldFBvc2l0aW9uKCkpO1xuICB9XG5cbiAgX3NldFBvc2l0aW9uKCkge1xuICAgIHZhciB7IG1pbiwgbWF4LCB2YWx1ZSB9ID0gdGhpcy5yYW5nZTtcbiAgICB2YXIgcGVyY2VudCA9IChOdW1iZXIodmFsdWUpIC0gbWluKSAvIChtYXggLSBtaW4pO1xuICAgIHRoaXMuX3RyYWNrT24uc3R5bGUud2lkdGggPSBcbiAgICAgIHRoaXMuX2hhbmRsZS5zdHlsZS5sZWZ0ID0gcGVyY2VudCAqIDEwMCArIFwiJVwiO1xuXG4gICAgdGhpcy5fdmFsLnRleHRDb250ZW50ID0gdmFsdWU7XG4gIH1cbn1cblxubW9kdWxlLmV4cG9ydHMgPSBNYXRlcmlhbFNsaWRlcjsiLCJ2YXIgdXRpbHMgPSByZXF1aXJlKCcuLi91dGlscycpO1xuXG5jbGFzcyBPdXRwdXQge1xuICBjb25zdHJ1Y3RvcigpIHtcbiAgICB0aGlzLmNvbnRhaW5lciA9IHV0aWxzLnN0clRvRWwoXG4gICAgICAnPGRpdiBjbGFzcz1cIm91dHB1dC1zd2l0Y2hlclwiPjwvZGl2PicgK1xuICAgICcnKTtcblxuICAgIHRoaXMuX3R5cGVzID0ge1xuICAgICAgaW1hZ2U6IG5ldyAocmVxdWlyZSgnLi9zdmctb3V0cHV0JykpLFxuICAgICAgY29kZTogbmV3IChyZXF1aXJlKCcuL2NvZGUtb3V0cHV0JykpLFxuICAgICAgZW5raV9jb2RlOiBuZXcgKHJlcXVpcmUoJy4vZW5raS1jb2RlLW91dHB1dCcpKSxcbiAgICAgIGVua2lfdG9waWNfY29kZTogbmV3IChyZXF1aXJlKCcuL2Vua2ktdG9waWMtY29kZS1vdXRwdXQnKSlcbiAgICB9O1xuXG4gICAgdGhpcy5fc3ZnRmlsZSA9IG51bGw7XG4gICAgdGhpcy5fc3dpdGNoUXVldWUgPSBQcm9taXNlLnJlc29sdmUoKTtcbiAgICB0aGlzLnNldCgnaW1hZ2UnLCB7bm9BbmltYXRlOiB0cnVlfSk7XG4gIH1cblxuICB1cGRhdGUoc3ZnRmlsZSkge1xuICAgIHRoaXMuX3N2Z0ZpbGUgPSBzdmdGaWxlO1xuICAgIHJldHVybiB0aGlzLl90eXBlc1t0aGlzLl9hY3RpdmVUeXBlXS5zZXRTdmcoc3ZnRmlsZSk7XG4gIH1cblxuICByZXNldCgpIHtcbiAgICB0aGlzLl90eXBlc1t0aGlzLl9hY3RpdmVUeXBlXS5yZXNldCgpO1xuICB9XG5cbiAgc2V0KHR5cGUsIHtcbiAgICBub0FuaW1hdGUgPSBmYWxzZVxuICB9PXt9KSB7XG4gICAgcmV0dXJuIHRoaXMuX3N3aXRjaFF1ZXVlID0gdGhpcy5fc3dpdGNoUXVldWUudGhlbihhc3luYyBfID0+IHtcbiAgICAgIHZhciB0b1JlbW92ZTtcbiAgICAgIHZhciB0b0FkZDtcblxuICAgICAgaWYgKHRoaXMuX2FjdGl2ZVR5cGUpIHtcbiAgICAgICAgdG9SZW1vdmUgPSB0aGlzLl90eXBlc1t0aGlzLl9hY3RpdmVUeXBlXS5jb250YWluZXI7XG4gICAgICB9XG5cbiAgICAgIHRoaXMuX2FjdGl2ZVR5cGUgPSB0eXBlO1xuICAgICAgdG9BZGQgPSB0aGlzLl90eXBlc1t0aGlzLl9hY3RpdmVUeXBlXS5jb250YWluZXI7XG4gICAgICB0aGlzLmNvbnRhaW5lci5hcHBlbmRDaGlsZCh0b0FkZCk7XG5cbiAgICAgIGlmICh0aGlzLl9zdmdGaWxlKSBhd2FpdCB0aGlzLnVwZGF0ZSh0aGlzLl9zdmdGaWxlKTtcblxuICAgICAgaWYgKG5vQW5pbWF0ZSkge1xuICAgICAgICB0b0FkZC5jbGFzc0xpc3QuYWRkKCdhY3RpdmUnKTtcbiAgICAgICAgaWYgKHRvUmVtb3ZlKSB0b1JlbW92ZS5jbGFzc0xpc3QucmVtb3ZlKCdhY3RpdmUnKTtcbiAgICAgIH1cbiAgICAgIGVsc2Uge1xuICAgICAgICBsZXQgdHJhbnNpdGlvbnMgPSBbXG4gICAgICAgICAgdXRpbHMudHJhbnNpdGlvblRvQ2xhc3ModG9BZGQpXG4gICAgICAgIF07XG5cbiAgICAgICAgaWYgKHRvUmVtb3ZlKSB0cmFuc2l0aW9ucy5wdXNoKHV0aWxzLnRyYW5zaXRpb25Gcm9tQ2xhc3ModG9SZW1vdmUpKTtcblxuICAgICAgICBhd2FpdCBQcm9taXNlLmFsbCh0cmFuc2l0aW9ucyk7XG4gICAgICB9XG5cbiAgICAgIGlmICh0b1JlbW92ZSkge1xuICAgICAgICB0aGlzLmNvbnRhaW5lci5yZW1vdmVDaGlsZCh0b1JlbW92ZSk7XG4gICAgICB9XG4gICAgfSlcbiAgfVxufVxuXG5tb2R1bGUuZXhwb3J0cyA9IE91dHB1dDtcbiIsInZhciB1dGlscyA9IHJlcXVpcmUoJy4uL3V0aWxzJyk7XG5cbmZ1bmN0aW9uIGdldFhZKG9iaikge1xuICByZXR1cm4ge1xuICAgIHg6IG9iai5wYWdlWCxcbiAgICB5OiBvYmoucGFnZVlcbiAgfTtcbn1cblxuZnVuY3Rpb24gdG91Y2hEaXN0YW5jZSh0b3VjaDEsIHRvdWNoMikge1xuICB2YXIgZHggPSBNYXRoLmFicyh0b3VjaDIueCAtIHRvdWNoMS54KTtcbiAgdmFyIGR5ID0gTWF0aC5hYnModG91Y2gyLnkgLSB0b3VjaDEueSk7XG4gIHJldHVybiBNYXRoLnNxcnQoZHgqZHggKyBkeSpkeSk7XG59XG5cbmZ1bmN0aW9uIGdldE1pZHBvaW50KHBvaW50MSwgcG9pbnQyKSB7XG4gIHJldHVybiB7XG4gICAgeDogKHBvaW50MS54ICsgcG9pbnQyLngpIC8gMixcbiAgICB5OiAocG9pbnQxLnkgKyBwb2ludDIueSkgLyAyXG4gIH07XG59XG5cbmZ1bmN0aW9uIGdldFBvaW50cyhldmVudCkge1xuICBpZiAoZXZlbnQudG91Y2hlcykge1xuICAgIHJldHVybiBBcnJheS5wcm90b3R5cGUubWFwLmNhbGwoZXZlbnQudG91Y2hlcywgZ2V0WFkpO1xuICB9XG4gIGVsc2Uge1xuICAgIHJldHVybiBbZ2V0WFkoZXZlbnQpXTtcbiAgfVxufVxuXG5jbGFzcyBQYW5ab29tIHtcbiAgY29uc3RydWN0b3IodGFyZ2V0LCB7XG4gICAgZXZlbnRBcmVhID0gdGFyZ2V0LFxuICAgIHNob3VsZENhcHR1cmVGdW5jID0gZnVuY3Rpb24oZWwpeyByZXR1cm4gdHJ1ZTsgfVxuICB9PXt9KSB7XG4gICAgdGhpcy5fdGFyZ2V0ID0gdGFyZ2V0O1xuICAgIHRoaXMuX3Nob3VsZENhcHR1cmVGdW5jID0gc2hvdWxkQ2FwdHVyZUZ1bmM7XG4gICAgdGhpcy5fZHggPSAwO1xuICAgIHRoaXMuX2R5ID0gMDtcbiAgICB0aGlzLl9zY2FsZSA9IDE7XG4gICAgdGhpcy5fYWN0aXZlID0gMDtcbiAgICB0aGlzLl9sYXN0UG9pbnRzID0gW107XG5cbiAgICAvLyBiaW5kXG4gICAgW1xuICAgICAgJ19vblBvaW50ZXJEb3duJyxcbiAgICAgICdfb25Qb2ludGVyTW92ZScsXG4gICAgICAnX29uUG9pbnRlclVwJ1xuICAgIF0uZm9yRWFjaChmdW5jTmFtZSA9PiB7XG4gICAgICB0aGlzW2Z1bmNOYW1lXSA9IHRoaXNbZnVuY05hbWVdLmJpbmQodGhpcyk7XG4gICAgfSlcblxuICAgIC8vIGJvdW5kIGV2ZW50c1xuICAgIGV2ZW50QXJlYS5hZGRFdmVudExpc3RlbmVyKCdtb3VzZWRvd24nLCB0aGlzLl9vblBvaW50ZXJEb3duKTtcbiAgICBldmVudEFyZWEuYWRkRXZlbnRMaXN0ZW5lcigndG91Y2hzdGFydCcsIHRoaXMuX29uUG9pbnRlckRvd24pO1xuXG4gICAgLy8gdW5ib251ZFxuICAgIGV2ZW50QXJlYS5hZGRFdmVudExpc3RlbmVyKCd3aGVlbCcsIGUgPT4gdGhpcy5fb25XaGVlbChlKSk7XG4gIH1cblxuICByZXNldCgpIHtcbiAgICB0aGlzLl9keCA9IDA7XG4gICAgdGhpcy5fZHkgPSAwO1xuICAgIHRoaXMuX3NjYWxlID0gMTtcbiAgICB0aGlzLl91cGRhdGUoKTtcbiAgfVxuXG4gIF9vbldoZWVsKGV2ZW50KSB7XG4gICAgaWYgKCF0aGlzLl9zaG91bGRDYXB0dXJlRnVuYyhldmVudC50YXJnZXQpKSByZXR1cm47XG4gICAgZXZlbnQucHJldmVudERlZmF1bHQoKTtcblxuICAgIHZhciBib3VuZGluZ1JlY3QgPSB0aGlzLl90YXJnZXQuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCk7XG4gICAgdmFyIGRlbHRhID0gZXZlbnQuZGVsdGFZO1xuXG4gICAgaWYgKGV2ZW50LmRlbHRhTW9kZSA9PT0gMSkgeyAvLyAxIGlzIFwibGluZXNcIiwgMCBpcyBcInBpeGVsc1wiXG4gICAgICAvLyBGaXJlZm94IHVzZXMgXCJsaW5lc1wiIHdoZW4gbW91c2UgaXMgY29ubmVjdGVkXG4gICAgICBkZWx0YSAqPSAxNTtcbiAgICB9XG5cbiAgICAvLyBzdG9wIG1vdXNlIHdoZWVsIHByb2R1Y2luZyBodWdlIHZhbHVlc1xuICAgIGRlbHRhID0gTWF0aC5tYXgoTWF0aC5taW4oZGVsdGEsIDYwKSwgLTYwKTtcblxuICAgIHZhciBzY2FsZURpZmYgPSAoZGVsdGEgLyAzMDApICsgMTtcblxuICAgIC8vIGF2b2lkIHRvLXNtYWxsIHZhbHVlc1xuICAgIGlmICh0aGlzLl9zY2FsZSAqIHNjYWxlRGlmZiA8IDAuMDUpIHJldHVybjtcblxuICAgIHRoaXMuX3NjYWxlICo9IHNjYWxlRGlmZjtcbiAgICB0aGlzLl9keCAtPSAoZXZlbnQucGFnZVggLSBib3VuZGluZ1JlY3QubGVmdCkgKiAoc2NhbGVEaWZmIC0gMSk7XG4gICAgdGhpcy5fZHkgLT0gKGV2ZW50LnBhZ2VZIC0gYm91bmRpbmdSZWN0LnRvcCkgKiAoc2NhbGVEaWZmIC0gMSk7XG4gICAgdGhpcy5fdXBkYXRlKCk7XG4gIH1cblxuICBfb25GaXJzdFBvaW50ZXJEb3duKGV2ZW50KSB7XG4gICAgZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcignbW91c2Vtb3ZlJywgdGhpcy5fb25Qb2ludGVyTW92ZSk7XG4gICAgZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcignbW91c2V1cCcsIHRoaXMuX29uUG9pbnRlclVwKTtcbiAgICBkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKCd0b3VjaG1vdmUnLCB0aGlzLl9vblBvaW50ZXJNb3ZlKTtcbiAgICBkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKCd0b3VjaGVuZCcsIHRoaXMuX29uUG9pbnRlclVwKTtcbiAgfVxuXG4gIF9vblBvaW50ZXJEb3duKGV2ZW50KSB7XG4gICAgaWYgKGV2ZW50LnR5cGUgPT0gJ21vdXNlZG93bicgJiYgZXZlbnQud2hpY2ggIT0gMSkgcmV0dXJuO1xuICAgIGlmICghdGhpcy5fc2hvdWxkQ2FwdHVyZUZ1bmMoZXZlbnQudGFyZ2V0KSkgcmV0dXJuO1xuICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KCk7XG5cbiAgICB0aGlzLl9sYXN0UG9pbnRzID0gZ2V0UG9pbnRzKGV2ZW50KTtcbiAgICB0aGlzLl9hY3RpdmUrKztcblxuICAgIGlmICh0aGlzLl9hY3RpdmUgPT09IDEpIHtcbiAgICAgIHRoaXMuX29uRmlyc3RQb2ludGVyRG93bihldmVudCk7XG4gICAgfVxuICB9XG5cbiAgX29uUG9pbnRlck1vdmUoZXZlbnQpIHtcbiAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpO1xuICAgIHZhciBwb2ludHMgPSBnZXRQb2ludHMoZXZlbnQpO1xuICAgIHZhciBhdmVyYWdlUG9pbnQgPSBwb2ludHMucmVkdWNlKGdldE1pZHBvaW50KTtcbiAgICB2YXIgYXZlcmFnZUxhc3RQb2ludCA9IHRoaXMuX2xhc3RQb2ludHMucmVkdWNlKGdldE1pZHBvaW50KTtcbiAgICB2YXIgYm91bmRpbmdSZWN0ID0gdGhpcy5fdGFyZ2V0LmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpO1xuXG4gICAgdGhpcy5fZHggKz0gYXZlcmFnZVBvaW50LnggLSBhdmVyYWdlTGFzdFBvaW50Lng7XG4gICAgdGhpcy5fZHkgKz0gYXZlcmFnZVBvaW50LnkgLSBhdmVyYWdlTGFzdFBvaW50Lnk7XG5cbiAgICBpZiAocG9pbnRzWzFdKSB7XG4gICAgICB2YXIgc2NhbGVEaWZmID0gdG91Y2hEaXN0YW5jZShwb2ludHNbMF0sIHBvaW50c1sxXSkgLyB0b3VjaERpc3RhbmNlKHRoaXMuX2xhc3RQb2ludHNbMF0sIHRoaXMuX2xhc3RQb2ludHNbMV0pO1xuICAgICAgdGhpcy5fc2NhbGUgKj0gc2NhbGVEaWZmO1xuICAgICAgdGhpcy5fZHggLT0gKGF2ZXJhZ2VQb2ludC54IC0gYm91bmRpbmdSZWN0LmxlZnQpICogKHNjYWxlRGlmZiAtIDEpO1xuICAgICAgdGhpcy5fZHkgLT0gKGF2ZXJhZ2VQb2ludC55IC0gYm91bmRpbmdSZWN0LnRvcCkgKiAoc2NhbGVEaWZmIC0gMSk7XG4gICAgfVxuXG4gICAgdGhpcy5fdXBkYXRlKCk7XG4gICAgdGhpcy5fbGFzdFBvaW50cyA9IHBvaW50cztcbiAgfVxuXG4gIF91cGRhdGUoKSB7XG4gICAgdGhpcy5fdGFyZ2V0LnN0eWxlLldlYmtpdFRyYW5zZm9ybSA9IHRoaXMuX3RhcmdldC5zdHlsZS50cmFuc2Zvcm1cbiAgICAgID0gJ3RyYW5zbGF0ZTNkKCcgKyB0aGlzLl9keCArICdweCwgJyArIHRoaXMuX2R5ICsgJ3B4LCAwKSBzY2FsZSgnICsgdGhpcy5fc2NhbGUgKyAnKSc7XG4gIH1cblxuICBfb25Qb2ludGVyVXAoZXZlbnQpIHtcbiAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpO1xuICAgIHRoaXMuX2FjdGl2ZS0tO1xuICAgIHRoaXMuX2xhc3RQb2ludHMucG9wKCk7XG5cbiAgICBpZiAodGhpcy5fYWN0aXZlKSB7XG4gICAgICB0aGlzLl9sYXN0UG9pbnRzID0gZ2V0UG9pbnRzKGV2ZW50KTtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICBkb2N1bWVudC5yZW1vdmVFdmVudExpc3RlbmVyKCdtb3VzZW1vdmUnLCB0aGlzLl9vblBvaW50ZXJNb3ZlKTtcbiAgICBkb2N1bWVudC5yZW1vdmVFdmVudExpc3RlbmVyKCdtb3VzZXVwJywgdGhpcy5fb25Qb2ludGVyVXApO1xuICAgIGRvY3VtZW50LnJlbW92ZUV2ZW50TGlzdGVuZXIoJ3RvdWNobW92ZScsIHRoaXMuX29uUG9pbnRlck1vdmUpO1xuICAgIGRvY3VtZW50LnJlbW92ZUV2ZW50TGlzdGVuZXIoJ3RvdWNoZW5kJywgdGhpcy5fb25Qb2ludGVyVXApO1xuICB9XG59XG5cbm1vZHVsZS5leHBvcnRzID0gUGFuWm9vbTtcbiIsInZhciB1dGlscyA9IHJlcXVpcmUoJy4uL3V0aWxzJyk7XG5cbmNsYXNzIFByZWxvYWRlciB7XG4gIGNvbnN0cnVjdG9yKCkge1xuICAgIHV0aWxzLmRvbVJlYWR5LnRoZW4oXyA9PiB7XG4gICAgICB0aGlzLmNvbnRhaW5lciA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5wcmVsb2FkZXInKTtcbiAgICAgIHRoaXMuYWN0aXZhdGVkID0gdGhpcy5jb250YWluZXIuY2xhc3NMaXN0LmNvbnRhaW5zKCdhY3RpdmUnKTtcbiAgICAgIHRoaXMuaGlkZSgpO1xuICAgIH0pO1xuICB9XG5cbiAgYXN5bmMgaGlkZSgpIHtcbiAgICBhd2FpdCB1dGlscy50cmFuc2l0aW9uRnJvbUNsYXNzKHRoaXMuY29udGFpbmVyLCAnYWN0aXZlJyk7XG4gICAgdGhpcy5jb250YWluZXIuc3R5bGUuZGlzcGxheSA9ICdub25lJztcbiAgfVxufVxuXG5tb2R1bGUuZXhwb3J0cyA9IFByZWxvYWRlcjsiLCJ2YXIgdXRpbHMgPSByZXF1aXJlKCcuLi91dGlscycpO1xuXG5jbGFzcyBSZXN1bHRzQ29udGFpbmVyIHtcbiAgY29uc3RydWN0b3IocmVzdWx0cykge1xuICAgIHRoaXMuX3Jlc3VsdHMgPSByZXN1bHRzO1xuXG4gICAgdXRpbHMuZG9tUmVhZHkudGhlbihfID0+IHtcbiAgICAgIHRoaXMuX21vYmlsZUNvbnRhaW5lciA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5yZXN1bHRzLWNvbnRhaW5lci1tb2JpbGUnKTtcbiAgICAgIHRoaXMuX2NvbnRhaW5lciA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5yZXN1bHRzLWNvbnRhaW5lcicpO1xuICAgICAgdGhpcy5fcXVlcnkgPSBtYXRjaE1lZGlhKCcobWluLXdpZHRoOiA2NDBweCknKTtcblxuICAgICAgdGhpcy5fcXVlcnkuYWRkTGlzdGVuZXIoXyA9PiB0aGlzLl9wb3NpdGlvblJlc3VsdHMoKSk7XG4gICAgICB0aGlzLl9wb3NpdGlvblJlc3VsdHMoKTtcbiAgICB9KTtcbiAgfVxuXG4gIF9wb3NpdGlvblJlc3VsdHMoKSB7XG4gICAgaWYgKHRoaXMuX3F1ZXJ5Lm1hdGNoZXMpIHtcbiAgICAgIHRoaXMuX2NvbnRhaW5lci5hcHBlbmRDaGlsZCh0aGlzLl9yZXN1bHRzLmNvbnRhaW5lcik7XG4gICAgfVxuICAgIGVsc2Uge1xuICAgICAgdGhpcy5fbW9iaWxlQ29udGFpbmVyLmFwcGVuZENoaWxkKHRoaXMuX3Jlc3VsdHMuY29udGFpbmVyKTtcbiAgICB9XG4gIH1cbn1cblxubW9kdWxlLmV4cG9ydHMgPSBSZXN1bHRzQ29udGFpbmVyOyIsInZhciB1dGlscyA9IHJlcXVpcmUoJy4uL3V0aWxzJyk7XG5cbmZ1bmN0aW9uIHJvdW5kKG51bSwgcGxhY2VzKSB7XG4gIHZhciBtdWx0ID0gTWF0aC5wb3coMTAsIHBsYWNlcyk7XG4gIHJldHVybiBNYXRoLmZsb29yKE1hdGgucm91bmQobnVtICogbXVsdCkpIC8gbXVsdDtcbn1cblxuZnVuY3Rpb24gaHVtYW5TaXplKGJ5dGVzKSB7IC8vIFRPRE86IEknbSBzdXJlIHRoZXJlJ3MgYSBiZXR0ZXIgdmVyc2lvbiBvZiB0aGlzXG4gIGlmIChieXRlcyA8IDEwMjQpIHtcbiAgICByZXR1cm4gYnl0ZXMgKyAnIGJ5dGVzJztcbiAgfVxuICBlbHNlIHtcbiAgICByZXR1cm4gcm91bmQoYnl0ZXMgLyAxMDI0LCAyKSArICdrJztcbiAgfVxufVxuXG5jbGFzcyBSZXN1bHRzIHtcbiAgY29uc3RydWN0b3IoKSB7XG4gICAgdGhpcy5jb250YWluZXIgPSB1dGlscy5zdHJUb0VsKFxuICAgICAgJzxkaXYgY2xhc3M9XCJyZXN1bHRzXCI+JyArXG4gICAgICAgICc8c3BhbiBjbGFzcz1cInNpemVcIj48L3NwYW4+JyArXG4gICAgICAgICc8c3BhbiBjbGFzcz1cImRpZmZcIj48L3NwYW4+JyArXG4gICAgICAnPC9kaXY+JyArXG4gICAgJycpO1xuICAgIHRoaXMuX3NpemVFbCA9IHRoaXMuY29udGFpbmVyLnF1ZXJ5U2VsZWN0b3IoJy5zaXplJyk7XG4gICAgdGhpcy5fZGlmZkVsID0gdGhpcy5jb250YWluZXIucXVlcnlTZWxlY3RvcignLmRpZmYnKTtcbiAgfVxuXG4gIHVwZGF0ZSh7c2l6ZSwgY29tcGFyaXNvblNpemV9KSB7XG4gICAgdGhpcy5fc2l6ZUVsLnRleHRDb250ZW50ID0gaHVtYW5TaXplKHNpemUpO1xuICAgIFxuICAgIC8vIGp1c3QgZGlzcGxheWluZyBhIHNpbmdsZSBzaXplP1xuICAgIGlmICghY29tcGFyaXNvblNpemUpIHtcbiAgICAgIHRoaXMuX2RpZmZFbC50ZXh0Q29udGVudCA9ICcnO1xuICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICBlbHNlIGlmIChzaXplID09IGNvbXBhcmlzb25TaXplKSB7XG4gICAgICB0aGlzLl9kaWZmRWwudGV4dENvbnRlbnQgPSAnIC0gbm8gY2hhbmdlJztcbiAgICB9XG4gICAgZWxzZSBpZiAoc2l6ZSA+IGNvbXBhcmlzb25TaXplKSB7XG4gICAgICB0aGlzLl9kaWZmRWwudGV4dENvbnRlbnQgPSAnIC0gJyArIHJvdW5kKHNpemUgLyBjb21wYXJpc29uU2l6ZSAqIDEwMCAtIDEwMCwgMikgKyAnJSBpbmNyZWFzZSc7XG4gICAgfVxuICAgIGVsc2Uge1xuICAgICAgdGhpcy5fZGlmZkVsLnRleHRDb250ZW50ID0gJyAtICcgKyByb3VuZCgxMDAgLSBzaXplIC8gY29tcGFyaXNvblNpemUgKiAxMDAsIDIpICsgJyUgc2F2aW5nJztcbiAgICB9XG4gIH1cbn1cblxubW9kdWxlLmV4cG9ydHMgPSBSZXN1bHRzOyIsInZhciB1dGlscyA9IHJlcXVpcmUoJy4uL3V0aWxzJyk7XG5cbmNsYXNzIFJpcHBsZSB7XG4gIGNvbnN0cnVjdG9yKCkge1xuICAgIHRoaXMuY29udGFpbmVyID0gdXRpbHMuc3RyVG9FbCgnPGRpdiBjbGFzcz1cInJpcHBsZVwiPjwvZGl2PicpO1xuICB9XG5cbiAgYW5pbWF0ZSgpIHtcbiAgICB0aGlzLmNvbnRhaW5lci5jbGFzc0xpc3QucmVtb3ZlKCdhbmltYXRlJyk7XG4gICAgdGhpcy5jb250YWluZXIub2Zmc2V0TGVmdDtcbiAgICB0aGlzLmNvbnRhaW5lci5jbGFzc0xpc3QuYWRkKCdhbmltYXRlJyk7XG4gIH1cbn1cblxubW9kdWxlLmV4cG9ydHMgPSBSaXBwbGU7XG4iLCJcInVzZSBzdHJpY3RcIlxuXG52YXIgdXRpbHMgPSByZXF1aXJlKCcuLi91dGlscycpO1xudmFyIFNsaWRlciA9IHJlcXVpcmUoJy4vbWF0ZXJpYWwtc2xpZGVyJyk7XG5cbmNsYXNzIFNldHRpbmdzIGV4dGVuZHMgKHJlcXVpcmUoJ2V2ZW50cycpLkV2ZW50RW1pdHRlcikge1xuICBjb25zdHJ1Y3RvcigpIHtcbiAgICBzdXBlcigpO1xuXG4gICAgdGhpcy5fdGhyb3R0bGVUaW1lb3V0ID0gbnVsbDtcblxuICAgIHV0aWxzLmRvbVJlYWR5LnRoZW4oXyA9PiB7XG4gICAgICB0aGlzLl9wbHVnaW5JbnB1dHMgPSB1dGlscy50b0FycmF5KFxuICAgICAgICBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKCcuc2V0dGluZ3MgLnBsdWdpbnMgaW5wdXQnKVxuICAgICAgKTtcbiAgICAgIHRoaXMuX2dsb2JhbElucHV0cyA9IHV0aWxzLnRvQXJyYXkoXG4gICAgICAgIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoJy5zZXR0aW5ncyAuZ2xvYmFsIGlucHV0JylcbiAgICAgICk7XG5cbiAgICAgIC8vIG1hcCByZWFsIHJhbmdlIGVsZW1lbnRzIHRvIFNsaWRlciBpbnN0YW5jZXNcbiAgICAgIHRoaXMuX3NsaWRlck1hcCA9IG5ldyBXZWFrTWFwKCk7XG5cbiAgICAgIC8vIGVuaGFuY2UgcmFuZ2VzXG4gICAgICB1dGlscy50b0FycmF5KFxuICAgICAgICBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKCcuc2V0dGluZ3MgaW5wdXRbdHlwZT1yYW5nZV0nKVxuICAgICAgKS5mb3JFYWNoKGVsID0+IHRoaXMuX3NsaWRlck1hcC5zZXQoZWwsIG5ldyBTbGlkZXIoZWwpKSk7XG5cbiAgICAgIHRoaXMuY29udGFpbmVyID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLnNldHRpbmdzJyk7XG4gICAgICB0aGlzLl9zY3JvbGxlciA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5zZXR0aW5ncy1zY3JvbGxlcicpO1xuXG4gICAgICB0aGlzLmNvbnRhaW5lci5hZGRFdmVudExpc3RlbmVyKCdjaGFuZ2UnLCBlID0+IHRoaXMuX29uQ2hhbmdlKGUpKTtcbiAgICAgIHRoaXMuY29udGFpbmVyLmFkZEV2ZW50TGlzdGVuZXIoJ2lucHV0JywgZSA9PiB0aGlzLl9vbkNoYW5nZShlKSk7XG4gICAgICB0aGlzLl9zY3JvbGxlci5hZGRFdmVudExpc3RlbmVyKCd3aGVlbCcsIGUgPT4gdGhpcy5fb25Nb3VzZVdoZWVsKGUpKTtcblxuICAgICAgLy8gU3RvcCBkb3VibGUtdGFwIHRleHQgc2VsZWN0aW9uLlxuICAgICAgLy8gVGhpcyBzdG9wcyBhbGwgdGV4dCBzZWxlY3Rpb24gd2hpY2ggaXMga2luZGEgc2FkLlxuICAgICAgLy8gSSB0aGluayB0aGlzIGNvZGUgd2lsbCBiaXRlIG1lLlxuICAgICAgdGhpcy5fc2Nyb2xsZXIuYWRkRXZlbnRMaXN0ZW5lcignbW91c2Vkb3duJywgZSA9PiB7XG4gICAgICAgIGlmICh1dGlscy5jbG9zZXN0KGUudGFyZ2V0LCAnaW5wdXRbdHlwZT1yYW5nZV0nKSkgcmV0dXJuO1xuICAgICAgICBlLnByZXZlbnREZWZhdWx0KCk7XG4gICAgICB9KTtcbiAgICB9KTtcbiAgfVxuXG4gIF9vbk1vdXNlV2hlZWwoZXZlbnQpIHtcbiAgICAvLyBQcmV2ZW50cyBib3VuY2UgZWZmZWN0IG9uIGRlc2t0b3AuXG4gICAgLy8gRmlyZWZveCB1c2VzIERFTFRBX0xJTkUgb24gYSBtb3VzZSB3aGVlbCwgaWdub3JlIGl0XG4gICAgaWYgKCFldmVudC5kZWx0YU1vZGUpIHsgLy8gMCBpcyBcInBpeGVsc1wiXG4gICAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgZXZlbnQuY3VycmVudFRhcmdldC5zY3JvbGxUb3AgKz0gZXZlbnQuZGVsdGFZO1xuICAgIH1cbiAgfVxuXG4gIF9vbkNoYW5nZShldmVudCkge1xuICAgIC8vIElFIGZpcmVzIHRoZSBjaGFuZ2UgZXZlbnQgcmF0aGVyIHRoYW4gaW5wdXQgZm9yIHJhbmdlc1xuICAgIGlmICghdXRpbHMuaXNJZSAmJiBldmVudC50eXBlID09ICdjaGFuZ2UnICYmIGV2ZW50LnRhcmdldC50eXBlID09ICdyYW5nZScpIHtcbiAgICAgIC8vIGZvciByYW5nZXMsIHRoZSBjaGFuZ2UgZXZlbnQgaXMganVzdCBhIGR1cGUgb2YgdGhlXG4gICAgICAvLyBmaW5hbCBpbnB1dCBldmVudFxuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIGNsZWFyVGltZW91dCh0aGlzLl90aHJvdHRsZVRpbWVvdXQpO1xuXG4gICAgLy8gdGhyb3R0bGUgcmFuZ2VcbiAgICBpZiAoZXZlbnQudGFyZ2V0LnR5cGUgPT0gJ3JhbmdlJykge1xuICAgICAgdGhpcy5fdGhyb3R0bGVUaW1lb3V0ID0gc2V0VGltZW91dChfID0+IHRoaXMuZW1pdCgnY2hhbmdlJyksIDE1MCk7XG4gICAgfVxuICAgIGVsc2Uge1xuICAgICAgdGhpcy5lbWl0KCdjaGFuZ2UnKTtcbiAgICB9XG4gIH1cblxuICBzZXRTZXR0aW5ncyhzZXR0aW5ncykge1xuICAgIHRoaXMuX2dsb2JhbElucHV0cy5mb3JFYWNoKGlucHV0RWwgPT4ge1xuICAgICAgaWYgKGlucHV0RWwudHlwZSA9PSAnY2hlY2tib3gnKSB7XG4gICAgICAgIGlucHV0RWwuY2hlY2tlZCA9IHNldHRpbmdzW2lucHV0RWwubmFtZV07XG4gICAgICB9XG4gICAgICBlbHNlIGlmIChpbnB1dEVsLnR5cGUgPT0gJ3JhbmdlJykge1xuICAgICAgICB0aGlzLl9zbGlkZXJNYXAuZ2V0KGlucHV0RWwpLnZhbHVlID0gc2V0dGluZ3NbaW5wdXRFbC5uYW1lXTtcbiAgICAgIH1cbiAgICB9KTtcblxuICAgIHRoaXMuX3BsdWdpbklucHV0cy5mb3JFYWNoKGlucHV0RWwgPT4ge1xuICAgICAgaW5wdXRFbC5jaGVja2VkID0gc2V0dGluZ3MucGx1Z2luc1tpbnB1dEVsLm5hbWVdO1xuICAgIH0pO1xuICB9XG5cbiAgZ2V0U2V0dGluZ3MoKSB7XG4gICAgLy8gZmluZ2VycHJpbnQgaXMgdXNlZCBmb3IgY2FjaGUgbG9va3Vwc1xuICAgIHZhciBmaW5nZXJwcmludCA9IFtdO1xuXG4gICAgdmFyIG91dHB1dCA9IHtcbiAgICAgIHBsdWdpbnM6IHt9XG4gICAgfTtcblxuICAgIHRoaXMuX2dsb2JhbElucHV0cy5mb3JFYWNoKGZ1bmN0aW9uKGlucHV0RWwpIHtcbiAgICAgIGlmIChpbnB1dEVsLm5hbWUgIT0gJ2d6aXAnICYmIGlucHV0RWwubmFtZSAhPSAnb3JpZ2luYWwnKSB7XG4gICAgICAgIGlmIChpbnB1dEVsLnR5cGUgPT0gJ2NoZWNrYm94Jykge1xuICAgICAgICAgIGZpbmdlcnByaW50LnB1c2goTnVtYmVyKGlucHV0RWwuY2hlY2tlZCkpO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgIGZpbmdlcnByaW50LnB1c2goJ3wnICsgaW5wdXRFbC52YWx1ZSArICd8Jyk7XG4gICAgICAgIH1cbiAgICAgIH1cblxuICAgICAgaWYgKGlucHV0RWwudHlwZSA9PSAnY2hlY2tib3gnKSB7XG4gICAgICAgIG91dHB1dFtpbnB1dEVsLm5hbWVdID0gaW5wdXRFbC5jaGVja2VkO1xuICAgICAgfVxuICAgICAgZWxzZSB7XG4gICAgICAgIG91dHB1dFtpbnB1dEVsLm5hbWVdID0gaW5wdXRFbC52YWx1ZTtcbiAgICAgIH1cbiAgICB9KTtcblxuICAgIHRoaXMuX3BsdWdpbklucHV0cy5mb3JFYWNoKGZ1bmN0aW9uKGlucHV0RWwpIHtcbiAgICAgIGZpbmdlcnByaW50LnB1c2goTnVtYmVyKGlucHV0RWwuY2hlY2tlZCkpO1xuICAgICAgb3V0cHV0LnBsdWdpbnNbaW5wdXRFbC5uYW1lXSA9IGlucHV0RWwuY2hlY2tlZDtcbiAgICB9KTtcblxuICAgIG91dHB1dC5maW5nZXJwcmludCA9IGZpbmdlcnByaW50LmpvaW4oKTtcblxuICAgIHJldHVybiBvdXRwdXQ7XG4gIH1cbn1cblxubW9kdWxlLmV4cG9ydHMgPSBTZXR0aW5ncztcbiIsInZhciB1dGlscyA9IHJlcXVpcmUoJy4uL3V0aWxzJyk7XG5cbmNsYXNzIFNwaW5uZXIge1xuICBjb25zdHJ1Y3RvcigpIHtcbiAgICB0aGlzLmNvbnRhaW5lciA9IHV0aWxzLnN0clRvRWwoXG4gICAgICAnPGRpdiBjbGFzcz1cInNwaW5uZXJcIj4nICtcbiAgICAgICAgJzxkaXYgY2xhc3M9XCJzcGlubmVyLWNvbnRhaW5lclwiPicgK1xuICAgICAgICAgICc8ZGl2IGNsYXNzPVwic3Bpbm5lci1sYXllclwiPicgK1xuICAgICAgICAgICAgJzxkaXYgY2xhc3M9XCJjaXJjbGUtY2xpcHBlciBsZWZ0XCI+JyArXG4gICAgICAgICAgICAgICc8ZGl2IGNsYXNzPVwiY2lyY2xlXCI+PC9kaXY+JyArXG4gICAgICAgICAgICAnPC9kaXY+JyArXG4gICAgICAgICAgICAnPGRpdiBjbGFzcz1cImdhcC1wYXRjaFwiPicgK1xuICAgICAgICAgICAgICAnPGRpdiBjbGFzcz1cImNpcmNsZVwiPjwvZGl2PicgK1xuICAgICAgICAgICAgJzwvZGl2PicgK1xuICAgICAgICAgICAgJzxkaXYgY2xhc3M9XCJjaXJjbGUtY2xpcHBlciByaWdodFwiPicgK1xuICAgICAgICAgICAgICAnPGRpdiBjbGFzcz1cImNpcmNsZVwiPjwvZGl2PicgK1xuICAgICAgICAgICAgJzwvZGl2PicgK1xuICAgICAgICAgICc8L2Rpdj4nICtcbiAgICAgICAgJzwvZGl2PicgK1xuICAgICAgJzwvZGl2PicgK1xuICAgICcnKTtcblxuICAgIHRoaXMuX3Nob3dUaW1lb3V0ID0gbnVsbDtcbiAgICB0aGlzLmNvbnRhaW5lci5zdHlsZS5kaXNwbGF5ID0gJ25vbmUnO1xuXG4gICAgdmFyIGFuaW1FbmRMaXN0ZW5lciA9IGV2ZW50ID0+IHtcbiAgICAgIGlmIChldmVudC50YXJnZXQgPT0gdGhpcy5jb250YWluZXIpIHtcbiAgICAgICAgdGhpcy5jb250YWluZXIuc3R5bGUuZGlzcGxheSA9ICdub25lJztcbiAgICAgIH1cbiAgICB9O1xuXG4gICAgdGhpcy5jb250YWluZXIuYWRkRXZlbnRMaXN0ZW5lcignd2Via2l0QW5pbWF0aW9uRW5kJywgYW5pbUVuZExpc3RlbmVyKTtcbiAgICB0aGlzLmNvbnRhaW5lci5hZGRFdmVudExpc3RlbmVyKCdhbmltYXRpb25lbmQnLCBhbmltRW5kTGlzdGVuZXIpO1xuICB9XG5cbiAgc2hvdyhkZWxheSA9IDMwMCkge1xuICAgIGNsZWFyVGltZW91dCh0aGlzLl9zaG93VGltZW91dCk7XG4gICAgdGhpcy5jb250YWluZXIuc3R5bGUuZGlzcGxheSA9ICdub25lJztcbiAgICB0aGlzLmNvbnRhaW5lci5jbGFzc0xpc3QucmVtb3ZlKCdjb29sZG93bicpO1xuICAgIHRoaXMuX3Nob3dUaW1lb3V0ID0gc2V0VGltZW91dChfID0+IHtcbiAgICAgIHRoaXMuY29udGFpbmVyLnN0eWxlLmRpc3BsYXkgPSAnJztcbiAgICB9LCBkZWxheSk7XG4gIH1cblxuICBoaWRlKCkge1xuICAgIGNsZWFyVGltZW91dCh0aGlzLl9zaG93VGltZW91dCk7XG4gICAgdGhpcy5jb250YWluZXIuY2xhc3NMaXN0LmFkZCgnY29vbGRvd24nKTtcbiAgfVxufVxuXG5tb2R1bGUuZXhwb3J0cyA9IFNwaW5uZXI7IiwidmFyIHV0aWxzID0gcmVxdWlyZSgnLi4vdXRpbHMnKTtcbnZhciBQYW5ab29tID0gcmVxdWlyZSgnLi9wYW4tem9vbScpO1xuXG5jbGFzcyBTdmdPdXRwdXQge1xuICBjb25zdHJ1Y3RvcigpIHtcbiAgICAvLyBJRSBkb2Vzbid0IHN1cHBvcnQgZGF0YXVyaXMgb3IgYmxvYiB1cmxzIGluIGlmcmFtZSA6KFxuICAgIC8vIFRPRE86IGZlYXR1cmUgZGV0ZWN0IHRoaXMgJiByZXBvcnQgYnVnXG4gICAgdmFyIGZyYW1lSHRtbCA9IHV0aWxzLmlzSWUgP1xuICAgICAgJzxpbWcgY2xhc3M9XCJzdmctZnJhbWVcIj4nIDpcbiAgICAgICc8aWZyYW1lIGNsYXNzPVwic3ZnLWZyYW1lXCIgc2FuZGJveD1cImFsbG93LXNjcmlwdHNcIj48L2lmcmFtZT4nO1xuXG4gICAgdGhpcy5jb250YWluZXIgPSB1dGlscy5zdHJUb0VsKFxuICAgICAgJzxkaXYgY2xhc3M9XCJzdmctb3V0cHV0XCI+JyArXG4gICAgICAgICc8ZGl2IGNsYXNzPVwic3ZnLWNvbnRhaW5lclwiPicgK1xuICAgICAgICAgIGZyYW1lSHRtbCArXG4gICAgICAgICc8L2Rpdj4nICtcbiAgICAgICAgLy8gU3RvcCB0b3VjaGVzIGdvaW5nIGludG8gdGhlIGlmcmFtZS5cbiAgICAgICAgLy8gcG9pbnRlci1ldmVudHMgKyB0b3VjaCArIGlmcmFtZSBkb2Vzbid0IHdvcmsgaW4gQ2hyb21lIDooXG4gICAgICAgICc8ZGl2IGNsYXNzPVwic3ZnLWNsaWNramFja2VyXCI+PC9kaXY+JyArXG4gICAgICAnPC9kaXY+JyArXG4gICAgJycpO1xuXG5cbiAgICB0aGlzLl9zdmdGcmFtZSA9IHRoaXMuY29udGFpbmVyLnF1ZXJ5U2VsZWN0b3IoJy5zdmctZnJhbWUnKTtcbiAgICB0aGlzLl9zdmdGcmFtZS5zY3JvbGxpbmcgPSAnbm8nO1xuXG4gICAgdGhpcy5fc3ZnQ29udGFpbmVyID0gdGhpcy5jb250YWluZXIucXVlcnlTZWxlY3RvcignLnN2Zy1jb250YWluZXInKTtcblxuICAgIHV0aWxzLmRvbVJlYWR5LnRoZW4oXyA9PiB7XG4gICAgICB0aGlzLl9wYW5ab29tID0gbmV3IFBhblpvb20odGhpcy5fc3ZnQ29udGFpbmVyLCB7XG4gICAgICAgIGV2ZW50QXJlYTogdGhpcy5jb250YWluZXJcbiAgICAgIH0pO1xuICAgIH0pO1xuICB9XG5cbiAgc2V0U3ZnKHN2Z0ZpbGUpIHtcbiAgICAvLyBJIHdvdWxkIHJhdGhlciB1c2UgYmxvYiB1cmxzLCBidXQgdGhleSBkb24ndCB3b3JrIGluIEZpcmVmb3hcbiAgICAvLyBBbGwgdGhlIGludGVybmFsIHJlZnMgYnJlYWsuXG4gICAgLy8gaHR0cHM6Ly9idWd6aWxsYS5tb3ppbGxhLm9yZy9zaG93X2J1Zy5jZ2k/aWQ9MTEyNTY2N1xuICAgIHZhciBuZXh0TG9hZCA9IHRoaXMuX25leHRMb2FkUHJvbWlzZSgpO1xuICAgIHRoaXMuX3N2Z0ZyYW1lLnNyYyA9IFwiZGF0YTppbWFnZS9zdmcreG1sO2NoYXJzZXQ9dXRmLTgsXCIgKyBlbmNvZGVVUklDb21wb25lbnQoc3ZnRmlsZS50ZXh0KTtcbiAgICB0aGlzLl9zdmdGcmFtZS53aWR0aCA9IHN2Z0ZpbGUud2lkdGg7XG4gICAgdGhpcy5fc3ZnRnJhbWUuaGVpZ2h0ID0gc3ZnRmlsZS5oZWlnaHQ7XG4gICAgcmV0dXJuIG5leHRMb2FkO1xuICB9XG5cbiAgcmVzZXQoKSB7XG4gICAgdGhpcy5fc3ZnRnJhbWUuc3JjID0gXCJhYm91dDpibGFua1wiO1xuICAgIHRoaXMuX3Bhblpvb20ucmVzZXQoKTtcbiAgfVxuXG4gIF9uZXh0TG9hZFByb21pc2UoKSB7XG4gICAgcmV0dXJuIG5ldyBQcm9taXNlKHJlc29sdmUgPT4ge1xuICAgICAgdmFyIG9ubG9hZCA9IF8gPT4ge1xuICAgICAgICB0aGlzLl9zdmdGcmFtZS5yZW1vdmVFdmVudExpc3RlbmVyKCdsb2FkJywgb25sb2FkKTtcbiAgICAgICAgcmVzb2x2ZSgpO1xuICAgICAgfVxuICAgICAgdGhpcy5fc3ZnRnJhbWUuYWRkRXZlbnRMaXN0ZW5lcignbG9hZCcsIG9ubG9hZCk7XG4gICAgfSk7XG4gIH1cbn1cblxubW9kdWxlLmV4cG9ydHMgPSBTdmdPdXRwdXQ7XG4iLCJ2YXIgdXRpbHMgPSByZXF1aXJlKCcuLi91dGlscycpO1xuXG5jbGFzcyBUb2FzdCB7XG4gIGNvbnN0cnVjdG9yKG1lc3NhZ2UsIGR1cmF0aW9uLCBidXR0b25zKSB7XG4gICAgdGhpcy5jb250YWluZXIgPSB1dGlscy5zdHJUb0VsKFxuICAgICAgJzxkaXYgY2xhc3M9XCJ0b2FzdFwiPjxkaXYgY2xhc3M9XCJ0b2FzdC1jb250ZW50XCI+PC9kaXY+PC9kaXY+JyArXG4gICAgJycpO1xuXG4gICAgdGhpcy5fY29udGVudCA9IHRoaXMuY29udGFpbmVyLnF1ZXJ5U2VsZWN0b3IoJy50b2FzdC1jb250ZW50Jyk7XG4gICAgdGhpcy5fY29udGVudC50ZXh0Q29udGVudCA9IG1lc3NhZ2U7XG4gICAgdGhpcy5fYW5zd2VyUmVzb2x2ZTtcbiAgICB0aGlzLl9oaWRlVGltZW91dDtcblxuICAgIHRoaXMuYW5zd2VyID0gbmV3IFByb21pc2UociA9PiB0aGlzLl9hbnN3ZXJSZXNvbHZlID0gcik7XG5cbiAgICBidXR0b25zLmZvckVhY2goYnV0dG9uID0+IHtcbiAgICAgIHZhciBidXR0b25FbCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2J1dHRvbicpO1xuICAgICAgYnV0dG9uRWwuY2xhc3NOYW1lID0gJ3VuYnV0dG9uJztcbiAgICAgIGJ1dHRvbkVsLnRleHRDb250ZW50ID0gYnV0dG9uO1xuICAgICAgYnV0dG9uRWwuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCBldmVudCA9PiB7XG4gICAgICAgIHRoaXMuX2Fuc3dlclJlc29sdmUoYnV0dG9uKTtcbiAgICAgIH0pO1xuICAgICAgdGhpcy5jb250YWluZXIuYXBwZW5kQ2hpbGQoYnV0dG9uRWwpO1xuICAgIH0pO1xuXG4gICAgaWYgKGR1cmF0aW9uKSB7XG4gICAgICB0aGlzLl9oaWRlVGltZW91dCA9IHNldFRpbWVvdXQoXyA9PiB0aGlzLmhpZGUoKSwgZHVyYXRpb24pO1xuICAgIH1cbiAgfVxuXG4gIGhpZGUoKSB7XG4gICAgY2xlYXJUaW1lb3V0KHRoaXMuX2hpZGVUaW1lb3V0KTtcbiAgICB0aGlzLl9hbnN3ZXJSZXNvbHZlKCk7XG4gICAgcmV0dXJuIHV0aWxzLnRyYW5zaXRpb25Ub0NsYXNzKHRoaXMuY29udGFpbmVyLCAnaGlkZScpO1xuICB9XG59XG5cbmNsYXNzIFRvYXN0cyB7XG4gIGNvbnN0cnVjdG9yKCkge1xuICAgIHRoaXMuY29udGFpbmVyID0gdXRpbHMuc3RyVG9FbChcIjxkaXYgY2xhc3M9J3RvYXN0cyc+PC9kaXY+XCIpO1xuICB9XG5cbiAgc2hvdyhtZXNzYWdlLCB7XG4gICAgZHVyYXRpb24gPSAwLFxuICAgIGJ1dHRvbnMgPSBbJ2Rpc21pc3MnXVxuICB9PXt9KSB7XG4gICAgdmFyIHRvYXN0ID0gbmV3IFRvYXN0KG1lc3NhZ2UsIGR1cmF0aW9uLCBidXR0b25zKTtcbiAgICB0aGlzLmNvbnRhaW5lci5hcHBlbmRDaGlsZCh0b2FzdC5jb250YWluZXIpO1xuXG4gICAgdG9hc3QuYW5zd2VyLnRoZW4oXyA9PiB0b2FzdC5oaWRlKCkpLnRoZW4oXyA9PiB7XG4gICAgICB0aGlzLmNvbnRhaW5lci5yZW1vdmVDaGlsZCh0b2FzdC5jb250YWluZXIpO1xuICAgIH0pO1xuXG4gICAgcmV0dXJuIHRvYXN0O1xuICB9XG59XG5cbm1vZHVsZS5leHBvcnRzID0gVG9hc3RzOyIsInZhciB1dGlscyA9IHJlcXVpcmUoJy4uL3V0aWxzJyk7XG5cbmNsYXNzIFZpZXdUb2dnbGVyIGV4dGVuZHMgKHJlcXVpcmUoJ2V2ZW50cycpLkV2ZW50RW1pdHRlcikge1xuICBjb25zdHJ1Y3RvcigpIHtcbiAgICBzdXBlcigpO1xuICAgIHRoaXMuY29udGFpbmVyID0gbnVsbDtcblxuICAgIHV0aWxzLmRvbVJlYWR5LnRoZW4oXyA9PiB7XG4gICAgICB0aGlzLmNvbnRhaW5lciA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy52aWV3LXRvZ2dsZXInKTtcblxuICAgICAgLy8gc3RvcCBicm93c2VycyByZW1lbWJlcmluZyBwcmV2aW91cyBmb3JtIHN0YXRlXG4gICAgICB0aGlzLmNvbnRhaW5lci5vdXRwdXRbMF0uY2hlY2tlZCA9IHRydWU7XG5cbiAgICAgIHRoaXMuY29udGFpbmVyLmFkZEV2ZW50TGlzdGVuZXIoJ2NoYW5nZScsIGUgPT4gdGhpcy5fb25DaGFuZ2UoZSkpO1xuICAgIH0pO1xuICB9XG5cbiAgX29uQ2hhbmdlKGV2ZW50KSB7XG4gICAgdmFyIHZhbHVlID0gdGhpcy5jb250YWluZXIub3V0cHV0LnZhbHVlO1xuXG4gICAgaWYgKCF2YWx1ZSkgeyAvLyBzb21lIGJyb3dzZXJzIGRvbid0IHN1cHBvcnQgdGhlIG5pY2Ugc2hvcnRjdXQgYWJvdmUgKGVnIFNhZmFyaSlcbiAgICAgIHZhbHVlID0gdXRpbHMudG9BcnJheSh0aGlzLmNvbnRhaW5lci5vdXRwdXQpLnJlZHVjZSgodmFsdWUsIGlucHV0KSA9PiB7XG4gICAgICAgIHJldHVybiB2YWx1ZSB8fCAoaW5wdXQuY2hlY2tlZCA/IGlucHV0LnZhbHVlIDogJycpO1xuICAgICAgfSwgJycpO1xuICAgIH1cblxuICAgIHRoaXMuZW1pdChcImNoYW5nZVwiLCB7XG4gICAgICB2YWx1ZTogdmFsdWVcbiAgICB9KTtcbiAgfVxufVxuXG5tb2R1bGUuZXhwb3J0cyA9IFZpZXdUb2dnbGVyOyIsIlwidXNlIHN0cmljdFwiO1xuXG5leHBvcnRzLnRvQXJyYXkgPSBmdW5jdGlvbiB0b0FycmF5KG9iaikge1xuICByZXR1cm4gQXJyYXkucHJvdG90eXBlLnNsaWNlLmFwcGx5KG9iaik7XG59O1xuXG5leHBvcnRzLmRvbVJlYWR5ID0gbmV3IFByb21pc2UoZnVuY3Rpb24ocmVzb2x2ZSkge1xuICBmdW5jdGlvbiBjaGVja1N0YXRlKCkge1xuICAgIGlmIChkb2N1bWVudC5yZWFkeVN0YXRlICE9ICdsb2FkaW5nJykge1xuICAgICAgcmVzb2x2ZSgpO1xuICAgIH1cbiAgfVxuICBkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKCdyZWFkeXN0YXRlY2hhbmdlJywgY2hlY2tTdGF0ZSk7XG4gIGNoZWNrU3RhdGUoKTtcbn0pO1xuXG5leHBvcnRzLmdldCA9IGZ1bmN0aW9uIGdldCh1cmwpIHtcbiAgcmV0dXJuIG5ldyBQcm9taXNlKGZ1bmN0aW9uKHJlc29sdmUsIHJlamVjdCkge1xuICAgIHZhciByZXEgPSBuZXcgWE1MSHR0cFJlcXVlc3QoKTtcbiAgICByZXEub3BlbignR0VUJywgdXJsKTtcblxuICAgIHJlcS5vbmxvYWQgPSBmdW5jdGlvbigpIHtcbiAgICAgIGlmIChyZXEuc3RhdHVzID09IDIwMCkge1xuICAgICAgICByZXNvbHZlKHJlcS5yZXNwb25zZSk7XG4gICAgICB9XG4gICAgICBlbHNlIHtcbiAgICAgICAgcmVqZWN0KEVycm9yKHJlcS5zdGF0dXNUZXh0KSk7XG4gICAgICB9XG4gICAgfTtcbiAgICByZXEub25lcnJvciA9IGZ1bmN0aW9uKCkge1xuICAgICAgcmVqZWN0KEVycm9yKFwiTmV0d29yayBFcnJvclwiKSk7XG4gICAgfTtcblxuICAgIHJlcS5zZW5kKCk7XG4gIH0pO1xufTtcblxuZXhwb3J0cy5zdHJUb0VsID0gKGZ1bmN0aW9uICgpIHtcbiAgdmFyIHRtcEVsID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7XG4gIHJldHVybiBmdW5jdGlvbiAoc3RyKSB7XG4gICAgdmFyIHI7XG4gICAgdG1wRWwuaW5uZXJIVE1MID0gc3RyO1xuICAgIHIgPSB0bXBFbC5jaGlsZHJlblswXTtcbiAgICB3aGlsZSAodG1wRWwuZmlyc3RDaGlsZCkge1xuICAgICAgdG1wRWwucmVtb3ZlQ2hpbGQodG1wRWwuZmlyc3RDaGlsZCk7XG4gICAgfVxuICAgIHJldHVybiByO1xuICB9O1xufSgpKTtcblxudmFyIGVudGl0eU1hcCA9IHtcbiAgXCImXCI6IFwiJmFtcDtcIixcbiAgXCI8XCI6IFwiJmx0O1wiLFxuICBcIj5cIjogXCImZ3Q7XCIsXG4gICdcIic6ICcmcXVvdDsnLFxuICBcIidcIjogJyYjMzk7JyxcbiAgXCIvXCI6ICcmI3gyRjsnXG59O1xuXG5leHBvcnRzLmVzY2FwZUh0bWwgPSBmdW5jdGlvbiBlc2NhcGVIVE1MKHN0cmluZykge1xuICByZXR1cm4gU3RyaW5nKHN0cmluZykucmVwbGFjZSgvWyY8PlwiJ1xcL10vZywgZnVuY3Rpb24gKHMpIHtcbiAgICByZXR1cm4gZW50aXR5TWFwW3NdO1xuICB9KTtcbn07XG5cbmV4cG9ydHMuZXNjYXBlSHRtbFRhZyA9IGZ1bmN0aW9uKHN0cmluZ3MsIC4uLnZhbHVlcykge1xuICB2YWx1ZXMgPSB2YWx1ZXMubWFwKGV4cG9ydHMuZXNjYXBlSHRtbCk7XG4gIHJldHVybiBzdHJpbmdzLnJlZHVjZSgoc3RyLCB2YWwsIGkpID0+IHN0ciArPSB2YWwgKyAodmFsdWVzW2ldIHx8ICcnKSwgJycpO1xufTtcblxuZXhwb3J0cy5yZWFkRmlsZUFzVGV4dCA9IGZ1bmN0aW9uIHJlYWRGaWxlQXNUZXh0KGZpbGUpIHtcbiAgcmV0dXJuIG5ldyBQcm9taXNlKGZ1bmN0aW9uKHJlc29sdmUsIHJlamVjdCkge1xuICAgIHZhciByZWFkZXIgPSBuZXcgRmlsZVJlYWRlcigpO1xuICAgIHJlYWRlci5yZWFkQXNUZXh0KGZpbGUpO1xuICAgIHJlYWRlci5vbmVycm9yID0gZnVuY3Rpb24oKSB7XG4gICAgICByZWplY3QocmVhZGVyLmVycm9yKTtcbiAgICB9O1xuICAgIHJlYWRlci5vbmxvYWQgPSBmdW5jdGlvbigpIHtcbiAgICAgIHJlc29sdmUocmVhZGVyLnJlc3VsdCk7XG4gICAgfTtcbiAgfSk7XG59XG5cbmZ1bmN0aW9uIHRyYW5zaXRpb25DbGFzc0Z1bmMoe3JlbW92ZUNsYXNzID0gZmFsc2V9PXt9KSB7XG4gIHJldHVybiBmdW5jdGlvbihlbCwgY2xhc3NOYW1lID0gJ2FjdGl2ZScsIHRyYW5zaXRpb25DbGFzcyA9ICd0cmFuc2l0aW9uJykge1xuICAgIGlmIChyZW1vdmVDbGFzcykge1xuICAgICAgaWYgKCFlbC5jbGFzc0xpc3QuY29udGFpbnMoY2xhc3NOYW1lKSkgcmV0dXJuIFByb21pc2UucmVzb2x2ZSgpO1xuICAgIH1cbiAgICBlbHNlIHtcbiAgICAgIGlmIChlbC5jbGFzc0xpc3QuY29udGFpbnMoY2xhc3NOYW1lKSkgcmV0dXJuIFByb21pc2UucmVzb2x2ZSgpO1xuICAgIH1cblxuICAgIHJldHVybiBuZXcgUHJvbWlzZShyZXNvbHZlID0+IHtcbiAgICAgIHZhciBsaXN0ZW5lciA9IGV2ZW50ID0+IHtcbiAgICAgICAgaWYgKGV2ZW50LnRhcmdldCAhPSBlbCkgcmV0dXJuO1xuICAgICAgICBlbC5yZW1vdmVFdmVudExpc3RlbmVyKCd3ZWJraXRUcmFuc2l0aW9uRW5kJywgbGlzdGVuZXIpO1xuICAgICAgICBlbC5yZW1vdmVFdmVudExpc3RlbmVyKCd0cmFuc2l0aW9uZW5kJywgbGlzdGVuZXIpO1xuICAgICAgICBlbC5jbGFzc0xpc3QucmVtb3ZlKHRyYW5zaXRpb25DbGFzcyk7XG4gICAgICAgIHJlc29sdmUoKTtcbiAgICAgIH07XG5cbiAgICAgIGVsLmNsYXNzTGlzdC5hZGQodHJhbnNpdGlvbkNsYXNzKTtcblxuICAgICAgcmVxdWVzdEFuaW1hdGlvbkZyYW1lKF8gPT4ge1xuICAgICAgICBlbC5hZGRFdmVudExpc3RlbmVyKCd3ZWJraXRUcmFuc2l0aW9uRW5kJywgbGlzdGVuZXIpO1xuICAgICAgICBlbC5hZGRFdmVudExpc3RlbmVyKCd0cmFuc2l0aW9uZW5kJywgbGlzdGVuZXIpO1xuICAgICAgICBlbC5jbGFzc0xpc3RbcmVtb3ZlQ2xhc3MgPyAncmVtb3ZlJyA6ICdhZGQnXShjbGFzc05hbWUpO1xuICAgICAgfSk7XG4gICAgfSk7XG4gIH1cbn1cblxuZXhwb3J0cy50cmFuc2l0aW9uVG9DbGFzcyA9IHRyYW5zaXRpb25DbGFzc0Z1bmMoKTtcbmV4cG9ydHMudHJhbnNpdGlvbkZyb21DbGFzcyA9IHRyYW5zaXRpb25DbGFzc0Z1bmMoe3JlbW92ZUNsYXNzOiB0cnVlfSk7XG5cbmV4cG9ydHMuY2xvc2VzdCA9IGZ1bmN0aW9uKGVsLCBzZWxlY3Rvcikge1xuICBpZiAoZWwuY2xvc2VzdCkge1xuICAgIHJldHVybiBlbC5jbG9zZXN0KHNlbGVjdG9yKTtcbiAgfVxuXG4gIHZhciBtYXRjaGVzID0gZWwubWF0Y2hlcyB8fCBlbC5tc01hdGNoZXNTZWxlY3RvcjtcblxuICBkbyB7XG4gICAgaWYgKGVsLm5vZGVUeXBlICE9IDEpIGNvbnRpbnVlO1xuICAgIGlmIChtYXRjaGVzLmNhbGwoZWwsIHNlbGVjdG9yKSkgcmV0dXJuIGVsO1xuICB9IHdoaWxlIChlbCA9IGVsLnBhcmVudE5vZGUpO1xuXG4gIHJldHVybiB1bmRlZmluZWQ7XG59O1xuXG4vLyBJIGhhdGUgdGhhdCBJIGhhdmUgdG8gZG8gdGhpc1xuZXhwb3J0cy5pc0llID0gKG5hdmlnYXRvci51c2VyQWdlbnQuaW5kZXhPZignVHJpZGVudC8nKSAhPT0gLTEpO1xuXG5leHBvcnRzLmxvYWRDc3MgPSBmdW5jdGlvbih1cmwpIHtcbiAgcmV0dXJuIG5ldyBQcm9taXNlKChyZXNvbHZlLCByZWplY3QpID0+IHtcbiAgICB2YXIgbGluayA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2xpbmsnKTtcbiAgICBsaW5rLnJlbCA9ICdzdHlsZXNoZWV0JztcbiAgICBsaW5rLmhyZWYgPSB1cmw7XG5cbiAgICBsaW5rLmFkZEV2ZW50TGlzdGVuZXIoJ2xvYWQnLCBfID0+IHJlc29sdmUoKSk7XG4gICAgbGluay5hZGRFdmVudExpc3RlbmVyKCdlcnJvcicsIF8gPT4gcmVqZWN0KCkpO1xuXG4gICAgZG9jdW1lbnQuaGVhZC5hcHBlbmRDaGlsZChsaW5rKTtcbiAgfSk7XG59O1xuXG5leHBvcnRzLnRyYWNrRm9jdXNNZXRob2QgPSBmdW5jdGlvbigpIHtcbiAgdmFyIGZvY3VzTWV0aG9kID0gJ21vdXNlJztcblxuICBkb2N1bWVudC5ib2R5LmFkZEV2ZW50TGlzdGVuZXIoJ2ZvY3VzJywgZXZlbnQgPT4ge1xuICAgIGV2ZW50LnRhcmdldC5jbGFzc0xpc3QuYWRkKGZvY3VzTWV0aG9kID09ICdrZXknID8gJ2tleS1mb2N1c2VkJyA6ICdtb3VzZS1mb2N1c2VkJyk7XG4gIH0sIHRydWUpO1xuXG4gIGRvY3VtZW50LmJvZHkuYWRkRXZlbnRMaXN0ZW5lcignYmx1cicsIGV2ZW50ID0+IHtcbiAgICBldmVudC50YXJnZXQuY2xhc3NMaXN0LnJlbW92ZSgna2V5LWZvY3VzZWQnKTtcbiAgICBldmVudC50YXJnZXQuY2xhc3NMaXN0LnJlbW92ZSgnbW91c2UtZm9jdXNlZCcpO1xuICB9LCB0cnVlKTtcblxuICBkb2N1bWVudC5ib2R5LmFkZEV2ZW50TGlzdGVuZXIoJ2tleWRvd24nLCBldmVudCA9PiB7XG4gICAgZm9jdXNNZXRob2QgPSAna2V5JztcbiAgfSwgdHJ1ZSk7XG5cbiAgZG9jdW1lbnQuYm9keS5hZGRFdmVudExpc3RlbmVyKCdtb3VzZWRvd24nLCBldmVudCA9PiB7XG4gICAgZm9jdXNNZXRob2QgPSAnbW91c2UnO1xuICB9LCB0cnVlKTtcbn07XG4iLCJcInVzZSBzdHJpY3RcIjtcblxuY2xhc3MgV29ya2VyTWVzc2VuZ2VyIHtcbiAgY29uc3RydWN0b3IodXJsKSB7XG4gICAgdGhpcy5fcmVxdWVzdElkID0gMDtcbiAgICB0aGlzLl93b3JrZXIgPSBuZXcgV29ya2VyKHVybCk7XG5cbiAgICAvLyB3b3JrZXIgam9icyBhd2FpdGluZyByZXNwb25zZSB7Y2FsbElkOiBbcmVzb2x2ZSwgcmVqZWN0XX1cbiAgICB0aGlzLl9wZW5kaW5nID0ge307XG5cbiAgICB0aGlzLl93b3JrZXIub25tZXNzYWdlID0gZXZlbnQgPT4gdGhpcy5fb25NZXNzYWdlKGV2ZW50KTtcbiAgfVxuXG4gIF9vbk1lc3NhZ2UoZXZlbnQpIHtcbiAgICBpZiAoIWV2ZW50LmRhdGEuaWQpIHtcbiAgICAgIGNvbnNvbGUubG9nKFwiVW5leHBlY3RlZCBtZXNzYWdlXCIsIGV2ZW50KTtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICB2YXIgcmVzb2x2ZXIgPSB0aGlzLl9wZW5kaW5nW2V2ZW50LmRhdGEuaWRdO1xuXG4gICAgaWYgKCFyZXNvbHZlcikge1xuICAgICAgY29uc29sZS5sb2coXCJObyByZXNvbHZlciBmb3JcIiwgZXZlbnQpO1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIGRlbGV0ZSB0aGlzLl9wZW5kaW5nW2V2ZW50LmRhdGEuaWRdO1xuXG4gICAgaWYgKGV2ZW50LmRhdGEuZXJyb3IpIHtcbiAgICAgIHJlc29sdmVyWzFdKG5ldyBFcnJvcihldmVudC5kYXRhLmVycm9yKSk7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgcmVzb2x2ZXJbMF0oZXZlbnQuZGF0YS5yZXN1bHQpO1xuICB9XG5cbiAgX3JlcXVlc3RSZXNwb25zZShtZXNzYWdlKSB7XG4gICAgdmFyIHdvcmtlck1lc3NlbmdlciA9IHRoaXM7XG4gICAgdmFyIHJlcXVlc3RJZCA9ICsrdGhpcy5fcmVxdWVzdElkO1xuICAgIG1lc3NhZ2UuaWQgPSByZXF1ZXN0SWQ7XG5cbiAgICByZXR1cm4gbmV3IFByb21pc2UoZnVuY3Rpb24ocmVzb2x2ZSwgcmVqZWN0KSB7XG4gICAgICB3b3JrZXJNZXNzZW5nZXIuX3BlbmRpbmdbcmVxdWVzdElkXSA9IFtyZXNvbHZlLCByZWplY3RdO1xuICAgICAgd29ya2VyTWVzc2VuZ2VyLl93b3JrZXIucG9zdE1lc3NhZ2UobWVzc2FnZSk7XG4gICAgfSk7XG4gIH1cbn1cblxubW9kdWxlLmV4cG9ydHMgPSBXb3JrZXJNZXNzZW5nZXI7IiwiJ3VzZSBzdHJpY3QnO1xuXG5mdW5jdGlvbiBwcm9taXNpZnlSZXF1ZXN0KG9iaikge1xuICByZXR1cm4gbmV3IFByb21pc2UoZnVuY3Rpb24ocmVzb2x2ZSwgcmVqZWN0KSB7XG4gICAgZnVuY3Rpb24gb25zdWNjZXNzKGV2ZW50KSB7XG4gICAgICByZXNvbHZlKG9iai5yZXN1bHQpO1xuICAgICAgdW5saXN0ZW4oKTtcbiAgICB9XG4gICAgZnVuY3Rpb24gb25lcnJvcihldmVudCkge1xuICAgICAgcmVqZWN0KG9iai5lcnJvcik7XG4gICAgICB1bmxpc3RlbigpO1xuICAgIH1cbiAgICBmdW5jdGlvbiB1bmxpc3RlbigpIHtcbiAgICAgIG9iai5yZW1vdmVFdmVudExpc3RlbmVyKCdjb21wbGV0ZScsIG9uc3VjY2Vzcyk7XG4gICAgICBvYmoucmVtb3ZlRXZlbnRMaXN0ZW5lcignc3VjY2VzcycsIG9uc3VjY2Vzcyk7XG4gICAgICBvYmoucmVtb3ZlRXZlbnRMaXN0ZW5lcignZXJyb3InLCBvbmVycm9yKTtcbiAgICAgIG9iai5yZW1vdmVFdmVudExpc3RlbmVyKCdhYm9ydCcsIG9uZXJyb3IpO1xuICAgIH1cbiAgICBvYmouYWRkRXZlbnRMaXN0ZW5lcignY29tcGxldGUnLCBvbnN1Y2Nlc3MpO1xuICAgIG9iai5hZGRFdmVudExpc3RlbmVyKCdzdWNjZXNzJywgb25zdWNjZXNzKTtcbiAgICBvYmouYWRkRXZlbnRMaXN0ZW5lcignZXJyb3InLCBvbmVycm9yKTtcbiAgICBvYmouYWRkRXZlbnRMaXN0ZW5lcignYWJvcnQnLCBvbmVycm9yKTtcbiAgfSk7XG59XG5cbmNsYXNzIEluZGV4ZWREb3VjaGViYWcge1xuICBjb25zdHJ1Y3RvcihuYW1lLCB2ZXJzaW9uLCB1cGdyYWRlQ2FsbGJhY2spIHtcbiAgICB2YXIgcmVxdWVzdCA9IGluZGV4ZWREQi5vcGVuKG5hbWUsIHZlcnNpb24pO1xuICAgIHRoaXMucmVhZHkgPSBwcm9taXNpZnlSZXF1ZXN0KHJlcXVlc3QpO1xuICAgIHJlcXVlc3Qub251cGdyYWRlbmVlZGVkID0gZnVuY3Rpb24oZXZlbnQpIHtcbiAgICAgIHVwZ3JhZGVDYWxsYmFjayhyZXF1ZXN0LnJlc3VsdCwgZXZlbnQub2xkVmVyc2lvbik7XG4gICAgfTtcbiAgfVxuXG4gIHRyYW5zYWN0aW9uKHN0b3JlcywgbW9kZU9yQ2FsbGJhY2ssIGNhbGxiYWNrKSB7XG4gICAgcmV0dXJuIHRoaXMucmVhZHkudGhlbihmdW5jdGlvbihkYikge1xuICAgICAgdmFyIG1vZGUgPSAncmVhZG9ubHknO1xuXG4gICAgICBpZiAobW9kZU9yQ2FsbGJhY2suYXBwbHkpIHtcbiAgICAgICAgY2FsbGJhY2sgPSBtb2RlT3JDYWxsYmFjaztcbiAgICAgIH1cbiAgICAgIGVsc2UgaWYgKG1vZGVPckNhbGxiYWNrKSB7XG4gICAgICAgIG1vZGUgPSBtb2RlT3JDYWxsYmFjaztcbiAgICAgIH1cblxuICAgICAgdmFyIHR4ID0gZGIudHJhbnNhY3Rpb24oc3RvcmVzLCBtb2RlKTtcbiAgICAgIHZhciB2YWwgPSBjYWxsYmFjayh0eCwgZGIpO1xuICAgICAgdmFyIHByb21pc2UgPSBwcm9taXNpZnlSZXF1ZXN0KHR4KTtcbiAgICAgIHZhciByZWFkUHJvbWlzZTtcblxuICAgICAgaWYgKCF2YWwpIHtcbiAgICAgICAgcmV0dXJuIHByb21pc2U7XG4gICAgICB9XG5cbiAgICAgIGlmICh2YWxbMF0gJiYgJ3Jlc3VsdCcgaW4gdmFsWzBdKSB7XG4gICAgICAgIHJlYWRQcm9taXNlID0gUHJvbWlzZS5hbGwodmFsLm1hcChwcm9taXNpZnlSZXF1ZXN0KSk7XG4gICAgICB9XG4gICAgICBlbHNlIHtcbiAgICAgICAgcmVhZFByb21pc2UgPSBwcm9taXNpZnlSZXF1ZXN0KHZhbCk7XG4gICAgICB9XG5cbiAgICAgIHJldHVybiBwcm9taXNlLnRoZW4oZnVuY3Rpb24oKSB7XG4gICAgICAgIHJldHVybiByZWFkUHJvbWlzZTtcbiAgICAgIH0pO1xuICAgIH0pO1xuICB9O1xuXG4gIGdldChzdG9yZSwga2V5KSB7XG4gICAgcmV0dXJuIHRoaXMudHJhbnNhY3Rpb24oc3RvcmUsIGZ1bmN0aW9uKHR4KSB7XG4gICAgICByZXR1cm4gdHgub2JqZWN0U3RvcmUoc3RvcmUpLmdldChrZXkpO1xuICAgIH0pO1xuICB9O1xuXG4gIHB1dChzdG9yZSwga2V5LCB2YWx1ZSkge1xuICAgIHJldHVybiB0aGlzLnRyYW5zYWN0aW9uKHN0b3JlLCAncmVhZHdyaXRlJywgZnVuY3Rpb24odHgpIHtcbiAgICAgIHR4Lm9iamVjdFN0b3JlKHN0b3JlKS5wdXQodmFsdWUsIGtleSk7XG4gICAgfSk7XG4gIH07XG5cbiAgZGVsZXRlKHN0b3JlLCBrZXkpIHtcbiAgICByZXR1cm4gdGhpcy50cmFuc2FjdGlvbihzdG9yZSwgJ3JlYWR3cml0ZScsIGZ1bmN0aW9uKHR4KSB7XG4gICAgICB0eC5vYmplY3RTdG9yZShzdG9yZSkuZGVsZXRlKGtleSk7XG4gICAgfSk7XG4gIH07XG59XG5cbm1vZHVsZS5leHBvcnRzID0gSW5kZXhlZERvdWNoZWJhZzsiLCJ2YXIgSWRiID0gcmVxdWlyZSgnLi9pbmRleGVkZG91Y2hiYWcnKTtcbnZhciBpZGI7XG5cbi8vIGF2b2lkIG9wZW5pbmcgaWRiIHVudGlsIGZpcnN0IGNhbGxcbmZ1bmN0aW9uIGdldElkYigpIHtcbiAgaWYgKCFpZGIpIHtcbiAgICBpZGIgPSBuZXcgSWRiKCdzdmdvLWtleXZhbCcsIDEsIGZ1bmN0aW9uKGRiKSB7XG4gICAgICBkYi5jcmVhdGVPYmplY3RTdG9yZSgna2V5dmFsJyk7XG4gICAgfSk7XG4gIH1cbiAgcmV0dXJuIGlkYjtcbn1cblxuaWYgKHNlbGYuaW5kZXhlZERCKSB7XG4gIG1vZHVsZS5leHBvcnRzID0ge1xuICAgIGdldDoga2V5ID0+IGdldElkYigpLmdldCgna2V5dmFsJywga2V5KSxcbiAgICBzZXQ6IChrZXksIHZhbCkgPT4gZ2V0SWRiKCkucHV0KCdrZXl2YWwnLCBrZXksIHZhbCksXG4gICAgZGVsZXRlOiBrZXkgPT4gZ2V0SWRiKCkuZGVsZXRlKCdrZXl2YWwnLCBrZXkpXG4gIH07XG59XG5lbHNlIHtcbiAgbW9kdWxlLmV4cG9ydHMgPSB7XG4gICAgZ2V0OiBrZXkgPT4gUHJvbWlzZS5yZXNvbHZlKGxvY2FsU3RvcmFnZS5nZXRJdGVtKGtleSkpLFxuICAgIHNldDogKGtleSwgdmFsKSA9PiBQcm9taXNlLnJlc29sdmUobG9jYWxTdG9yYWdlLnNldEl0ZW0oa2V5LCB2YWwpKSxcbiAgICBkZWxldGU6IGtleSA9PiBQcm9taXNlLnJlc29sdmUobG9jYWxTdG9yYWdlLnJlbW92ZUl0ZW0oa2V5KSlcbiAgfTtcbn0iXX0="}